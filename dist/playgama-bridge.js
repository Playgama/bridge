/*! For license information please see playgama-bridge.js.LICENSE.txt */
(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit",XIAOMI:"xiaomi"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements",ANALYTICS:"analytics"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},p="not_available",d="in_game",h="native",y={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},m={message:"Before using the SDK you must initialize it"},v={message:"Storage not supported"},_={message:"Storage not available"},g={message:"GameDistribution Game ID is undefined"},S={message:"Y8 Game params are not found"},b={message:"OK Game params are not found"},E={message:"Lagged Game params are not found"},P={message:"Huawei Game params are not found"},w={message:"GamePush Game params are not found"},A={message:"Message is too long"},O={message:"Discord Game params are not found"},k={message:"Xiaomi Game params are not found"};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:String(t)}function R(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function L(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,C(e,t,"set"),r),r}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function C(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var N=new WeakMap,G=new WeakMap,B=new WeakMap;const M=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,N,{writable:!0,value:void 0}),R(this,G,{writable:!0,value:void 0}),R(this,B,{writable:!0,value:void 0}),L(this,N,new Promise((function(e,r){L(t,G,e),L(t,B,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return j(this,N)}},{key:"resolve",value:function(e){j(this,G).call(this,e)}},{key:"reject",value:function(e){j(this,B).call(this,e)}}])&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var H=r(258),F=r.n(H);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function V(e,t,r){return t&&U(e.prototype,t),r&&U(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function W(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:String(t)}const z=V((function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=W(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t})),Z="1.26.1";function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:String(t)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e,t){re(e,t),t.add(e)}function te(e,t,r){re(e,t),t.set(e,r)}function re(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ne(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ae(e,t,"get"))}function oe(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ie(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ae(e,t,"set"),r),r}function ae(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var se=new WeakMap,ce=new WeakMap,ue=new WeakMap,le=new WeakMap,fe=new WeakSet,pe=new WeakSet,de=new WeakSet,he=new WeakSet;function ye(){if(0!==ne(this,se).length){var t=function(e){if(Array.isArray(e))return J(e)}(n=ne(this,se))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();ie(this,se,[]),ie(this,ce,null);var r="https://playgama.com/api/v1/events";this._platformBridge.platformId===e.DISCORD&&(r="/playgama/api/v1/events"),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t})}).then((function(e){if(!e.ok)throw new Error("Network response was not ok: ".concat(e.status))})).catch((function(e){console.error("Error sending analytics events:",e)}))}var n}function me(){var t,r=this._platformBridge.options;switch(this._platformBridge.platformId){case e.GAME_DISTRIBUTION:case e.Y8:t=r.gameId;break;case e.HUAWEI:t=r.appId;break;case e.MSN:t=r.gameId;break;case e.DISCORD:t=r.appId;break;case e.GAMEPUSH:t=r.projectId;break;default:t=null}return t||(t=oe(this,de,ve).call(this,window.location.href)),t}function ve(t){try{var r=new URL(t).pathname.split("/").filter(Boolean);switch(this._platformBridge.platformId){case e.YANDEX:var n=r.indexOf("app"),o=-1!==n?r[n+1]:null;if(o)return"Yandex ".concat(o);break;case e.LAGGED:var i=r.indexOf("g"),a=-1!==i?r[i+1]:null;if(a)return oe(this,he,_e).call(this,a);break;case e.CRAZY_GAMES:var s=r.indexOf("game"),c=-1!==s?r[s+1]:null;if(c)return oe(this,he,_e).call(this,c);break;case e.PLAYGAMA:var u=r.indexOf("game"),l=-1!==u?r[u+1]:null;if(l)return oe(this,he,_e).call(this,l);var f=r[0];if("string"==typeof f&&/^[a-z0-9]{10,}$/i.test(f))return"Playgama ".concat(f)}}catch(e){return null}return null}function _e(e){return"string"!=typeof e||0===e.length?"":e.replace(/-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}const ge=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(o){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ee(Q(e=i.call.apply(i,[this].concat(r))),he),ee(Q(e),de),ee(Q(e),pe),ee(Q(e),fe),te(Q(e),se,{writable:!0,value:[]}),te(Q(e),ce,{writable:!0,value:null}),te(Q(e),ue,{writable:!0,value:null}),te(Q(e),le,{writable:!0,value:(new Date).toISOString()}),e}return t=a,r=[{key:"initialize",value:function(e){this._platformBridge=e,ie(this,ue,oe(this,pe,me).call(this));var t={type:"initialization_started",bridge_version:Z,platform_id:this._platformBridge.platformId,game_id:ne(this,ue),timestamp:ne(this,le),data:{}};return ne(this,se).push(t),this}},{key:"send",value:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!1!==(null===(t=this._platformBridge.options)||void 0===t?void 0:t.sendAnalyticsEvents)){var o=window.location.href;if(!(o.startsWith("file://")||o.includes("localhost")||o.includes("127.0.0.1"))){var i={type:e,bridge_version:Z,platform_id:this._platformBridge.platformId,game_id:ne(this,ue),timestamp:(new Date).toISOString(),data:n};ne(this,se).push(i),ne(this,ce)&&clearTimeout(ne(this,ce)),ie(this,ce,setTimeout((function(){oe(r,fe,ye).call(r)}),3e3))}}}}],r&&K(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z));function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ee(n.key),n)}}function Ee(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:String(t)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Oe(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ke(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Te(e,t,"get"))}function Te(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var De=new WeakMap,Ie=new WeakMap,Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(o);if(i){var r=Ae(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return we(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Oe(we(t=a.call(this,e)),De,{writable:!0,value:!1}),Oe(we(t),Ie,{writable:!0,value:performance.now()}),t._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(e){return t.emit(n.AUDIO_STATE_CHANGED,e)})),t._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(e){return t.emit(n.PAUSE_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(e){var t,r,n={};if(e===f.GAME_READY){if(ke(this,De))return Promise.reject();r=!0,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,Te(t,De,"set"),r),n={time_s:((performance.now()-ke(this,Ie))/1e3).toFixed(2)};var o=document.getElementById("loading-overlay");o&&o.remove()}return ge.send(e,n),this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&be(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(z);F().mixin(Re.prototype);const Le=Re;function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ne(n.key),n)}}function Ne(e){var t=function(e,t){if("object"!=je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:String(t)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}const Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Be(n);if(o){var r=Be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&Ce(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=He(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==He(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=document.createElement("script");o.src=e;for(var i=0;i<Object.keys(t).length;i++){var a=Object.keys(t)[i],s=t[a];o.setAttribute(a,s)}o.addEventListener("load",r),o.addEventListener("error",(function(){return n(new Error("Failed to load: ".concat(e)))})),document.head.appendChild(o)}))},We=function(e){var t=e.adSenseId,r=e.channelId,n=e.hostId,o=e.interstitialPlacementId,i=e.rewardedPlacementId,a=e.adFrequencyHint,s=void 0===a?"180s":a,c=e.testMode,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(e){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",a.setAttribute("data-ad-client",t),r?a.setAttribute("data-ad-channel",r):n&&a.setAttribute("data-ad-host",n),o&&a.setAttribute("data-admob-interstitial-slot",o),i&&a.setAttribute("data-admob-rewarded-slot",i),u&&a.setAttribute("data-adbreak-test","on"),a.setAttribute("data-ad-frequency-hint",s),a.setAttribute("crossorigin","anonymous"),a.addEventListener("load",(function(){window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push(Ue({preloadAdBreaks:"on",sound:"on",onReady:function(){}},l)),e((function(e){return window.adsbygoogle.push(e)}))})),document.head.appendChild(a)}))};function ze(e){var t=document.createElement("div");return t.id=c,t.style.position="absolute",document.body.appendChild(t),"top"===e?(t.style.top="0px",t.style.height="90px",t.style.width="100%"):(t.style.bottom="0px",t.style.height="90px",t.style.width="100%"),t}var Ze=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},Ye=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},Je=function(e,t){return void 0===e[t]?null:e[t]};function Ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=Je(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){}return e}),new Array(e.length)):Je(t,e)}function qe(e,t){for(var r=Ue({},e),n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];i in e&&t[i]instanceof Object&&e[i]instanceof Object?r[i]=qe(e[i],t[i]):r[i]=t[i]}return r}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function rt(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:String(t)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tt(o);if(i){var r=tt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return et(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),rt(et(t=a.call(this,e)),"_currentLoadingProgress",null),rt(et(t),"_loadingProcessCompleted",!1),t._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t._platformBridge.options.disableLoadingLogo||function(e){var t=document.createElement("style");t.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(t);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===e?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fe(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),d=document.createElementNS(f.namespaceURI,"mask");d.setAttribute("id","logo-mask");var h=document.createElementNS(f.namespaceURI,"rect");h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill","black"),d.appendChild(h),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("fill","white"),d.appendChild(t)})),p.appendChild(d);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(e){var t=e.offset,r=e.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",t),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("stroke",n.strokeColor),t.setAttribute("stroke-width","3"),f.appendChild(t)})),r.appendChild(f)}(t._platformBridge.options.showFullLoadingLogo),t}return t=s,r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||t&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=e;var a=Math.max(0,Math.min(100,e)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],r&&Qe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(z);F().mixin(ot.prototype);const it=ot;function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function st(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ct(n.key),n)}}function ct(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==at(t)?t:String(t)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}const ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lt(n);if(o){var r=lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===at(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&st(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ht(n.key),n)}}function ht(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:String(t)}function yt(e,t){vt(e,t),t.add(e)}function mt(e,t,r){vt(e,t),t.set(e,r)}function vt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _t(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function gt(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,bt(e,t,"set"),r),r}function St(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,bt(e,t,"get"))}function bt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Et="started",Pt=new WeakMap,wt=new WeakMap,At=new WeakMap,Ot=new WeakMap,kt=new WeakSet,Tt=new WeakSet,Dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yt(this,Tt),yt(this,kt),mt(this,Pt,{writable:!0,value:0}),mt(this,wt,{writable:!0,value:0}),mt(this,At,{writable:!0,value:"created"}),mt(this,Ot,{writable:!0,value:0}),gt(this,Pt,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return St(this,At)}},{key:"start",value:function(){var e=this;St(this,At)!==Et&&(gt(this,wt,St(this,Pt)),_t(this,kt,It).call(this,Et),gt(this,Ot,setInterval((function(){gt(e,wt,St(e,wt)-1),e.emit("time_left_changed",St(e,wt)),St(e,wt)<=0&&(_t(e,Tt,Rt).call(e),_t(e,kt,It).call(e,"completed"))}),1e3)))}},{key:"stop",value:function(){_t(this,Tt,Rt).call(this),St(this,At)===Et&&_t(this,kt,It).call(this,"stopped")}}])&&dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){gt(this,At,e),this.emit("state_changed",St(this,At))}function Rt(){clearInterval(St(this,Ot)),gt(this,wt,0)}F().mixin(Dt.prototype);const Lt=Dt;function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nt(n.key),n)}}function Nt(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jt(t)?t:String(t)}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Ht(e,t){xt(e,t),t.add(e)}function Ft(e,t,r){xt(e,t),t.set(e,r)}function xt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ut(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,zt(e,t,"set"),r),r}function Vt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Wt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,zt(e,t,"get"))}function zt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Zt=new WeakMap,Yt=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,er=new WeakMap,tr=new WeakSet,rr=new WeakSet,nr=new WeakSet,or=new WeakSet,ir=new WeakSet,ar=new WeakSet,sr=new WeakSet,cr=new WeakSet,ur=new WeakSet,lr=new WeakSet,fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(l,e);var t,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mt(o);if(c){var r=Mt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bt(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ht(Bt(t=u.call(this,e)),lr),Ht(Bt(t),ur),Ht(Bt(t),cr),Ht(Bt(t),sr),Ht(Bt(t),ar),Ht(Bt(t),ir),Ht(Bt(t),or),Ht(Bt(t),nr),Ht(Bt(t),rr),Ht(Bt(t),tr),Ft(Bt(t),Zt,{writable:!0,value:s.HIDDEN}),Ft(Bt(t),Yt,{writable:!0,value:null}),Ft(Bt(t),Jt,{writable:!0,value:null}),Ft(Bt(t),Kt,{writable:!0,value:i.CLOSED}),Ft(Bt(t),qt,{writable:!0,value:null}),Ft(Bt(t),Xt,{writable:!0,value:void 0}),Ft(Bt(t),Qt,{writable:!0,value:60}),Ft(Bt(t),$t,{writable:!0,value:a.CLOSED}),Ft(Bt(t),er,{writable:!0,value:null}),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return Vt(Bt(t),sr,_r).call(Bt(t),e)})),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&Vt(Bt(t),ir,mr).call(Bt(t)),Vt(Bt(t),cr,gr).call(Bt(t),e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return Vt(Bt(t),ur,Sr).call(Bt(t),e)})),Vt(Bt(t),nr,hr).call(Bt(t)),t}return t=l,r=[{key:"isBannerSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return Wt(this,Zt)}},{key:"isInterstitialSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return Wt(this,Kt)}},{key:"isRewardedSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return Wt(this,er)}},{key:"rewardedState",get:function(){return Wt(this,$t)}},{key:"minimumDelayBetweenInterstitial",get:function(){return Wt(this,Qt)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(null===Vt(this,rr,dr).call(this,Vt(this,or,yr).call(this))){var t=Vt(this,rr,dr).call(this,e);null!==t&&Vt(this,tr,pr).call(this,t)}}},{key:"showBanner",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN){Ut(this,Yt,t);var n,o=r;if(o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback),Ut(this,Jt,o),Vt(this,sr,_r).call(this,s.LOADING),this.isBannerSupported){var i=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.placements,a=Vt(this,lr,br).call(this,o,i);this._platformBridge.showBanner(t,a)}else Vt(this,sr,_r).call(this,s.FAILED)}}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,i=Vt(this,lr,br).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Vt(this,ar,vr).call(this)){var r,n=t;if(n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback),Ut(this,qt,n),Vt(this,cr,gr).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&Wt(this,Xt)&&Wt(this,Xt).state===Et)Vt(this,cr,gr).call(this,i.FAILED);else{var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,a=Vt(this,lr,br).call(this,n,o);this._platformBridge.showInterstitial(a)}else Vt(this,cr,gr).call(this,i.FAILED)}}},{key:"preloadRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,i=Vt(this,lr,br).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Vt(this,ar,vr).call(this)){var r;Ut(this,er,t),Wt(this,er)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&Ut(this,er,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=Vt(this,lr,br).call(this,Wt(this,er),n);Vt(this,ur,Sr).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):Vt(this,ur,Sr).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Ct(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(z);function pr(e){Ut(this,Qt,e),Wt(this,Xt)&&(Wt(this,Xt).stop(),Vt(this,ir,mr).call(this))}function dr(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}return null}function hr(){var e=Vt(this,or,yr).call(this);if(void 0!==e){var t=Vt(this,rr,dr).call(this,e);null!==t&&Vt(this,tr,pr).call(this,t)}}function yr(){var e;return null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.minimumDelayBetweenInterstitial}function mr(){Wt(this,Qt)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(Ut(this,Xt,new Lt(Wt(this,Qt))),Wt(this,Xt).start())}function vr(){var e=[i.LOADING,i.OPENED].includes(Wt(this,Kt)),t=[a.LOADING,a.OPENED,a.REWARDED].includes(Wt(this,$t));return e||t}function _r(e){Wt(this,Zt)!==e&&(Ut(this,Zt,e),ge.send("banner_".concat(e),{position:Wt(this,Yt),placement:Wt(this,Jt)}),this.emit(n.BANNER_STATE_CHANGED,Wt(this,Zt)))}function gr(e){Wt(this,Kt)!==e&&(Ut(this,Kt,e),ge.send("interstitial_".concat(e),{placement:Wt(this,qt)}),this.emit(n.INTERSTITIAL_STATE_CHANGED,Wt(this,Kt)))}function Sr(e){Wt(this,$t)!==e&&(Ut(this,$t,e),ge.send("rewarded_".concat(e),{placement:Wt(this,er)}),this.emit(n.REWARDED_STATE_CHANGED,Wt(this,$t)))}function br(e,t){if(!e)return e;if(!t)return e;var r=t.find((function(t){return t.id===e}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:e}F().mixin(fr.prototype);const Er=fr;function Pr(e){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(e)}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ar(n.key),n)}}function Ar(e){var t=function(e,t){if("object"!=Pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pr(t)?t:String(t)}function Or(e,t){return Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Or(e,t)}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}const Tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Or(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kr(n);if(o){var r=kr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&wr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function Ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rr(n.key),n)}}function Rr(e){var t=function(e,t){if("object"!=Dr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dr(t)?t:String(t)}function Lr(e,t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lr(e,t)}function jr(e){return jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jr(e)}const Cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jr(n);if(o){var r=jr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&Ir(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Br(n.key),n)}}function Br(e){var t=function(e,t){if("object"!=Nr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nr(t)?t:String(t)}function Mr(e,t){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mr(e,t)}function Hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fr(e){return Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fr(e)}function xr(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ur(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Vr=new WeakSet,Wr=new WeakSet;function zr(e){var t;if(!e)return e;var r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return e;var n=r.find((function(t){return t.id===e}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:e}function Zr(e){var t,r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return!1;var n=r.find((function(t){return t.id===e}));return!!n&&!0===n.isMain}const Yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fr(n);if(o){var r=Fr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hr(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xr(Hr(e=i.call.apply(i,[this].concat(r))),Wr),xr(Hr(e),Vr),e}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(e,t){var r=Ur(this,Vr,zr).call(this,e),n=Ur(this,Wr,Zr).call(this,e);return this._platformBridge.leaderboardsSetScore(r,t,n)}},{key:"getEntries",value:function(e){var t=Ur(this,Vr,zr).call(this,e);return this._platformBridge.leaderboardsGetEntries(t)}},{key:"showNativePopup",value:function(e){var t=Ur(this,Vr,zr).call(this,e);return this._platformBridge.leaderboardsShowNativePopup(t)}}])&&Gr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qr(n.key),n)}}function qr(e){var t=function(e,t){if("object"!=Jr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jr(t)?t:String(t)}function Xr(e,t){return Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xr(e,t)}function Qr(e){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qr(e)}const $r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qr(n);if(o){var r=Qr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e,t){return ge.send("purchase_started",{id:e}),this._platformBridge.paymentsPurchase(e,t).then((function(t){return ge.send("purchase_completed",{id:e}),t})).catch((function(t){throw ge.send("purchase_failed",{id:e}),t}))}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}},{key:"consumePurchase",value:function(e){return this._platformBridge.paymentsConsumePurchase(e)}}])&&Kr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rn(n.key),n)}}function rn(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==en(t)?t:String(t)}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}const an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=on(n);if(o){var r=on(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&tn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,un(n.key),n)}}function un(e){var t=function(e,t){if("object"!=sn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sn(t)?t:String(t)}function ln(e,t){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ln(e,t)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}const pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fn(n);if(o){var r=fn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&cn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function hn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yn(n.key),n)}}function yn(e){var t=function(e,t){if("object"!=dn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dn(t)?t:String(t)}function mn(e,t){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mn(e,t)}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}const _n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vn(n);if(o){var r=vn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&hn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(z);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function Sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bn(n.key),n)}}function bn(e){var t=function(e,t){if("object"!=gn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gn(t)?t:String(t)}function En(e,t,r){Pn(e,t),t.set(e,r)}function Pn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function An(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,kn(e,t,"get"))}function On(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,kn(e,t,"set"),r),r}function kn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Tn=new WeakMap,Dn=new WeakMap,In=new WeakMap,Rn=new WeakSet;function Ln(){var e=Object.values(An(this,Tn)).some((function(e){return!0===e}));An(this,Dn)!==e&&(On(this,Dn,e),An(this,In).call(this,An(this,Dn)))}const jn=function(){function e(t,r){var n,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pn(this,n=Rn),n.add(this),En(this,Tn,{writable:!0,value:{}}),En(this,Dn,{writable:!0,value:!1}),En(this,In,{writable:!0,value:null}),On(this,In,r),t.forEach((function(e){An(o,Tn)[e]=!1}))}var t,r;return t=e,(r=[{key:"setState",value:function(e,t){e in An(this,Tn)&&"boolean"==typeof t&&An(this,Tn)[e]!==t&&(An(this,Tn)[e]=t,wn(this,Rn,Ln).call(this))}},{key:"getState",value:function(e){return e in An(this,Tn)&&An(this,Tn)[e]}},{key:"getAggregatedState",value:function(){return An(this,Dn)}},{key:"resetAll",value:function(){var e=this;Object.keys(An(this,Tn)).forEach((function(t){An(e,Tn)[t]=!1})),wn(this,Rn,Ln).call(this)}}])&&Sn(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hn(n.key),n)}}function Mn(e,t,r){return(t=Hn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hn(e){var t=function(e,t){if("object"!=Cn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cn(t)?t:String(t)}function Fn(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var xn=new WeakMap,Un=function(){function t(e){var r,i,a,s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mn(this,"_isInitialized",!1),Mn(this,"_platformSdk",null),Mn(this,"_isPlayerAuthorized",!1),Mn(this,"_playerId",null),Mn(this,"_playerName",null),Mn(this,"_playerPhotos",[]),Mn(this,"_playerExtra",{}),Mn(this,"_visibilityState",null),Mn(this,"_localStorage",null),Mn(this,"_defaultStorageType",u.LOCAL_STORAGE),Mn(this,"_platformStorageCachedData",null),Mn(this,"_isBannerSupported",!1),Mn(this,"_paymentsPurchases",[]),Mn(this,"_pauseStateAggregator",null),Mn(this,"_audioStateAggregator",null),a={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=xn),i.set(r,a);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState;var c=["interstitial","rewarded","visibility","platform"];this._pauseStateAggregator=new jn(c,(function(e){return s.emit(n.PAUSE_STATE_CHANGED,e)})),this._audioStateAggregator=new jn(c,(function(e){return s.emit(n.AUDIO_STATE_CHANGED,!e)})),document.addEventListener("visibilitychange",(function(){s._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){s._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){s._setVisibilityState(o.VISIBLE)})),e&&(this._options=Gn({},e))}var r,c;return r=t,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!this._audioStateAggregator||!this._audioStateAggregator.getAggregatedState()}},{key:"isPlatformPaused",get:function(){return!!this._pauseStateAggregator&&this._pauseStateAggregator.getAggregatedState()}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return p}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://playgama.com/api/v1/timestamp/now").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.timestamp)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(v)}return Promise.reject(v)}},{key:"setDataToStorage",value:function(e,t,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){if(this.isPaymentsSupported){var t={id:e};return this._paymentsPurchases.push(t),Promise.resolve(t)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(e){if(this.isPaymentsSupported){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));return t<0?Promise.reject():(this._paymentsPurchases.splice(t,1),Promise.resolve({id:e}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===Cn(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){if(this._visibilityState!==e){this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState);var t=e===o.HIDDEN;this._pauseStateAggregator&&this._pauseStateAggregator.setState("visibility",t),this._audioStateAggregator&&this._audioStateAggregator.setState("visibility",t)}}},{key:"_setBannerState",value:function(e){this.emit(n.BANNER_STATE_CHANGED,e)}},{key:"_setInterstitialState",value:function(e){this.emit(n.INTERSTITIAL_STATE_CHANGED,e);var t=e===i.OPENED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("interstitial",t),this._audioStateAggregator&&this._audioStateAggregator.setState("interstitial",t)}},{key:"_setRewardedState",value:function(e){this.emit(n.REWARDED_STATE_CHANGED,e);var t=e===a.OPENED||e===a.REWARDED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("rewarded",t),this._audioStateAggregator&&this._audioStateAggregator.setState("rewarded",t)}},{key:"_setAudioState",value:function(e){this._audioStateAggregator?this._audioStateAggregator.setState("platform",!e):this.emit(n.AUDIO_STATE_CHANGED,e)}},{key:"_setPauseState",value:function(e){this._pauseStateAggregator?this._pauseStateAggregator.setState("platform",e):this.emit(n.PAUSE_STATE_CHANGED,e)}},{key:"_createPromiseDecorator",value:function(e){var t=new M;return Fn(this,xn)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return Fn(this,xn)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){Fn(this,xn)[e]&&(Fn(this,xn)[e].resolve(t),delete Fn(this,xn)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){Fn(this,xn)[e]&&(Fn(this,xn)[e].reject(t),delete Fn(this,xn)[e])}},{key:"_paymentsGetProductsPlatformData",value:function(){var e=this;return this._options.payments?this._options.payments.map((function(t){var r=Gn({},t[e.platformId]);return r.platformProductId=r.id,r.id=t.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));if(!r)return null;var n=Gn({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(e){var t,r=this;return(null===(t=this._options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.useBuiltInErrorPopup)?function(e){if(!document.getElementById("bridge-info-popup-styles")){var t=document.createElement("style");t.id="bridge-info-popup-styles",t.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(t)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(e){o.onclick=function(){n.style.display="none",r.style.display="none",e()},r.style.display="block",n.style.display="flex"}))}().then((function(){e?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(e?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var e=function(){var e,t="bridge_player_guest_id";try{e=localStorage.getItem(t)}catch(e){}if(!e){var r=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),n=Date.now().toString(36);e="".concat(r).concat(n);try{localStorage.setItem(t,e)}catch(e){}}return{id:e,name:"Guest ".concat(e)}}();this._playerId=e.id,this._playerName=e.name}}])&&Bn(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),t}();F().mixin(Un.prototype);const Vn=Un;function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xn(n.key),n)}}function Zn(){return Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Zn.apply(this,arguments)}function Yn(e,t){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yn(e,t)}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e){return Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kn(e)}function qn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xn(e){var t=function(e,t){if("object"!=Wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wn(t)?t:String(t)}function Qn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function $n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,eo(e,t,"get"))}function eo(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var to=new WeakMap,ro=new WeakSet;function no(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const oo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yn(e,t)}(p,t);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kn(o);if(c){var r=Kn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jn(e)}(this,e)});function p(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return qn(t=Jn(e=f.call.apply(f,[this].concat(o))),r=ro),r.add(t),function(e,t,r){(t=Xn(t))in e?Object.defineProperty(e,t,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[t]=true}(Jn(e),"_isBannerSupported"),function(e,t,r){qn(e,t),t.set(e,{writable:!0,value:void 0})}(Jn(e),to),e}return r=p,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Zn(Kn(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):Zn(Kn(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch($n(this,to)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return Zn(Kn(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===$n(this,to)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(y.INITIALIZE);if(!o){o=this._createPromiseDecorator(y.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=to,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,eo(t,r,"set"),n)),Ve("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Ze("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Zn(Kn(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Zn(Kn(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):Zn(Kn(p.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Zn(Kn(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return Zn(Kn(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:e}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return Qn(this,ro,no).call(this,y.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():Qn(this,ro,no).call(this,y.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),Qn(this,ro,no).call(this,y.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?Qn(this,ro,no).call(this,y.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return Qn(this,ro,no).call(this,y.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(e){return Qn(this,ro,no).call(this,y.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&zn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Vn);function io(e){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(e)}function ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=uo(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uo(n.key),n)}}function uo(e){var t=function(e,t){if("object"!=io(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==io(t)?t:String(t)}function lo(){return lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ho(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},lo.apply(this,arguments)}function fo(e,t){return fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fo(e,t)}function po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ho(e)}function yo(e,t,r){mo(e,t),t.set(e,r)}function mo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _o(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,So(e,t,"set"),r),r}function go(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,So(e,t,"get"))}function So(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var bo=new WeakMap,Eo=new WeakMap,Po=new WeakMap,wo=new WeakMap,Ao=new WeakSet;function Oo(){var e=this;return new Promise((function(t){var r=!1;e._options&&e._options.useSignedData&&(r=e._options.useSignedData),e._platformSdk.getPlayer({signed:r}).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized=t.isAuthorized(),e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var n=t.getName();""!==n&&(e._playerName=n),e._playerPhotos=[];var o=t.getPhoto("small"),i=t.getPhoto("medium"),a=t.getPhoto("large");return o&&e._playerPhotos.push(o),i&&e._playerPhotos.push(i),a&&e._playerPhotos.push(a),e._playerExtra={payingStatus:t.getPayingStatus()},r&&(e._playerExtra.signature=t.signature),_o(e,Eo,t),t.getData()})).then((function(t){e._platformStorageCachedData=t})).finally((function(){t()}))}))}const ko=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fo(e,t)}(h,t);var r,n,o,c,p=(o=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ho(o);if(c){var r=ho(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===io(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return po(e)}(this,e)});function h(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return mo(t=po(e=p.call.apply(p,[this].concat(o))),r=Ao),r.add(t),yo(po(e),bo,{writable:!0,value:!1}),yo(po(e),Eo,{writable:!0,value:null}),yo(po(e),Po,{writable:!0,value:null}),yo(po(e),wo,{writable:!0,value:null}),e}return r=h,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():lo(ho(h.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():lo(ho(h.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return lo(ho(h.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return go(this,bo)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("/sdk.js").then((function(){Ze("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t,_o(e,wo,vo(e,Ao,Oo).call(e));var n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.26.1"}),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){_o(e,bo,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),c=e._platformSdk.getPayments().then((function(t){_o(e,Po,t)}));e._isBannerSupported=!0;var u=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case f.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case f.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return lo(ho(h.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(so(so({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var e=this,t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(_o(this,wo,vo(this,Ao,Oo).call(this)),go(this,wo).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){_o(e,wo,vo(e,Ao,Oo).call(e)),go(e,wo).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||lo(ho(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:lo(ho(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?go(this,wo).then((function(){return new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}))})):Promise.reject():lo(ho(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?go(this,wo).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?so({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;go(n,Eo).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}))})):Promise.reject():lo(ho(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?go(this,wo).then((function(){return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?so({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];go(r,Eo).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}))})):Promise.reject():lo(ho(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(y.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(y.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(y.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(y.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(y.RATE);return t||(t=this._createPromiseDecorator(y.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(y.RATE):e._rejectPromiseDecorator(y.RATE)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)})):e._rejectPromiseDecorator(y.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(y.RATE,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(e,t).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(e,n).then((function(e){var r;r=e&&e.entries.length>0?e.entries.map((function(e){return{id:e.player.uniqueID,name:e.player.publicName,score:e.score,rank:e.rank,photo:e.player.getAvatarSrc("large")}})):[],t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!go(this,Po))return Promise.reject();var r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),go(this,Po).purchase(r).then((function(r){var n=so({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!go(this,Po))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),go(this,Po).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!go(this,Po))return Promise.reject();var t=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),go(this,Po).getCatalog().then((function(r){var n=t.map((function(e){var t,n=r.find((function(t){return t.id===e.id}));return{id:e.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(t=n.getPriceCurrencyImage)||void 0===t?void 0:t.call(n,"medium")}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!go(this,Po))return Promise.reject();var t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),go(this,Po).getPurchases().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=so({id:r.find((function(t){return t.id===e.productID})).id},e.purchaseData);return delete t.productID,t})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(y.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(y.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(y.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(y.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(y.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(y.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(y.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(y.CLIPBOARD_WRITE,e)}))),r.promise}}])&&co(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(Vn);function To(e){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(e)}function Do(){Do=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==To(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(To(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Io(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ro(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Io(i,n,o,a,s,"next",e)}function s(e){Io(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=No(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,No(n.key),n)}}function No(e){var t=function(e,t){if("object"!=To(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=To(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==To(t)?t:String(t)}function Go(){return Go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ho(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Go.apply(this,arguments)}function Bo(e,t){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bo(e,t)}function Mo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ho(e)}function Fo(e,t){Uo(e,t),t.add(e)}function xo(e,t,r){Uo(e,t),t.set(e,r)}function Uo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vo(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Wo(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Zo(e,t,"set"),r),r}function zo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Zo(e,t,"get"))}function Zo(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Yo="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",Jo="https://store.xsolla.com/api/v2/project/",Ko=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Qo=new WeakSet,$o=new WeakSet,ei=new WeakSet,ti=new WeakSet;function ri(){var e=this;return zo(this,qo)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){if(!n)return e._playerApplyGuestData(),void r();e._isPlayerAuthorized=!0,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),e._playerExtra=n,e._options.useUserToken?e._platformSdk.user.getUserToken().then((function(t){e._playerExtra.jwt=t})).finally((function(){t()})):t()})).catch((function(t){e._playerApplyGuestData(),r(t)}))})):(this._playerApplyGuestData(),Promise.reject())}function ni(){return oi.apply(this,arguments)}function oi(){return(oi=Ro(Do().mark((function e(){return Do().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.XPayStationWidget){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ve(Yo);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(){return ai.apply(this,arguments)}function ai(){return(ai=Ro(Do().mark((function e(){var t;return Do().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._platformSdk.user.getXsollaUserToken();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function si(e,t,r){return ci.apply(this,arguments)}function ci(){return(ci=Ro(Do().mark((function e(t,r,n){var o;return Do().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Jo,"/").concat(t,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const ui=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bo(e,t)}(h,t);var r,n,o,p,d=(o=h,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ho(o);if(p){var r=Ho(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===To(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mo(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Fo(Mo(e=d.call.apply(d,[this].concat(r))),ti),Fo(Mo(e),ei),Fo(Mo(e),$o),Fo(Mo(e),Qo),xo(Mo(e),Ko,{writable:!0,value:!1}),xo(Mo(e),qo,{writable:!0,value:!1}),xo(Mo(e),Xo,{writable:!0,value:{adStarted:function(){zo(Mo(e),Ko)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){zo(Mo(e),Ko)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){zo(Mo(e),Ko)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=h,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return zo(this,qo)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Go(Ho(h.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return zo(this,qo)}},{key:"isPaymentsSupported",get:function(){return!0===zo(this,qo)}},{key:"deviceType",get:function(){if(zo(this,qo)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(e))return e}return Go(Ho(h.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Ze("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=u.PLATFORM_INTERNAL,e._isBannerSupported=!0,e._platformSdk.init().then((function(){Wo(e,qo,e._platformSdk.user.isUserAccountAvailable);var t=Vo(e,Qo,ri).call(e);e.options.xsollaProjectId&&Vo(e,$o,ni).call(e),Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!zo(this,qo))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Vo(e,Qo,ri).call(e).then((function(){e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case f.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case f.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Go(Ho(h.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Go(Ho(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Go(Ho(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):Go(Ho(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):Go(Ho(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):Go(Ho(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(c);r||(r=ze(e)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(c);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){Wo(this,Ko,!1),this._platformSdk.ad.requestAd("midgame",zo(this,Xo))}},{key:"showRewarded",value:function(){Wo(this,Ko,!0),this._platformSdk.ad.requestAd("rewarded",zo(this,Xo))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),Vo(this,$o,ni).call(this).then((function(){return Vo(t,ei,ii).call(t)})).then((function(e){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:e,sandbox:t.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var c=s.order_id||s.invoice;if(!c)return;Vo(t,ti,si).call(t,t.options.xsollaProjectId,c,e).then((function(e){t._platformSdk.analytics.trackOrder("xsolla",e);var o=jo({id:r.id,sku:n,orderId:c},e);t._paymentsPurchases.push(o),i||(i=!0,t._resolvePromiseDecorator(y.PURCHASE,o))})).catch((function(e){i||t._rejectPromiseDecorator(y.PURCHASE,e)}))}}catch(e){i||t._rejectPromiseDecorator(y.PURCHASE,e)}})),o.on("close",(function(){i||t._rejectPromiseDecorator(y.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),Vo(this,ei,ii).call(this).then((function(t){return fetch("".concat(Jo,"/").concat(e.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla catalog HTTP ".concat(e.status));return e.json()})).then((function(r){var n=new Map((r.items||[]).map((function(e){return[e.sku,e]}))),o=t.map((function(e){var t,r,o,i,a,s,c,u,l,f,p=e.platformProductId||e.id,d=n.get(p);return{id:e.id,name:null!==(t=null!==(r=null==d?void 0:d.name)&&void 0!==r?r:e.name)&&void 0!==t?t:e.id,description:null!==(o=null!==(i=null==d?void 0:d.description)&&void 0!==i?i:e.description)&&void 0!==o?o:"",price:null!==(a=null==d||null===(s=d.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==d||null===(u=d.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==d||null===(f=d.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));e._resolvePromiseDecorator(y.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(y.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(y.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})}catch(e){this._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),Vo(this,ei,ii).call(this).then((function(t){return fetch("".concat(Jo,"/").concat(e.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla inventory HTTP ".concat(e.status));return e.json()})).then((function(t){var r=e._paymentsGetProductsPlatformData()||[];e._paymentsPurchases=(t.items||[]).map((function(e){var t=r.find((function(t){return t.id===e.sku}));return t?jo({id:t.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}}])&&Co(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(Vn);function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=hi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hi(n.key),n)}}function hi(e){var t=function(e,t){if("object"!=li(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==li(t)?t:String(t)}function yi(){return yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_i(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},yi.apply(this,arguments)}function mi(e,t){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mi(e,t)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}var gi=new WeakSet;function Si(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const bi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_i(o);if(s){var r=_i(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vi(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=vi(e=c.call.apply(c,[this].concat(o))),r=gi),r.add(t),e}return r=l,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,gi,Si).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,e._resolvePromiseDecorator(y.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(y.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||yi(_i(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:yi(_i(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var c=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(c)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):yi(_i(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?pi({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):yi(_i(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?pi({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):yi(_i(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&di(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function Pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wi(n.key),n)}}function wi(e){var t=function(e,t){if("object"!=Ei(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ei(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ei(t)?t:String(t)}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ai(e,t)}function Oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(e){return ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ki(e)}function Ti(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ii(e,t,"set"),r),r}function Di(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ii(e,t,"get"))}function Ii(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ri=new WeakMap;const Li=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(p,t);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ki(o);if(l){var r=ki(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oi(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=Oi(e=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Ri),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(y.INITIALIZE);break;case"SDK_GAME_START":Di(t,Ri)?(t._setRewardedState(a.CLOSED),t._platformSdk.preloadAd("rewarded")):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Di(t,Ri)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,Ve("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(y.INITIALIZE,g);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(c);r||(r=ze(e)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(c);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;Ti(this,Ri,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var e=this;Ti(this,Ri,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&Pi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Vn);function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vi(n.key),n)}}function Ni(){return Ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ni.apply(this,arguments)}function Gi(e,t){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gi(e,t)}function Bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e){return Mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mi(e)}function Hi(e,t){xi(e,t),t.add(e)}function Fi(e,t,r){xi(e,t),t.set(e,r)}function xi(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ui(e,t,r){return(t=Vi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e){var t=function(e,t){if("object"!=ji(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ji(t)?t:String(t)}function Wi(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function zi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Zi(e,t,"get"))}function Zi(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Yi="AUTHORIZED",Ji={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Ki=new WeakMap,qi=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,$i=new WeakSet,ea=new WeakSet,ta=new WeakSet,ra=new WeakSet,na=new WeakSet,oa=new WeakSet,ia=new WeakSet,aa=new WeakSet,sa=new WeakSet,ca=new WeakSet,ua=new WeakSet,la=new WeakSet,fa=new WeakSet,pa=new WeakSet,da=new WeakSet,ha=new WeakSet;function ya(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function ma(){var e=this;return{userProfileCallback:function(t,r,n){return Wi(e,$i,_a).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return Wi(e,ta,Sa).call(e,r,n)}}}function va(){var e=this;return{showPermissions:function(){return Wi(e,ra,ba).call(e)},loadAd:function(t){return Wi(e,na,Ea).call(e,t)},showLoadedAd:function(t,r){return Wi(e,oa,Pa).call(e,r)},showAd:function(t,r){return Wi(e,ia,wa).call(e,r)},requestBannerAds:function(t,r){return Wi(e,aa,Aa).call(e,t,r)},showBannerAds:function(t,r){return Wi(e,ca,ka).call(e,r)},hideBannerAds:function(t,r){return Wi(e,sa,Oa).call(e,r)},setBannerFormat:function(t){return Wi(e,ua,Ta).call(e,t)},showInvite:function(t){return Wi(e,la,Da).call(e,t)},showRatingDialog:function(t,r){return Wi(e,fa,Ia).call(e,t,r)},joinGroup:function(t,r){return Wi(e,pa,Ra).call(e,t,r)},showLoginSuggestion:function(t,r){return Wi(e,ea,ga).call(e,t,r)},postMediatopic:function(t,r){return Wi(e,da,La).call(e,t,r)},isAdBlockEnabled:function(t,r){return Wi(e,ha,ja).call(e,t,r)}}}function _a(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(zi(this,qi).hasAppPermission(Ji.VALUABLE_ACCESS),zi(this,Xi).hasValueAccessCallback)}function ga(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}function Sa(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(y.INITIALIZE);else{var t=Object.values(Ji).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function ba(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(zi(this,qi).hasAppPermission(Ji.VALUABLE_ACCESS),zi(this,Xi).hasValueAccessCallback)}function Ea(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Pa(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function wa(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Aa(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",zi(this,Ki));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Oa(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function ka(e){e||this._setBannerState(s.FAILED)}function Ta(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Da(e){"error"===e?this._rejectPromiseDecorator(y.INVITE_FRIENDS):this._resolvePromiseDecorator(y.INVITE_FRIENDS)}function Ia(e,t){"error"===e?this._rejectPromiseDecorator(y.RATE,t):this._resolvePromiseDecorator(y.RATE)}function Ra(e,t){"error"===e?this._rejectPromiseDecorator(y.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(y.JOIN_COMMUNITY)}function La(e,t){"error"===e?this._rejectPromiseDecorator(y.CREATE_POST,t):this._resolvePromiseDecorator(y.CREATE_POST)}function ja(e,t){"ok"===e?this._resolvePromiseDecorator(y.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(y.ADBLOCK_DETECT)}const Ca=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gi(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mi(o);if(s){var r=Mi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ji(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hi(Bi(e=c.call.apply(c,[this].concat(r))),ha),Hi(Bi(e),da),Hi(Bi(e),pa),Hi(Bi(e),fa),Hi(Bi(e),la),Hi(Bi(e),ua),Hi(Bi(e),ca),Hi(Bi(e),sa),Hi(Bi(e),aa),Hi(Bi(e),ia),Hi(Bi(e),oa),Hi(Bi(e),na),Hi(Bi(e),ra),Hi(Bi(e),ta),Hi(Bi(e),ea),Hi(Bi(e),$i),Fi(Bi(e),Qi,{get:va,set:void 0}),Fi(Bi(e),Xi,{get:ma,set:void 0}),Fi(Bi(e),qi,{get:ya,set:void 0}),Ui(Bi(e),"_hasValuableAccessPermission",!1),Ui(Bi(e),"_hasValuableAccessPermissionShowed",!1),Ui(Bi(e),"_platformBannerOptions",{}),Fi(Bi(e),Ki,{writable:!0,value:null}),e}return r=l,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("//api.ok.ru/js/fapi5.js").then((function(){Ze("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return zi(e,Qi)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===Yi,e._isPlayerAuthorized?e._platformSdk.Client.call(zi(e,qi).userProfile,zi(e,Xi).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE))}),(function(){e._rejectPromiseDecorator(y.INITIALIZE)})):e._rejectPromiseDecorator(y.INITIALIZE,b)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(Yi)),e.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Ni(Mi(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Ni(Mi(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(e)){var u=[];return i.forEach((function(e){if(""!==c[e]&&void 0!==c[e]){var t=c[e];if(r)try{t=JSON.parse(c[e])}catch(e){}u.push(t)}else u.push(null)})),void t(u)}if(""===c[e]||void 0===c[e])return void t(null);var l=c[e];if(r)try{l=JSON.parse(c[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(_):Ni(Mi(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[c],t=i[c];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return Ni(Mi(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(_);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Ni(Mi(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,Zi(t,Ki,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(y.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(y.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(y.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(y.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(y.INVITE_FRIENDS,A):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(y.RATE);return e||(e=this._createPromiseDecorator(y.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(y.CREATE_POST);return r||(r=this._createPromiseDecorator(y.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(y.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(y.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&Ci(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Na(e){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(e)}function Ga(){Ga=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Na(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Na(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ba(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ma(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=xa(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ma(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xa(n.key),n)}}function xa(e){var t=function(e,t){if("object"!=Na(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Na(t)?t:String(t)}function Ua(){return Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=za(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ua.apply(this,arguments)}function Va(e,t){return Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Va(e,t)}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function za(e){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},za(e)}function Za(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ya(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ja=new WeakSet,Ka=new WeakSet;function qa(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return t.isAuthorized?(e._isPlayerAuthorized=!0,e._playerId=t.id,e._playerName=t.name,e._playerPhotos=t.photos,e._playerExtra=t,e._defaultStorageType=u.PLATFORM_INTERNAL,Ya(e,Ka,Xa).call(e,[])):(e._playerApplyGuestData(),Promise.resolve())})).catch((function(){e._playerApplyGuestData()})).finally((function(){t()}))}))}function Xa(e){return Qa.apply(this,arguments)}function Qa(){var e;return e=Ga().mark((function e(t){var r,n=arguments;return Ga().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",Ke(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),Qa=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ba(i,n,o,a,s,"next",e)}function s(e){Ba(i,n,o,a,s,"throw",e)}a(void 0)}))},Qa.apply(this,arguments)}const $a=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Va(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=za(o);if(s){var r=za(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wa(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Za(Wa(e=c.call.apply(c,[this].concat(r))),Ka),Za(Wa(e),Ja),e}return r=l,(n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||Ua(za(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://developer.playgama.com/sdk/v1.js").then((function(){Ze("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,e._platformSdk.advService.subscribeToAdStateChanges((function(t,r){if("interstitial"===t)switch(r){case"open":e._setInterstitialState(i.OPENED);break;case"empty":case"error":e._setInterstitialState(i.FAILED);break;case"close":e._setInterstitialState(i.CLOSED)}else if("rewarded"===t)switch(r){case"open":e._setRewardedState(a.OPENED);break;case"empty":case"error":e._setRewardedState(a.FAILED);break;case"rewarded":e._setRewardedState(a.REWARDED);break;case"close":e._setRewardedState(a.CLOSED)}})),Ya(e,Ja,qa).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.gameService.gameReady(),Promise.resolve()):Ua(za(l.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Ua(za(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ua(za(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Ya(this,Ka,Xa).call(this,e,r):Promise.reject():Ua(za(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Ha({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),Ua(za(l.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(v)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case u.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Ha({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),Ua(za(l.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(v)}}},{key:"showInterstitial",value:function(){this._platformSdk.advService.showInterstitial()}},{key:"showRewarded",value:function(){this._platformSdk.advService.showRewarded()}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Ya(this,Ja,qa).call(this,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){Ya(t,Ja,qa).call(t,e).then((function(){t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(t){if("PAID"===t.status){var n=Ha({id:e},t);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(y.PURCHASE,n)}else r._rejectPromiseDecorator(y.PURCHASE,t.error)})).catch((function(e){r._rejectPromiseDecorator(y.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));return Promise.resolve(t)}}])&&Fa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cs(n.key),n)}}function ns(){return ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=as(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ns.apply(this,arguments)}function os(e,t){return os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},os(e,t)}function is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function as(e){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},as(e)}function ss(e,t,r){return(t=cs(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cs(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==es(t)?t:String(t)}function us(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ls(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ps(e,t,"set"),r),r}function fs(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ps(e,t,"get"))}function ps(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ds=new WeakMap,hs=new WeakMap;const ys=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&os(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=as(o);if(s){var r=as(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===es(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return is(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return us(is(e=c.call.apply(c,[this].concat(r))),ds,{writable:!0,value:void 0}),us(is(e),hs,{writable:!0,value:void 0}),ss(is(e),"_defaultStorageType",u.PLATFORM_INTERNAL),ss(is(e),"_isPlayerAuthorized",!0),e}return r=l,n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return fs(this,ds)?fs(this,ds):ns(as(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,ls(e,ds,i.locale),ls(e,hs,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case f.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return ns(as(l.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||ns(as(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||ns(as(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===u.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(c)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):ns(as(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):ns(as(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):ns(as(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){var e=this,t=this._getPromiseDecorator(y.SHARE);return t||(t=this._createPromiseDecorator(y.SHARE),window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",t),e._resolvePromiseDecorator(y.SHARE))})),window.parent.postMessage({playdeck:{method:"customShare",value:fs(this,hs)}},"*")),t.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(y.PURCHASE);return o||(o=this._createPromiseDecorator(y.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function t(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",t);var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(r),!0).forEach((function(t){ss(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(y.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",t),r._rejectPromiseDecorator(y.PURCHASE,i.value))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Stars"),priceCurrencyCode:"Stars",priceValue:e.amount}}));return Promise.resolve(t)}}],n&&rs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function ms(e){return ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ms(e)}function vs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ws(n.key),n)}}function _s(){return _s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},_s.apply(this,arguments)}function gs(e,t){return gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gs(e,t)}function Ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(e){return bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bs(e)}function Es(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ps(e,t,r){return(t=ws(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ws(e){var t=function(e,t){if("object"!=ms(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ms(t)?t:String(t)}function As(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ks(e,t,"set"),r),r}function Os(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ks(e,t,"get"))}function ks(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ts=new WeakMap,Ds=new WeakMap,Is=new WeakMap,Rs=new WeakMap;const Ls=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gs(e,t)}(p,t);var r,n,o,s,c=(o=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bs(o);if(s){var r=bs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ss(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ps(Ss(e=c.call.apply(c,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),Ps(Ss(e),"_isPlayerAuthorized",!0),Es(Ss(e),Ts,{writable:!0,value:void 0}),Es(Ss(e),Ds,{writable:!0,value:void 0}),Es(Ss(e),Is,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),Es(Ss(e),Rs,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=p,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:_s(bs(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!Os(this,Ds)}},{key:"isRewardedSupported",get:function(){return!!Os(this,Ds)}},{key:"deviceType",get:function(){switch(Os(this,Ts)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return _s(bs(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],As(e,Ts,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?Ve("https://sad.adsgram.ai/js/sad.min.js").then((function(){As(e,Ds,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(y.INITIALIZE)})):e._resolvePromiseDecorator(y.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):_s(bs(p.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||_s(bs(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||_s(bs(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):_s(bs(p.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):_s(bs(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):_s(bs(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;Os(this,Ds)?(Os(this,Ds).addEventListener("onStart",Os(this,Rs).onStart),Os(this,Ds).addEventListener("onSkip",Os(this,Rs).onSkip),Os(this,Ds).addEventListener("onError",Os(this,Rs).onError),Os(this,Ds).addEventListener("onBannerNotFound",Os(this,Rs).onError),Os(this,Ds).show().finally((function(){Os(e,Ds).removeEventListener("onStart",Os(e,Rs).onStart),Os(e,Ds).removeEventListener("onSkip",Os(e,Rs).onSkip),Os(e,Ds).removeEventListener("onError",Os(e,Rs).onError),Os(e,Ds).removeEventListener("onBannerNotFound",Os(e,Rs).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;Os(this,Ds)?(Os(this,Ds).addEventListener("onStart",Os(this,Is).onStart),Os(this,Ds).addEventListener("onSkip",Os(this,Is).onSkip),Os(this,Ds).addEventListener("onReward",Os(this,Is).onReward),Os(this,Ds).addEventListener("onError",Os(this,Is).onError),Os(this,Ds).addEventListener("onBannerNotFound",Os(this,Is).onError),Os(this,Ds).show().finally((function(){Os(e,Ds).addEventListener("onStart",Os(e,Is).onStart),Os(e,Ds).addEventListener("onSkip",Os(e,Is).onSkip),Os(e,Ds).addEventListener("onReward",Os(e,Is).onReward),Os(e,Ds).addEventListener("onError",Os(e,Is).onError),Os(e,Ds).addEventListener("onBannerNotFound",Os(e,Is).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(y.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(y.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(y.CLIPBOARD_READ,t):e._rejectPromiseDecorator(y.CLIPBOARD_READ)}))),t.promise}}])&&vs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Vn);var js=["player"];function Cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ms(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gs(e){return Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(e)}function Bs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ms(n.key),n)}}function Ms(e){var t=function(e,t){if("object"!=Gs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gs(t)?t:String(t)}function Hs(){return Hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Us(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Hs.apply(this,arguments)}function Fs(e,t){return Fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fs(e,t)}function xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Us(e)}function Vs(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ws(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var zs="userData",Zs="6129580795478709",Ys=new WeakSet,Js=new WeakSet;function Ks(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:zs},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function qs(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const Xs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fs(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Us(o);if(s){var r=Us(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xs(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Vs(xs(e=c.call.apply(c,[this].concat(r))),Js),Vs(xs(e),Ys),e}return r=l,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return d}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?Ve("https://cdn.y8.com/api/sdk.js").then((function(){Ze("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){We({adSenseId:e._options.channelId?"ca-pub-".concat(Zs):e._options.adsenseId,channelId:e._options.channelId,hostId:"ca-host-pub-".concat(Zs)}).then((function(t){e._showAd=t})),e._platformSdk.getLoginStatus((function(t){Ws(e,Js,qs).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(y.INITIALIZE,S)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){Ws(e,Js,qs).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Hs(Us(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Hs(Us(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){Ws(n,Ys,Ks).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==Gs(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):Hs(Us(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){Ws(n,Ys,Ks).call(n).then((function(i){var a=Ns({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:zs,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):Hs(Us(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){Ws(r,Ys,Ks).call(r).then((function(o){var i=Ns({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:zs,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):Hs(Us(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={table:e,points:t};this._platformSdk.GameAPI.Leaderboards.save(o,(function(e){var t=e.success,n=e.errormessage;t?r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var n={table:e,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(e){var r=e.scores,n=e.success,o=e.errormessage;if(n){var i=r.map((function(e){return{id:e.playerid,name:e.playername,score:e.points,rank:e.rank,photo:null}}));t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,i)}else t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return Ns(Ns({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,js)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&Bs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Qs(e){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(e)}function $s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ec(n.key),n)}}function ec(e){var t=function(e,t){if("object"!=Qs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qs(t)?t:String(t)}function tc(){return tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},tc.apply(this,arguments)}function rc(e,t){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rc(e,t)}function nc(e){return nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nc(e)}const oc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rc(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nc(o);if(s){var r=nc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?Ve("https://lagged.com/api/rev-share/lagged.js").then((function(){Ze("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))})):this._rejectPromiseDecorator(y.INITIALIZE,E)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==u.PLATFORM_INTERNAL&&tc(nc(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==u.PLATFORM_INTERNAL&&tc(nc(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={score:t,board:e};this._platformSdk.Scores.save(o,(function(e){e.success?r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&$s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function ic(){ic=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==uc(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(uc(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ac(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function sc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(r),!0).forEach((function(t){_c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uc(e){return uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(e)}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gc(n.key),n)}}function pc(){return pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},pc.apply(this,arguments)}function dc(e,t){return dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dc(e,t)}function hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yc(e){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yc(e)}function mc(e,t){vc(e,t),t.add(e)}function vc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _c(e,t,r){return(t=gc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gc(e){var t=function(e,t){if("object"!=uc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=uc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uc(t)?t:String(t)}function Sc(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,bc(e,t,"set"),r),r}function bc(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Ec(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Pc=new WeakMap,wc=new WeakSet,Ac=new WeakSet,Oc=new WeakSet,kc=new WeakSet;function Tc(){var e=this;e._platformSdk.overlayViews.setCustomEventHandler((function(t){if("leaderboard"===t)Sc(e,Pc,!0);else if("close"===t){if(function(e,t){return t.get?t.get.call(e):t.value}(r=e,bc(r,Pc,"get")))return void Sc(e,Pc,!1);e._overlay&&(document.body.removeChild(document.getElementById(e._overlay.iframeElement.id)),e._overlay.dismissAsync(),e._overlay=null)}var r}))}function Dc(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function Ic(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}function Rc(){return Lc.apply(this,arguments)}function Lc(){var e;return e=ic().mark((function e(){return ic().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),"INVALID_OPERATION"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=13;break}e.next=14;break;case 13:throw new Error(e.t0);case 14:return e.prev=15,e.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!e.sent){e.next=21;break}return e.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:e.next=28;break;case 23:if(e.prev=23,e.t1=e.catch(15),"INVALID_OPERATION"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=27;break}return e.abrupt("return",Promise.resolve());case 27:throw new Error(e.t1);case 28:return e.abrupt("return",Promise.resolve());case 29:case"end":return e.stop()}}),e,this,[[0,8],[15,23]])})),Lc=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ac(i,n,o,a,s,"next",e)}function s(e){ac(i,n,o,a,s,"throw",e)}a(void 0)}))},Lc.apply(this,arguments)}const jc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dc(e,t)}(d,t);var r,n,o,c,p=(o=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yc(o);if(c){var r=yc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===uc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hc(e)}(this,e)});function d(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return mc(hc(e=p.call.apply(p,[this].concat(i))),kc),mc(hc(e),Oc),mc(hc(e),Ac),mc(hc(e),wc),_c(hc(e),"_contextId",null),_c(hc(e),"_supportedApis",[]),_c(hc(e),"_preloadedInterstitialPromises",{}),_c(hc(e),"_preloadedRewardedPromises",{}),_c(hc(e),"_defaultStorageType",u.PLATFORM_INTERNAL),_c(hc(e),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},vc(t=hc(e),r=Pc),r.set(t,n),e}return r=d,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||pc(yc(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return pc(yc(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return"native_popup"}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return Ze("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){return e._isPlayerAuthorized=!0,e._playerId=e._platformSdk.player.getID(),e._contextId=e._platformSdk.context.getID(),e._platformLanguage=e._platformSdk.getLocale(),"string"==typeof e._platformLanguage&&(e._platformLanguage=e._platformLanguage.substring(0,2).toLowerCase()),e._supportedApis=e._platformSdk.getSupportedAPIs(),Ec(e,wc,Tc).call(e),Promise.allSettled([e._platformSdk.community.canFollowOfficialPageAsync(),e._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(e,t){if(e){if("string"==typeof e)return lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lc(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;e._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){return e._rejectPromiseDecorator(y.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===f.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return Ec(t,kc,Rc).call(t)}),0),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):pc(yc(d.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):pc(yc(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:pc(yc(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==uc(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):pc(yc(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):pc(yc(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):pc(yc(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e,t){var r=this;this._platformSdk.loadBannerAdAsync(t,e).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(e){Ec(this,Ac,Dc).call(this,e)}},{key:"showInterstitial",value:function(e){var t=this;Ec(this,Ac,Dc).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED),Ec(t,Ac,Dc).call(t,e,!0)})).catch((function(){return t._advertisementShowErrorPopup(!1)}))}},{key:"preloadRewarded",value:function(e){Ec(this,Oc,Ic).call(this,e)}},{key:"showRewarded",value:function(e){var t=this;Ec(this,Oc,Ic).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),Ec(t,Oc,Ic).call(t,e,!0)})).catch((function(){return t._advertisementShowErrorPopup(!0)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.globalLeaderboards.setScoreAsync(e,o).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="9999",e.id="loading-overlay";var t=document.createElement("div");return t.style.fontSize="24px",t.style.color="#fff",t.innerText="Loading...",e.appendChild(t),e}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(e,20).then((function(e){var r=e.map((function(e){return{score:e.getScore(),sessionID:e.getPlayer().getSessionID()}})),o=t._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(e){e.showAsync(),t._overlay=e,n.remove(),t._resolvePromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(e,r){n.remove(),t._rejectPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(e){n.remove(),t._rejectPromiseDecorator(y.LEADERBOARDS_SHOW_NATIVE_POPUP,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=cc({id:e},r);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=t.map((function(e){var t=r.find((function(t){return t.productID===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,imageURI:t.imageURI,price:t.price,priceCurrencyCode:t.priceCurrencyCode,priceValue:t.priceAmount}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=cc({id:r.find((function(t){return t.id===e.productID})).id},e);return delete t.productID,t})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!Ye(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(y.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(y.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(y.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(y.INVITE_FRIENDS,t)}))),r.promise}},{key:"joinCommunity",value:function(e){var t=this,r=this._getPromiseDecorator(y.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(y.JOIN_COMMUNITY),e&&!0===e.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(e){return t._resolvePromiseDecorator(y.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(y.JOIN_COMMUNITY,e)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(e){return t._resolvePromiseDecorator(y.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(y.JOIN_COMMUNITY,e)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!Ye(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(y.SHARE);return r||(r=this._createPromiseDecorator(y.SHARE),this._platformSdk.shareAsync(cc({intent:"REQUEST"},e)).then((function(){t._resolvePromiseDecorator(y.SHARE)})).catch((function(e){t._rejectPromiseDecorator(y.SHARE,e)}))),r.promise}}],n&&fc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Vn);function Cc(e){return Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(e)}function Nc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gc(n.key),n)}}function Gc(e){var t=function(e,t){if("object"!=Cc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Cc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cc(t)?t:String(t)}var Bc,Mc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Nc(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(r),!0).forEach((function(t){qc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xc(e){return xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(e)}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xc(n.key),n)}}function Wc(e,t){return Wc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wc(e,t)}function zc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zc(e,t){Kc(e,t),t.add(e)}function Yc(){return Yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Yc.apply(this,arguments)}function Jc(e){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jc(e)}function Kc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qc(e,t,r){return(t=Xc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xc(e){var t=function(e,t){if("object"!=xc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xc(t)?t:String(t)}function Qc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function $c(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var eu="banner",tu="get_data_from_storage",ru="get_server_time",nu="clipboard_read",ou="unlock_achievement",iu="get_achievements",au="get_performance_resources",su="isLocalStorageSupported",cu="isPlatformInternalStorageSupported",uu="isBannerSupported",lu=new WeakMap,fu=new WeakSet,pu=new WeakSet,du=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wc(e,t)}(m,r);var n,o,c,l,d=(c=m,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jc(c);if(l){var r=Jc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zc(e)}(this,e)});function m(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Zc(zc(e=d.call.apply(d,[this].concat(i))),pu),Zc(zc(e),fu),qc(zc(e),"_supportedFeatures",[]),qc(zc(e),"_leaderboardsType",null),t=zc(e),r=lu,n={writable:!0,value:new Mc},Kc(t,r),r.set(t,n),e}return n=m,(o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return $c(this,lu).send({type:t.PLATFORM,action:"get_language",options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(uu)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var e;return null!==(e=this._leaderboardsType)&&void 0!==e?e:p}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),this._defaultStorageType=u.PLATFORM_INTERNAL,$c(this,lu).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===y.INITIALIZE&&Qc(e,fu,hu).call(e,n),n.action===au)){var o,i=$c(e,lu).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Qc(e,pu,yu).call(e,i,a)}})),$c(this,lu).send({type:t.PLATFORM,action:y.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(e){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);if(!n){n=this._createPromiseDecorator(y.AUTHORIZE_PLAYER);var o=$c(this,lu).generateMessageId();$c(this,lu).addListener((function e(n){var i,a=n.data;if((null==a?void 0:a.type)===t.PLAYER&&a.action===y.AUTHORIZE_PLAYER&&a.id===o){var s=a.player,c=a.auth;"success"===c.status?(r._playerId=s.userId,r._isPlayerAuthorized=s.isAuthorized,r._playerName=s.name,Array.isArray(s.photos)&&(r._playerPhotos=function(e){if(Array.isArray(e))return Uc(e)}(i=s.photos)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Uc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uc(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=s,r._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)):r._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,c.error),$c(r,lu).removeListener(e)}})),$c(this,lu).send({type:t.PLAYER,action:y.AUTHORIZE_PLAYER,id:o,options:e})}return n.promise}},{key:"sendMessage",value:function(e){return[f.GAME_READY,f.IN_GAME_LOADING_STARTED,f.IN_GAME_LOADING_STOPPED,f.GAMEPLAY_STARTED,f.GAMEPLAY_STOPPED,f.PLAYER_GOT_ACHIEVEMENT,f.GAME_OVER].includes(e)?($c(this,lu).send({type:t.PLATFORM,action:e}),Promise.resolve()):Yc(Jc(m.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=$c(e,lu).generateMessageId(),a=function a(s){var c=s.data;if((null==c?void 0:c.type)===t.PLATFORM&&c.action===ru&&c.id===i){if(!c.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(c.time),$c(e,lu).removeListener(a)}};$c(e,lu).addListener(a),$c(e,lu).send({type:t.PLATFORM,action:ru,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),$c(e,lu).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return $c(this,lu).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(cu))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(su))}},{key:"isStorageAvailable",value:function(e){return $c(this,lu).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(cu))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(su))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(!this.isStorageSupported(r))return Promise.reject(v);if(r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE){var i=$c(this,lu).generateMessageId();return new Promise((function(a){$c(o,lu).addListener((function r(n){var s=n.data;(null==s?void 0:s.type)===t.STORAGE&&s.action===tu&&s.id===i&&(Array.isArray(e)?a(e.map((function(e){return s.storage[e]}))):a(s.storage[e]),$c(o,lu).removeListener(r))})),$c(o,lu).send({type:t.STORAGE,action:tu,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return $c(this,lu).send({type:t.STORAGE,action:tu,options:{key:e,storageType:r,tryParseJson:n}}),Yc(Jc(m.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return $c(this,lu).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),this.isStorageSupported(n)?n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE?Promise.resolve():Yc(Jc(m.prototype),"setDataToStorage",this).call(this,e,r,n):Promise.reject(v)}},{key:"deleteDataFromStorage",value:function(e,r){return $c(this,lu).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),this.isStorageSupported(r)?r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE?Promise.resolve():Yc(Jc(m.prototype),"deleteDataFromStorage",this).call(this,e,r):Promise.reject(v)}},{key:"showInterstitial",value:function(e){var r=this;this.isInterstitialSupported&&($c(this,lu).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setInterstitialState(i.LOADING);break;case"open":r._setInterstitialState(i.OPENED);break;case"failed":r._setInterstitialState(i.FAILED);break;case"close":r._setInterstitialState(i.CLOSED),$c(r,lu).removeListener(e)}})),$c(this,lu).send({type:t.ADVERTISEMENT,action:"interstitial",options:{placement:e}}))}},{key:"showRewarded",value:function(e){var r=this;this.isRewardedSupported&&($c(this,lu).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setRewardedState(a.LOADING);break;case"open":r._setRewardedState(a.OPENED);break;case"failed":r._setRewardedState(a.FAILED);break;case"rewarded":r._setRewardedState(a.REWARDED);break;case"close":r._setRewardedState(a.CLOSED),$c(r,lu).removeListener(e)}})),$c(this,lu).send({type:t.ADVERTISEMENT,action:"reward",options:{placement:e}}))}},{key:"showBanner",value:function(e,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),$c(this,lu).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:eu,position:e,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),$c(this,lu).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:eu}}))}},{key:"checkAdBlock",value:function(){return $c(this,lu).send({type:"check_adblock",action:y.ADBLOCK_DETECT}),Yc(Jc(m.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var e=this._getPromiseDecorator(y.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(y.INVITE_FRIENDS),this._resolvePromiseDecorator(y.INVITE_FRIENDS),$c(this,lu).send({type:t.SOCIAL,action:y.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var e=this._getPromiseDecorator(y.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(y.JOIN_COMMUNITY),this._resolvePromiseDecorator(y.JOIN_COMMUNITY),$c(this,lu).send({type:t.SOCIAL,action:y.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var e=this._getPromiseDecorator(y.SHARE);return e||(e=this._createPromiseDecorator(y.SHARE),this._resolvePromiseDecorator(y.SHARE),$c(this,lu).send({type:t.SOCIAL,action:y.SHARE})),e.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var e=this._getPromiseDecorator(y.CREATE_POST);return e||(e=this._createPromiseDecorator(y.CREATE_POST),this._resolvePromiseDecorator(y.CREATE_POST),$c(this,lu).send({type:t.SOCIAL,action:y.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(y.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(y.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(y.ADD_TO_HOME_SCREEN),$c(this,lu).send({type:t.SOCIAL,action:y.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var e=this._getPromiseDecorator(y.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(y.ADD_TO_FAVORITES),this._resolvePromiseDecorator(y.ADD_TO_FAVORITES),$c(this,lu).send({type:t.SOCIAL,action:y.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var e=this._getPromiseDecorator(y.RATE);return e||(e=this._createPromiseDecorator(y.RATE),this._resolvePromiseDecorator(y.RATE),$c(this,lu).send({type:t.SOCIAL,action:y.RATE})),e.promise}},{key:"paymentsPurchase",value:function(e){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();var o=this._getPromiseDecorator(y.PURCHASE);if(!o){o=this._createPromiseDecorator(y.PURCHASE);var i=$c(this,lu).generateMessageId();$c(this,lu).addListener((function n(o){var a=o.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===y.PURCHASE&&a.id===i){var s;if(!a.purchase||"object"!==xc(a.purchase))return r._rejectPromiseDecorator(y.PURCHASE,new Error("Invalid purchase")),void $c(r,lu).removeListener(n);if(null!==(s=a.purchase)&&void 0!==s&&s.status){var c=Fc({id:e},a.purchase.purchaseData);r._paymentsPurchases.push(c),r._resolvePromiseDecorator(y.PURCHASE,c)}else{var u;r._rejectPromiseDecorator(y.PURCHASE,(null===(u=a.purchase)||void 0===u?void 0:u.error)||new Error("Unknown purchase error"))}$c(r,lu).removeListener(n)}})),$c(this,lu).send({type:t.PAYMENTS,action:y.PURCHASE,id:i,options:{product:n}})}return o.promise}},{key:"paymentsConsumePurchase",value:function(e){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(y.CONSUME_PURCHASE);if(!o){o=this._createPromiseDecorator(y.CONSUME_PURCHASE);var i=$c(this,lu).generateMessageId();$c(this,lu).addListener((function o(a){var s=a.data;if((null==s?void 0:s.type)===t.PAYMENTS&&s.action===y.CONSUME_PURCHASE&&s.id===i){var c;if(!s.purchase||"object"!==xc(s.purchase))return r._rejectPromiseDecorator(y.CONSUME_PURCHASE,new Error("Invalid purchase")),void $c(r,lu).removeListener(o);if(null!==(c=s.purchase)&&void 0!==c&&c.status){var u=Fc({id:e},s.purchase);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(y.CONSUME_PURCHASE,u)}else{var l;r._rejectPromiseDecorator(y.CONSUME_PURCHASE,(null===(l=s.purchase)||void 0===l?void 0:l.error)||new Error("Unknown consume purchase error"))}$c(r,lu).removeListener(o)}})),$c(this,lu).send({type:t.PAYMENTS,action:y.CONSUME_PURCHASE,id:i,options:{product:this._paymentsPurchases[n]}})}return o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);if(!r){r=this._createPromiseDecorator(y.GET_CATALOG);var n=this._paymentsGetProductsPlatformData(),o=$c(this,lu).generateMessageId();$c(this,lu).addListener((function r(i){var a=i.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===y.GET_CATALOG&&a.id===o){var s=n.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));$c(e,lu).removeListener(r),e._resolvePromiseDecorator(y.GET_CATALOG,s)}})),$c(this,lu).send({type:t.PAYMENTS,action:y.GET_CATALOG,id:o})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(y.GET_PURCHASES);var n=$c(this,lu).generateMessageId();$c(this,lu).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===y.GET_PURCHASES&&i.id===n){var a=e._paymentsGetProductsPlatformData();e._paymentsPurchases=i.purchases.map((function(e){return Fc({id:a.find((function(t){return t.id===e.id})).id},e.purchaseData)})),$c(e,lu).removeListener(r),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)}})),$c(this,lu).send({type:t.PAYMENTS,action:y.GET_PURCHASES,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(y.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(y.GET_REMOTE_CONFIG);var n=$c(this,lu).generateMessageId();$c(this,lu).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===y.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(y.GET_REMOTE_CONFIG,i.result),$c(e,lu).removeListener(r))})),$c(this,lu).send({type:t.REMOTE_CONFIG,action:y.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(y.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(y.CLIPBOARD_WRITE);var o=$c(this,lu).generateMessageId();$c(this,lu).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===y.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(y.CLIPBOARD_WRITE,!0),$c(r,lu).removeListener(e))})),$c(this,lu).send({type:t.CLIPBOARD,action:y.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(nu);if(!r){r=this._createPromiseDecorator(nu);var n=$c(this,lu).generateMessageId();$c(this,lu).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===nu&&i.id===n){var a=i.text;e._resolvePromiseDecorator(nu,a),$c(e,lu).removeListener(r)}})),$c(this,lu).send({type:t.CLIPBOARD,action:nu,id:n,options:{}})}return r.promise}},{key:"leaderboardsSetScore",value:function(e,r){if(this.leaderboardsType===p)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o={id:e,score:r};$c(this,lu).send({type:t.LEADERBOARDS,action:y.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var r=this;if(this.leaderboardsType===p||this.leaderboardsType===h)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);var o=$c(this,lu).generateMessageId();$c(this,lu).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.LEADERBOARDS&&i.action===y.LEADERBOARDS_GET_ENTRIES&&i.id===o?(r._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,i.entries),$c(r,lu).removeListener(e)):r._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES)})),$c(this,lu).send({type:t.LEADERBOARDS,action:y.LEADERBOARDS_GET_ENTRIES,id:o,options:{id:e}})}return n.promise}},{key:"unlockAchievement",value:function(e){var r=this;return this.isAchievementsSupported?new Promise((function(n){var o=$c(r,lu).generateMessageId();$c(r,lu).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===ou&&a.id===o&&(n(a.result),$c(r,lu).removeListener(e))})),$c(r,lu).send({type:t.ACHIEVEMENTS,action:ou,id:o,options:e})})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var r=this;return this.isGetAchievementsListSupported?new Promise((function(n){var o=$c(r,lu).generateMessageId();$c(r,lu).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===iu&&a.id===o&&(n(a.result),$c(r,lu).removeListener(e))})),$c(r,lu).send({type:t.ACHIEVEMENTS,action:iu,id:o,options:e})})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?($c(this,lu).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(e){return Fc({id:e.id},e.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?Fc({id:r.id},r.playgama):null}}])&&Vc(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),m}(Vn);function hu(e){var t,r,n,o;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(uu);var i=e.config,a=void 0===i?{}:i;this._deviceType=null!==(t=a.deviceType)&&void 0!==t?t:Yc(Jc(Bc.prototype),"deviceType",this),this._platformLanguage=a.platformLanguage?a.platformLanguage.toLowerCase():Yc(Jc(Bc.prototype),"platformLanguage",this),this._platformTld=null!==(r=a.platformTld)&&void 0!==r?r:Yc(Jc(Bc.prototype),"platformTld",this),this._platformPayload=null!==(n=a.platformPayload)&&void 0!==n?n:Yc(Jc(Bc.prototype),"platformPayload",this),this._leaderboardsType=null!==(o=a.leaderboardsType)&&void 0!==o?o:p,this._paymentsPurchases=e.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(y.INITIALIZE),$c(this,lu).send({type:"liveness",action:"ping",options:{version:"1.26.1"}})}function yu(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return $c(this,lu).send({type:t.PLATFORM,action:au,id:e,options:{resources:a}}),Promise.resolve(o)}Bc=du;const mu=du;function vu(e){return vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(e)}function _u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gu(n.key),n)}}function gu(e){var t=function(e,t){if("object"!=vu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vu(t)?t:String(t)}function Su(){return Su="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Su.apply(this,arguments)}function bu(e,t){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bu(e,t)}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}const Pu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bu(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Eu(o);if(s){var r=Eu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Ze("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case f.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case f.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case f.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return Su(Eu(u.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&_u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Vn);function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}function Au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Tu(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tu(n.key),n)}}function Tu(e){var t=function(e,t){if("object"!=wu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wu(t)?t:String(t)}function Du(e,t){return Du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Du(e,t)}function Iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ru(e){return Ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ru(e)}function Lu(e,t){Cu(e,t),t.add(e)}function ju(e,t,r){Cu(e,t),t.set(e,r)}function Cu(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nu(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Mu(e,t,"set"),r),r}function Gu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Bu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Mu(e,t,"get"))}function Mu(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Hu=new WeakMap,Fu=new WeakMap,xu=new WeakSet,Uu=new WeakSet,Vu=new WeakSet;function Wu(){var e=this;return Bu(this,Hu)?new Promise((function(t){Bu(e,Hu).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!1).then((function(){return t()}));case"ready":e._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){e._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!1).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setInterstitialState(i.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!1)}function zu(){var e=this;return Bu(this,Hu)?new Promise((function(t){Bu(e,Hu).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!0).then((function(){return t()}));case"ready":e._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){e._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){e._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!0).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setRewardedState(a.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!0)}function Zu(e){e?(this._isPlayerAuthorized=!0,this._playerId=e.playerId,this._playerName=e.playerDisplayName,this._playerExtra=e,Nu(this,Fu,"personal"===e.userAccountType.toLowerCase())):this._playerApplyGuestData()}const Yu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ru(o);if(c){var r=Ru(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Iu(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Lu(Iu(e=u.call.apply(u,[this].concat(r))),Vu),Lu(Iu(e),Uu),Lu(Iu(e),xu),ju(Iu(e),Hu,{writable:!0,value:null}),ju(Iu(e),Fu,{writable:!0,value:!1}),e}return r=l,(n=[{key:"platformId",get:function(){return e.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return Bu(this,Fu)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);if(!t){var r;t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function(){return Ze("$msstart")})).then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Gu(e,Vu,Zu).call(e,t)})).catch((function(){Gu(e,Vu,Zu).call(e,null)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&Ve("https://playgama.com/ads/msn.v0.1.js").then((function(){return Ze("pgAds")})).then((function(){window.pgAds.init(n).then((function(){Nu(e,Hu,window.pgAds);var t=e._options.gameId;Bu(e,Hu).updateTargeting({gameId:t})}))}))}return t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Gu(e,Vu,Zu).call(e,r),t()})).catch((function(t){Gu(e,Vu,Zu).call(e,null),r(t)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;return new Promise((function(e,n){r._platformSdk.submitGameResultsAsync(t).then(e).catch(n)}))}},{key:"showBanner",value:function(e){var t,r=this;t="top"===e?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([t]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.loadAdsAsync(!1).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){return Gu(e,xu,Wu).call(e)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.loadAdsAsync(!0).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){return Gu(e,Uu,zu).call(e)}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:r.platformProductId}).then((function(r){if("IAP_PURCHASE_FAILURE"!==r.code){var n=Ou(Ou({id:e},r.receipt),{},{receiptSignature:r.receiptSignature});t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)}else t._rejectPromiseDecorator(y.PURCHASE,r.description)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].id}).then((function(n){if("IAP_CONSUME_FAILURE"!==n.code){t._paymentsPurchases.splice(r,1);var o=Ou(Ou({id:e},n.consumptionReceipt),{},{consumptionSignature:n.consumptionSignature});delete o.productId,t._resolvePromiseDecorator(y.CONSUME_PURCHASE,o)}else t._rejectPromiseDecorator(y.CONSUME_PURCHASE,n.description)})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=t.map((function(e){var t=r.find((function(t){return t.productId===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,publisherName:t.publisherName,inAppOfferToken:t.inAppOfferToken,isConsumable:t.isConsumable,price:"".concat(t.price.listPrice," ").concat(t.price.currencyCode," "),priceCurrencyCode:t.price.currencyCode,priceValue:t.price.listPrice}}));e._resolvePromiseDecorator(y.GET_CATALOG,n)}else e._rejectPromiseDecorator(y.GET_CATALOG,r.description)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._isPlayerAuthorized?this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId}).then((function(t){if("IAP_GET_ALL_PURCHASES_FAILURE"!==t.code){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.receipts.map((function(e){return Ou(Ou({id:r.find((function(t){return t.id===e.productId})).id},e),{},{receiptSignature:t.receiptSignature})})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)}else e._rejectPromiseDecorator(y.GET_PURCHASES,t.description)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)})):this._rejectPromiseDecorator(y.GET_PURCHASES,"User not authorized")),t.promise}}])&&ku(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(r),!0).forEach((function(t){nl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ol(n.key),n)}}function Qu(){return Qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Qu.apply(this,arguments)}function $u(e,t){return $u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$u(e,t)}function el(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tl(e){return tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tl(e)}function rl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function nl(e,t,r){return(t=ol(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ol(e){var t=function(e,t){if("object"!=Ju(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ju(t)?t:String(t)}function il(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var al=new WeakSet,sl=new WeakSet,cl=new WeakSet,ul=new WeakSet,ll=new WeakSet,fl=new WeakSet,pl=new WeakSet,dl=new WeakSet,hl=new WeakSet,yl=new WeakSet,ml=new WeakSet,vl=new WeakSet,_l=new WeakSet;function gl(e,t){window.system&&window.system.postMessage(JSON.stringify({action:e,data:t}))}function Sl(){if(window.system){var e=this;window.system.onmessage=function(t){try{var r=JSON.parse(t),n=r.action,o=r.data;n===y.INITIALIZE?il(e,cl,bl).call(e,o):n===y.AUTHORIZE_PLAYER?il(e,ul,El).call(e,o):n===y.SET_INTERSTITIAL_STATE?il(e,ll,Pl).call(e,o):n===y.SET_REWARDED_STATE?il(e,fl,wl).call(e,o):n===y.GET_CATALOG?il(e,pl,Al).call(e,o):n===y.PURCHASE?il(e,dl,Ol).call(e,o):n===y.CONSUME_PURCHASE?il(e,hl,kl).call(e,o):n===y.GET_PURCHASES?il(e,yl,Tl).call(e,o):n===y.GET_STORAGE_DATA?il(e,ml,Dl).call(e,o):n===y.SET_STORAGE_DATA?il(e,vl,Il).call(e,o):n===y.DELETE_STORAGE_DATA&&il(e,_l,Rl).call(e,o)}catch(e){console.error("Error parsing Huawei message:",e)}}}}function bl(e){e.success?(this._isInitialized=!0,this._resolvePromiseDecorator(y.INITIALIZE,e)):this._rejectPromiseDecorator(y.INITIALIZE,new Error(e))}function El(e){if(!e.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,new Error(e));this._playerId=e.playerId,this._playerName=e.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(y.AUTHORIZE_PLAYER)}function Pl(e){Object.values(i).includes(e.state)&&this._setInterstitialState(e.state,e.state===i.FAILED?new Error(e):void 0)}function wl(e){Object.values(a).includes(e.state)&&this._setRewardedState(e.state,e.state===a.FAILED?new Error(e):void 0)}function Al(e){if(e.success){var t=this._paymentsGetProductsPlatformData().map((function(t){var r=e.data.find((function(e){return e.productId===t.id}));return{id:t.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(y.GET_CATALOG,t)}else this._rejectPromiseDecorator(y.GET_CATALOG,new Error(e))}function Ol(e){if(e.success){var t=e.data,r=qu({id:e.id},t);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(y.PURCHASE,r)}else this._rejectPromiseDecorator(y.PURCHASE,new Error(e))}function kl(e){if(e.success){var t=this._paymentsPurchases.findIndex((function(t){return t.purchaseToken===e.purchaseToken}));t>=0&&this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(y.CONSUME_PURCHASE,e)}else this._rejectPromiseDecorator(y.CONSUME_PURCHASE,new Error(e))}function Tl(e){if(e.success){var t=this._paymentsGetProductsPlatformData();this._paymentsPurchases=e.data.map((function(e){var r=JSON.parse(e),n=qu({id:t.find((function(e){return e.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(y.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(y.GET_PURCHASES,new Error(e))}function Dl(e){e.success?this._resolvePromiseDecorator(y.GET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.GET_STORAGE_DATA,new Error(e))}function Il(e){e.success?this._resolvePromiseDecorator(y.SET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.SET_STORAGE_DATA,new Error(e))}function Rl(e){e.success?this._resolvePromiseDecorator(y.DELETE_STORAGE_DATA,e.data):this._rejectPromiseDecorator(y.DELETE_STORAGE_DATA,new Error(e))}const Ll=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$u(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tl(o);if(i){var r=tl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return el(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return rl(el(e=a.call.apply(a,[this].concat(r))),_l),rl(el(e),vl),rl(el(e),ml),rl(el(e),yl),rl(el(e),hl),rl(el(e),dl),rl(el(e),pl),rl(el(e),fl),rl(el(e),ll),rl(el(e),ul),rl(el(e),cl),rl(el(e),sl),rl(el(e),al),nl(el(e),"_defaultStorageType",u.PLATFORM_INTERNAL),e}return r=s,(n=[{key:"platformId",get:function(){return e.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(y.INITIALIZE);return e||(e=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,il(this,sl,Sl).call(this),il(this,al,gl).call(this,y.INITIALIZE,this._appId)):this._rejectPromiseDecorator(y.INITIALIZE,P)),e.promise}},{key:"authorizePlayer",value:function(){var e=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),il(this,al,gl).call(this,y.AUTHORIZE_PLAYER)),e.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Qu(tl(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Qu(tl(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"setDataToStorage",value:function(e,t,r){if(r!==u.PLATFORM_INTERNAL)return Qu(tl(s.prototype),"setDataToStorage",this).call(this,e,t,r);var n=this._getPromiseDecorator(y.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(y.SET_STORAGE_DATA),il(this,al,gl).call(this,y.SET_STORAGE_DATA,{key:e,value:t})),n.promise}},{key:"getDataFromStorage",value:function(e,t){if(t!==u.PLATFORM_INTERNAL)return Qu(tl(s.prototype),"getDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(y.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(y.GET_STORAGE_DATA),il(this,al,gl).call(this,y.GET_STORAGE_DATA,e)),r.promise}},{key:"deleteDataFromStorage",value:function(e,t){if(t!==u.PLATFORM_INTERNAL)return Qu(tl(s.prototype),"deleteDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(y.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(y.DELETE_STORAGE_DATA),il(this,al,gl).call(this,y.DELETE_STORAGE_DATA,e)),r.promise}},{key:"showInterstitial",value:function(e){il(this,al,gl).call(this,y.SHOW_INTERSTITIAL,e)}},{key:"showRewarded",value:function(e){il(this,al,gl).call(this,y.SHOW_REWARDED,e)}},{key:"paymentsPurchase",value:function(e){if(!this._paymentsGetProductPlatformData(e))return Promise.reject();var t=this._getPromiseDecorator(y.PURCHASE);return t||(t=this._createPromiseDecorator(y.PURCHASE),il(this,al,gl).call(this,y.PURCHASE,e)),t.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject();var r=this._getPromiseDecorator(y.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(y.CONSUME_PURCHASE),il(this,al,gl).call(this,y.CONSUME_PURCHASE,this._paymentsPurchases[t].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=this._getPromiseDecorator(y.GET_CATALOG);return t||(t=this._createPromiseDecorator(y.GET_CATALOG),il(this,al,gl).call(this,y.GET_CATALOG,e.map((function(e){return e.id})))),t.promise}},{key:"paymentsGetPurchases",value:function(){var e=this._getPromiseDecorator(y.GET_PURCHASES);return e||(e=this._createPromiseDecorator(y.GET_PURCHASES),il(this,al,gl).call(this,y.GET_PURCHASES)),e.promise}}])&&Xu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Vn);function jl(e){return jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(e)}function Cl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Fl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gl(){Gl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==jl(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(jl(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Bl(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ml(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Bl(i,n,o,a,s,"next",e)}function s(e){Bl(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Hl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fl(n.key),n)}}function Fl(e){var t=function(e,t){if("object"!=jl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jl(t)?t:String(t)}function xl(){return xl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},xl.apply(this,arguments)}function Ul(e,t){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ul(e,t)}function Vl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wl(e){return Wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wl(e)}var zl=new WeakSet;function Zl(){var e=this,t={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=t[r];n&&(e._setRewardedState(n),n===a.REWARDED&&e._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(t){var n=r[t];n&&e._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(t){var r=n[t];r&&e._setBannerState(r)}))}const Yl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ul(e,t)}(l,t);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wl(a);if(s){var r=Wl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vl(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=Vl(e=c.call.apply(c,[this].concat(o))),r=zl),r.add(t),e}return r=l,n=[{key:"platformId",get:function(){return e.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return d}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);if(!t){var r;switch(t=this._createPromiseDecorator(y.INITIALIZE),new URLSearchParams(window.location.search).get("target")){case"prod":default:r="https://app.bitquest.games/bqsdk.min.js";break;case"stage":r="https://app-stage.bitquest.games/bqsdk.min.js";break;case"bank":r="https://app-global.memebeat.io/bqsdk.min.js"}Ve(r).then((function(){Ze("bq").then((function(){e._platformSdk=window.bq,e._platformSdk.initialize().then((function(){e._platformSdk.platform.sendMessage("game_ready");var t=e._platformSdk.player,r=t.id,n=void 0===r?null:r,o=t.name,i=void 0===o?"":o;e._playerId=n,e._playerName=i,e._isPlayerAuthorized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,e._playerExtra=t,function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,zl,Zl).call(e),e.showPreRoll(),e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,t)}))}))}))}return t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||xl(Wl(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||xl(Wl(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return n._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return this._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return xl(Wl(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=Ml(Gl().mark((function e(t,r,n){return Gl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==u.PLATFORM_INTERNAL){e.next=12;break}if(!Array.isArray(t)){e.next=9;break}if(Array.isArray(r)){e.next=4;break}throw new Error("Value must be an array if key is an array");case 4:if(t.length===r.length){e.next=6;break}throw new Error("Key and value arrays must have the same length");case 6:return e.next=8,this._platformSdk.storage.set(t,r,"platform_internal");case 8:case 11:return e.abrupt("return");case 9:return e.next=11,this._platformSdk.storage.set(t,r,"platform_internal");case 12:return e.next=14,xl(Wl(l.prototype),"setDataToStorage",this).call(this,t,r,n);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Ml(Gl().mark((function e(t,r){var n;return Gl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==u.PLATFORM_INTERNAL){e.next=13;break}if(!Array.isArray(t)){e.next=10;break}n=0;case 3:if(!(n<t.length)){e.next=9;break}return e.next=6,this._platformSdk.storage.delete(t[n],"platform_internal");case 6:n++,e.next=3;break;case 9:return e.abrupt("return");case 10:return e.next=12,this._platformSdk.storage.delete(t,"platform_internal");case 12:return e.abrupt("return");case 13:return e.next=15,xl(Wl(l.prototype),"deleteDataFromStorage",this).call(this,t,r);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._getPromiseDecorator(y.PURCHASE);return r||(r=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.payment.purchase(e).then((function(r){var n=Nl({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var e,t=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(e=this._platformSdk)||void 0===e||!e.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(y.GET_CATALOG);return n||(n=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(e){if(!Array.isArray(e))throw new Error("Catalog response is not an array");var n=r.map((function(t){var r=e.find((function(e){return e.purchaseId===t.id}));return r?{id:t.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);t._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(y.GET_CATALOG,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(e).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(t){var r=null==t?void 0:t.purchases,n=e._paymentsGetProductsPlatformData();e._paymentsPurchases=r.map((function(e){var t=n.find((function(t){return t.id===e.purchaseId}));if(!t)return null;var r=Nl({id:t.id},e);return delete r.purchaseId,r})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.leaderboard.setScore(e,o).then((function(){r._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(e).then((function(e){var r=Array.isArray(e)?e:e.entries||e.data||[];t._resolvePromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(y.LEADERBOARDS_GET_ENTRIES,e)}))),r.promise}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.platform.getServerTime())}))}}],n&&Hl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Jl(e){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(e)}function Kl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ef(n.key),n)}}function ql(e,t){return ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ql(e,t)}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ql(e){return Ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ql(e)}function $l(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ef(e){var t=function(e,t){if("object"!=Jl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Jl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jl(t)?t:String(t)}function tf(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var rf=new WeakSet,nf=new WeakSet,of=new WeakSet;function af(){var e=this;this._platformSdk.ads.on("rewarded:start",(function(){e._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(t){t||e._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)}))}function sf(){var e=this;this._platformSdk.ads.on("fullscreen:start",(function(){e._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){e._setInterstitialState(i.CLOSED)}))}function cf(){var e=this;this._platformSdk.ads.on("sticky:render",(function(){e._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){e._setBannerState(s.HIDDEN)}))}const uf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ql(e,t)}(c,t);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ql(o);if(i){var r=Ql(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xl(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return $l(Xl(e=s.call.apply(s,[this].concat(o))),of),$l(Xl(e),nf),$l(Xl(e),rf),t=Xl(e),!0,(r=ef(r="_isBannerSupported"))in t?Object.defineProperty(t,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[r]=true,e}return r=c,(n=[{key:"platformId",get:function(){return e.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);Ve(r).then((function(){Ze("GamePush").then((function(){var t;e._platformSdk=window.GamePush;var r=null===(t=e._platformSdk)||void 0===t?void 0:t.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;e._isPlayerAuthorized=!0,e._playerId=o,e._playerName=a,c&&e._playerPhotos.push(c)}else e._playerApplyGuestData();e._isInitialized=!0,tf(e,nf,sf).call(e),tf(e,rf,af).call(e),tf(e,of,cf).call(e),e._resolvePromiseDecorator(y.INITIALIZE)}))}))}else this._rejectPromiseDecorator(y.INITIALIZE,w);return t.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.ads.showRewardedVideo().catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ads.isAdblockEnabled().then((function(e){t(e)}))}))}}])&&Kl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Vn);function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function ff(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ff(Object(r),!0).forEach((function(t){vf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ff(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function df(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_f(n.key),n)}}function hf(e,t){return hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hf(e,t)}function yf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mf(e){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mf(e)}function vf(e,t,r){return(t=_f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _f(e){var t=function(e,t){if("object"!=lf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lf(t)?t:String(t)}const gf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hf(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mf(o);if(i){var r=mf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===lf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yf(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vf(yf(e=a.call.apply(a,[this].concat(r))),"_appId",null),vf(yf(e),"_accessToken",null),e}return r=s,(n=[{key:"platformId",get:function(){return e.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(y.INITIALIZE);return r||(r=this._createPromiseDecorator(y.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.appId?(this._appId=this._options.appId,Ve("/cdn/discord/discord-v2.0.0.min.js").then((function(){Ze("discord","DiscordSDK").then((function(){return e._platformSdk=new window.discord.DiscordSDK(e._appId),e._platformSdk.ready()})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)}))}))):this._rejectPromiseDecorator(y.INITIALIZE,O)),r.promise}},{key:"authorizePlayer",value:function(e){var t=this,r=(null==e?void 0:e.scope)||["identify"],n=this._getPromiseDecorator(y.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(y.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(e){var t=e.code;return fetch("".concat("/api","/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})})).then((function(e){return e.json()})).then((function(e){return t._accessToken=e.access_token,t._playerExtra={token:e.token,accessToken:t._accessToken,channelId:t._platformSdk.channelId},t._platformSdk.commands.authenticate({access_token:t._accessToken})})).then((function(e){if(null===e)throw t._playerApplyGuestData(),new Error("Authorization failed");return t._isPlayerAuthorized=!0,t._resolvePromiseDecorator(y.AUTHORIZE_PLAYER),fetch("/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(t._accessToken),"Content-Type":"application/json"}})})).then((function(e){return e.json()})).then((function(e){t._playerId=e.id,t._playerName=e.username,e.avatar&&t._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(e.id,"/").concat(e.avatar,".png")),t._playerExtra=pf(pf({},t._playerExtra),e)})).catch((function(e){t._playerApplyGuestData(),t._accessToken=null,t._rejectPromiseDecorator(y.AUTHORIZE_PLAYER,e)}))),n.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(y.PURCHASE);return n||(n=this._createPromiseDecorator(y.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=pf({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(y.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(y.CONSUME_PURCHASE),fetch("/applications/".concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(y.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(y.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=t.map((function(e){var t,r,o=n.find((function(t){return t.id===e.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(t=o.price)||void 0===t||null===(t=t.currency)||void 0===t?void 0:t.toUpperCase(),s="".concat(i," ").concat(a);return{id:e.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));e._resolvePromiseDecorator(y.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.entitlements.map((function(e){return pf({id:r.find((function(t){return t.id===e.id})).id},e)})),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=this._getPromiseDecorator(y.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(y.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){e._resolvePromiseDecorator(y.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(y.INVITE_FRIENDS,t)}))),t.promise}},{key:"share",value:function(e){var t=this;if(!e.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(y.SHARE);return r||(r=this._createPromiseDecorator(y.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:e.mediaUrl}).then((function(){t._resolvePromiseDecorator(y.SHARE)})).catch((function(e){t._rejectPromiseDecorator(y.SHARE,e)}))),r.promise}}])&&df(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Vn);function Sf(e){return Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(e)}function bf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bf(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=wf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wf(n.key),n)}}function wf(e){var t=function(e,t){if("object"!=Sf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Sf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sf(t)?t:String(t)}function Af(){return Af="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Af.apply(this,arguments)}function Of(e,t){return Of=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Of(e,t)}function kf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tf(e){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tf(e)}function Df(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,If(e,t,"get"))}function If(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Rf=new WeakMap;const Lf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Of(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tf(o);if(s){var r=Tf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Sf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kf(e)}(this,e)});function l(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=kf(e=c.call.apply(c,[this].concat(i))),n={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Rf),r.set(t,n),e}return r=l,(n=[{key:"platformId",get:function(){return e.YOUTUBE}},{key:"platformLanguage",get:function(){return Df(this,Rf)?Df(this,Rf):Af(Tf(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return h}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://www.youtube.com/game_api/v1").then((function(){Ze("ytgame").then((function(){e._platformSdk=window.ytgame,e._defaultStorageType=u.PLATFORM_INTERNAL,e._audioStateAggregator.setState("platform",!e._platformSdk.system.isAudioEnabled());var t=e._platformSdk.system.getLanguage().then((function(t){var r,n,o;r=e,n=Rf,o=t.length>2?t.slice(0,2):t,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(r,If(r,n,"set"),o)}));e._platformStorageCachedData={};var r=e._platformSdk.game.loadData().then((function(t){"string"==typeof t&&""!==t&&(e._platformStorageCachedData=JSON.parse(t))}));e._platformSdk.system.onAudioEnabledChange((function(t){e._setAudioState(t)})),e._platformSdk.system.onPause((function(){e._setPauseState(!0)})),e._platformSdk.system.onResume((function(){e._setPauseState(!1)})),Promise.all([t,r]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE),e._platformSdk.game.firstFrameReady()}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Af(Tf(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Af(Tf(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(e)){for(var i=[],a=0;a<e.length;a++){var s=void 0===n._platformStorageCachedData[e[a]]?null:n._platformStorageCachedData[e[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(e){}i.push(s)}t(i)}else{var c=void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(e){}t(c)}})).catch((function(){o()}))})):Af(Tf(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Ef({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Af(Tf(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Ef({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))})):Af(Tf(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Af(Tf(l.prototype),"sendMessage",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){e._setInterstitialState(i.CLOSED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(y.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(y.LEADERBOARDS_SET_SCORE);var i="string"==typeof t?parseInt(t,10):t;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(y.LEADERBOARDS_SET_SCORE)})).catch((function(e){n._rejectPromiseDecorator(y.LEADERBOARDS_SET_SCORE,e)}))}return o.promise}}])&&Pf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function jf(e){return jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(e)}var Cf=["gamer_id","gamer_name","gamer_avatar_url"];function Nf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xf(n.key),n)}}function Gf(e,t){return Gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gf(e,t)}function Bf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mf(e){return Mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mf(e)}function Hf(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ff(e,t,r){return(t=xf(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xf(e){var t=function(e,t){if("object"!=jf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jf(t)?t:String(t)}function Uf(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Vf=new WeakSet,Wf=new WeakSet;function zf(){var e=this,t=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;e._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(e){t._preloadInterstitialPromise=null,n(new Error(e))}})}))),this._preloadInterstitialPromise}function Zf(){var e=this,t=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;e._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(e){t._preloadRewardedPromise=null,n(new Error(e))}})}))),this._preloadRewardedPromise}const Yf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gf(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mf(o);if(c){var r=Mf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bf(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hf(Bf(e=u.call.apply(u,[this].concat(r))),Wf),Hf(Bf(e),Vf),Ff(Bf(e),"_preloadInterstitialPromise",null),Ff(Bf(e),"_preloadRewardedPromise",null),Ff(Bf(e),"_isBannerAvailable",!1),e}return r=l,(n=[{key:"platformId",get:function(){return e.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return h}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),window.onSdkReady=function(){if(e._platformSdk=window.JioGames,e._platformSdk.playerInfo){var t=e._platformSdk.playerInfo,r=t.gamer_id,n=t.gamer_name,o=t.gamer_avatar_url,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Cf);e.playerId=r||null,e.playerName=n||null,o&&e.playerPhotos.push(o),e.playerExtra=i,e._isPlayerAuthorized=!0}e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)},window.onBannerReady=function(){e._isBannerAvailable=!0},Ve("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,JSON.stringify(t))}))),t.promise}},{key:"preloadInterstitial",value:function(){Uf(this,Vf,zf).call(this)}},{key:"showInterstitial",value:function(){var e=this;Uf(this,Vf,zf).call(this).then((function(){var t;e._platformSdk.showAd(null===(t=window.AdType)||void 0===t?void 0:t.Interstitial,{onAdClosed:function(){e._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(t){console.error(t),e._setInterstitialState(i.FAILED)}}),e._setInterstitialState(i.OPENED),e._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){Uf(this,Wf,Zf).call(this)}},{key:"showRewarded",value:function(){var e=this;Uf(this,Wf,Zf).call(this).then((function(){var t;e._platformSdk.showAd(null===(t=window.AdType)||void 0===t?void 0:t.Rewarded,{onAdClosed:function(t){t&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(t){console.error(t),e._setRewardedState(a.FAILED)}}),e._setRewardedState(a.OPENED),e._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(e){var t,r=this;this._isBannerAvailable?null===(t=window.JGBanner)||void 0===t||t.loadBanner().then((function(){var t,n;r._setBannerState(s.SHOWN),null===(t=window.JGBanner)||void 0===t||t.showBanner(e||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(e){console.error(e),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var e;null===(e=window.JGBanner)||void 0===e||e.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(e,t,r){if(!r)return Promise.reject();var n="string"==typeof t?parseInt(t,10):t;return this._platformSdk.postScore(n),Promise.resolve()}}])&&Nf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Jf(e){return Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(e)}function Kf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Qf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qf(n.key),n)}}function Qf(e){var t=function(e,t){if("object"!=Jf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Jf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jf(t)?t:String(t)}function $f(){return $f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},$f.apply(this,arguments)}function ep(e,t){return ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ep(e,t)}function tp(e){return tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tp(e)}const rp=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ep(e,t)}(l,t);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tp(o);if(s){var r=tp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return e.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||$f(tp(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),Ve("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){Ze("PortalSDK").then((function(){e._platformSdk=window.PortalSDK,e._platformSdk.initialize().then((function(){e._platformSdk.initializeOverlay(),e._defaultStorageType=u.PLATFORM_INTERNAL,e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||$f(tp(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||$f(tp(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return Promise.resolve(n._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return $f(tp(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){if(!Array.isArray(t))return Promise.reject(new Error("Value must be an array if key is an array"));if(e.length!==t.length)return Promise.reject(new Error("Key and value arrays must have the same length"));var o=e.map((function(e,r){return Promise.resolve(n._platformSdk.setValue(e,t[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(e,t))}return $f(tp(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){var n=e.map((function(e){return Promise.resolve(r._platformSdk.removeValue(e))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(e))}return $f(tp(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.requestAd().then((function(){e._setInterstitialState(i.OPENED),e._setInterstitialState(i.CLOSED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.requestRewardAd().then((function(t){t?(e._setRewardedState(a.OPENED),e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):$f(tp(l.prototype),"sendMessage",this).call(this,e)}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e),n=this._getPromiseDecorator(y.PURCHASE);if(!n){n=this._createPromiseDecorator(y.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(e){var r=e.find((function(e){return e&&e.id===o}));if(!r)throw new Error("Shop item not found in catalog");return t._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=qf({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(y.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(y.PURCHASE,e)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t||!Array.isArray(t)||0===t.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(y.GET_CATALOG);return r||(r=this._createPromiseDecorator(y.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=t.map((function(e){var t=e.id,n=r.find((function(e){return e&&e.id===t}));return n?{id:e.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);e._resolvePromiseDecorator(y.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(y.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(y.GET_PURCHASES);return t||(t=this._createPromiseDecorator(y.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=e.id,n=r.find((function(e){return e.id===t}));return n?qf({id:n.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(y.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(y.GET_PURCHASES,t)}))),t.promise}}])&&Xf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function np(e){return np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(e)}function op(){op=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==np(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(np(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ip(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ap(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ip(i,n,o,a,s,"next",e)}function s(e){ip(i,n,o,a,s,"throw",e)}a(void 0)}))}}function sp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cp(n.key),n)}}function cp(e){var t=function(e,t){if("object"!=np(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=np(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==np(t)?t:String(t)}function up(){return up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},up.apply(this,arguments)}function lp(e,t){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lp(e,t)}function fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pp(e)}function dp(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function hp(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var yp=new WeakSet,mp=new WeakSet,vp=new WeakSet,_p=new WeakSet,gp=new WeakSet,Sp=new WeakSet,bp=new WeakSet,Ep=new WeakSet,Pp=new WeakSet,wp=new WeakSet;function Ap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent.postMessage({type:e,data:t},"*")}function Op(e){this._isPlayerAuthorized=e.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=e.playerId,this._playerName=e.playerName,e.playerPhoto&&this._playerPhotos.push(e.playerPhoto)),this._isInitialized=!0,this._resolvePromiseDecorator(y.INITIALIZE)}function kp(e){var t,r;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.GET_STORAGE_DATA,null!==(r=e.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(y.GET_STORAGE_DATA)}function Tp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.SET_STORAGE_DATA):this._rejectPromiseDecorator(y.SET_STORAGE_DATA)}function Dp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(y.DELETE_STORAGE_DATA)}function Ip(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.PURCHASE,e.data):this._rejectPromiseDecorator(y.PURCHASE,e.data)}function Rp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.GET_CATALOG,e.data):this._rejectPromiseDecorator(y.GET_CATALOG,e.data)}function Lp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.GET_PURCHASES,e.data):this._rejectPromiseDecorator(y.GET_PURCHASES,e.data)}function jp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.CREATE_POST):this._rejectPromiseDecorator(y.CREATE_POST)}function Cp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(y.JOIN_COMMUNITY):this._rejectPromiseDecorator(y.JOIN_COMMUNITY)}const Np=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lp(e,t)}(l,t);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pp(a);if(s){var r=pp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===np(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fp(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dp(fp(e=c.call.apply(c,[this].concat(r))),wp),dp(fp(e),Pp),dp(fp(e),Ep),dp(fp(e),bp),dp(fp(e),Sp),dp(fp(e),gp),dp(fp(e),_p),dp(fp(e),vp),dp(fp(e),mp),dp(fp(e),yp),e}return r=l,n=[{key:"platformId",get:function(){return e.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(y.INITIALIZE);return t||(window.addEventListener("message",(function(t){if("devvit-message"===t.data.type){var r=t.data.data.message;r.type===y.INITIALIZE?hp(e,mp,Op).call(e,r):r.type===y.GET_STORAGE_DATA?hp(e,vp,kp).call(e,r):r.type===y.SET_STORAGE_DATA?hp(e,_p,Tp).call(e,r):r.type===y.DELETE_STORAGE_DATA?hp(e,gp,Dp).call(e,r):r.type===y.GET_CATALOG?hp(e,bp,Rp).call(e,r):r.type===y.PURCHASE?hp(e,Sp,Ip).call(e,r):r.type===y.GET_PURCHASES?hp(e,Ep,Lp).call(e,r):r.type===y.CREATE_POST?hp(e,Pp,jp).call(e,r):r.type===y.JOIN_COMMUNITY&&hp(e,wp,Cp).call(e)}})),t=this._createPromiseDecorator(y.INITIALIZE),hp(this,yp,Ap).call(this,y.INITIALIZE)),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||up(pp(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||up(pp(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){if(t===u.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(y.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(y.GET_STORAGE_DATA),hp(this,yp,Ap).call(this,y.GET_STORAGE_DATA,{key:e})),n.promise}return up(pp(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=ap(op().mark((function e(t,r,n){var o;return op().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==u.PLATFORM_INTERNAL){e.next=4;break}return(o=this._getPromiseDecorator(y.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(y.SET_STORAGE_DATA),hp(this,yp,Ap).call(this,y.SET_STORAGE_DATA,{key:t,value:r})),e.abrupt("return",o.promise);case 4:return e.abrupt("return",up(pp(l.prototype),"setDataToStorage",this).call(this,t,r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=ap(op().mark((function e(t,r){var n;return op().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==u.PLATFORM_INTERNAL){e.next=4;break}return(n=this._getPromiseDecorator(y.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(y.DELETE_STORAGE_DATA),hp(this,yp,Ap).call(this,y.DELETE_STORAGE_DATA,{key:t})),e.abrupt("return",n.promise);case 4:return e.abrupt("return",up(pp(l.prototype),"deleteDataFromStorage",this).call(this,t,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(e){var t=this._getPromiseDecorator(y.PURCHASE);return t||(t=this._createPromiseDecorator(y.PURCHASE),hp(this,yp,Ap).call(this,y.PURCHASE,{id:e})),t.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var e=this._getPromiseDecorator(y.GET_CATALOG);return e||(e=this._createPromiseDecorator(y.GET_CATALOG),hp(this,yp,Ap).call(this,y.GET_CATALOG)),e.promise}},{key:"paymentsGetPurchases",value:function(){var e=this._getPromiseDecorator(y.GET_PURCHASES);return e||(e=this._createPromiseDecorator(y.GET_PURCHASES),hp(this,yp,Ap).call(this,y.GET_PURCHASES)),e.promise}},{key:"createPost",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPromiseDecorator(y.CREATE_POST);return t||(t=this._createPromiseDecorator(y.CREATE_POST),hp(this,yp,Ap).call(this,y.CREATE_POST,{options:e})),t.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(y.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(y.JOIN_COMMUNITY),hp(this,yp,Ap).call(this,y.JOIN_COMMUNITY)),e.promise}}],n&&sp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Gp(e){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(e)}function Bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mp(n.key),n)}}function Mp(e){var t=function(e,t){if("object"!=Gp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Gp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gp(t)?t:String(t)}function Hp(){return Hp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Up(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Hp.apply(this,arguments)}function Fp(e,t){return Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fp(e,t)}function xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Up(e)}var Vp=new WeakSet;function Wp(e){var t=document.createElement("ins");return t.style.display="block",t.classList.add("adsbygoogle"),t.setAttribute("data-ad-client",this._options.adSenseId),t.setAttribute("data-ad-slot",e),t.setAttribute("data-ad-format","auto"),t.setAttribute("data-container-id",c),t.setAttribute("data-full-width-responsive","true"),this._options.testMode&&t.setAttribute("data-adtest","on"),t}const zp=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fp(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Up(o);if(c){var r=Up(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xp(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=xp(e=u.call.apply(u,[this].concat(o))),r=Vp),r.add(t),e}return r=l,(n=[{key:"platformId",get:function(){return e.XIAOMI}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();try{window.funmax&&window.funmax.loadStart&&window.funmax.loadStart()}catch(e){console.error(e)}var t=this._getPromiseDecorator(y.INITIALIZE);return t||(t=this._createPromiseDecorator(y.INITIALIZE),this._options&&this._options.adSenseId&&this._options.hostId?We({adSenseId:this._options.adSenseId,hostId:this._options.hostId,testMode:!!this._options.testMode}).then((function(t){e._showAd=t,e._isInitialized=!0,e._resolvePromiseDecorator(y.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(y.INITIALIZE,t)})):this._rejectPromiseDecorator(y.INITIALIZE,k)),t.promise}},{key:"sendMessage",value:function(e){return e===f.GAME_READY?new Promise((function(e){try{window.funmax&&window.funmax.loadReady&&window.funmax.loadReady()}catch(e){console.error(e)}e()})):Hp(Up(l.prototype),"sendMessage",this).call(this,e)}},{key:"showBanner",value:function(e,t){if(!this._bannerContainer){this._bannerPlacement=t,this._bannerContainer=ze(e);var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,Vp,Wp).call(this,t);this._bannerContainer.appendChild(r),this._setBannerState(s.SHOWN)}}},{key:"hideBanner",value:function(){var e;null===(e=this._bannerContainer)||void 0===e||e.remove(),this._bannerContainer=null,this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(e){var t=this;this._showAd?this._showAd({type:"start",name:e,beforeAd:function(){t._setInterstitialState(i.OPENED)},afterAd:function(){t.interstitialState!==i.FAILED&&t._setInterstitialState(i.CLOSED)},adBreakDone:function(e){"viewed"!==e.breakStatus&&t._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(e){var t=this;this._showAd?this._showAd({type:"reward",name:e,beforeAd:function(){t._setRewardedState(a.OPENED)},afterAd:function(){t.rewardedState!==a.FAILED&&t._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){},adViewed:function(){t._setRewardedState(a.REWARDED)},adBreakDone:function(e){"frequencyCapped"!==e.breakStatus&&"other"!==e.breakStatus||t._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}}])&&Bp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Vn);function Zp(e){return Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(e)}function Yp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=qp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qp(n.key),n)}}function qp(e){var t=function(e,t){if("object"!=Zp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zp(t)?t:String(t)}function Xp(e,t){$p(e,t),t.add(e)}function Qp(e,t,r){$p(e,t),t.set(e,r)}function $p(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ed(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,nd(e,t,"set"),r),r}function td(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function rd(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,nd(e,t,"get"))}function nd(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var od=new WeakMap,id=new WeakMap,ad=new WeakMap,sd=new WeakMap,cd=new WeakMap,ud=new WeakSet,ld=new WeakSet,fd=new WeakSet;function pd(t){var r,n=e.MOCK,o=new URL(window.location.href);if(t.forciblySetPlatformId)n=td(this,ld,dd).call(this,t.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=td(this,ld,dd).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=e.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=e.PLAYDECK:o.hash.includes("tgWebAppData")?n=e.TELEGRAM:o.hostname.includes("y8")?n=e.Y8:o.hostname.includes("fbsbx")?n=e.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=e.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=e.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=e.BITQUEST:o.hostname.includes("eponesh.")?n=e.GAMEPUSH:o.hostname.includes("discordsays.com")?n=e.DISCORD:o.hostname.includes("usercontent.goog")?n=e.YOUTUBE:o.hostname.includes("portalapp.")?n=e.PORTAL:o.hostname.includes("devvit.")&&(n=e.REDDIT)}var a=t;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=qe(a,a.platforms[n])),delete a.platforms,n){case e.VK:ed(this,ad,new oo(a));break;case e.YANDEX:ed(this,ad,new ko(a));break;case e.CRAZY_GAMES:ed(this,ad,new ui(a));break;case e.ABSOLUTE_GAMES:ed(this,ad,new bi(a));break;case e.GAME_DISTRIBUTION:ed(this,ad,new Li(a));break;case e.OK:ed(this,ad,new Ca(a));break;case e.PLAYGAMA:ed(this,ad,new $a(a));break;case e.PLAYDECK:ed(this,ad,new ys(a));break;case e.TELEGRAM:ed(this,ad,new Ls(a));break;case e.Y8:ed(this,ad,new Xs(a));break;case e.LAGGED:ed(this,ad,new oc(a));break;case e.FACEBOOK:ed(this,ad,new jc(a));break;case e.POKI:ed(this,ad,new Pu(a));break;case e.QA_TOOL:ed(this,ad,new mu(a));break;case e.MSN:ed(this,ad,new Yu(a));break;case e.HUAWEI:ed(this,ad,new Ll(a));break;case e.BITQUEST:ed(this,ad,new Yl(a));break;case e.GAMEPUSH:ed(this,ad,new uf(a));break;case e.DISCORD:ed(this,ad,new gf(a));break;case e.YOUTUBE:ed(this,ad,new Lf(a));break;case e.JIO_GAMES:ed(this,ad,new Yf(a));break;case e.PORTAL:ed(this,ad,new rp(a));break;case e.REDDIT:ed(this,ad,new Np(a));break;case e.XIAOMI:ed(this,ad,new zp(a));break;default:ed(this,ad,new Vn(a))}}function dd(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function hd(e){return rd(this,od)||console.error(m),rd(this,sd)[e]}const yd=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Xp(this,fd),Xp(this,ld),Xp(this,ud),Qp(this,od,{writable:!0,value:!1}),Qp(this,id,{writable:!0,value:null}),Qp(this,ad,{writable:!0,value:null}),Qp(this,sd,{writable:!0,value:{}}),Qp(this,cd,{writable:!0,value:"javascript"})}var c,p;return c=r,(p=[{key:"version",get:function(){return"1.26.1"}},{key:"isInitialized",get:function(){return rd(this,od)}},{key:"options",get:function(){return rd(this,ad).options}},{key:"platform",get:function(){return td(this,fd,hd).call(this,t.PLATFORM)}},{key:"player",get:function(){return td(this,fd,hd).call(this,t.PLAYER)}},{key:"game",get:function(){return td(this,fd,hd).call(this,t.GAME)}},{key:"storage",get:function(){return td(this,fd,hd).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return td(this,fd,hd).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return td(this,fd,hd).call(this,t.SOCIAL)}},{key:"device",get:function(){return td(this,fd,hd).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return td(this,fd,hd).call(this,t.LEADERBOARDS)}},{key:"leaderboards",get:function(){return td(this,fd,hd).call(this,t.LEADERBOARDS)}},{key:"payments",get:function(){return td(this,fd,hd).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return td(this,fd,hd).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return td(this,fd,hd).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return td(this,fd,hd).call(this,t.CLIPBOARD)}},{key:"analytics",get:function(){return td(this,fd,hd).call(this,t.ANALYTICS)}},{key:"engine",get:function(){return rd(this,cd)},set:function(e){ed(this,cd,e)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return f}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"initialize",value:function(e){var r=this;if(rd(this,od))return Promise.resolve();if(!rd(this,id)){ed(this,id,new M);var n,o=performance.now(),i="./playgama-bridge-config.json";e&&e.configFilePath&&(i=e.configFilePath),fetch(i).then((function(e){return e.json()})).then((function(e){n=Jp({},e)})).catch((function(t){console.error("Config parsing error.",t),n=Jp({},e)})).finally((function(){td(r,ud,pd).call(r,n),rd(r,ad).engine=r.engine,rd(r,sd)[t.PLATFORM]=new Le(rd(r,ad)),rd(r,sd)[t.PLAYER]=new Me(rd(r,ad)),rd(r,sd)[t.GAME]=new it(rd(r,ad)),rd(r,sd)[t.STORAGE]=new ft(rd(r,ad)),rd(r,sd)[t.ADVERTISEMENT]=new Er(rd(r,ad)),rd(r,sd)[t.SOCIAL]=new Tr(rd(r,ad)),rd(r,sd)[t.DEVICE]=new Cr(rd(r,ad)),rd(r,sd)[t.LEADERBOARDS]=new Yr(rd(r,ad)),rd(r,sd)[t.PAYMENTS]=new $r(rd(r,ad)),rd(r,sd)[t.REMOTE_CONFIG]=new an(rd(r,ad)),rd(r,sd)[t.CLIPBOARD]=new pn(rd(r,ad)),rd(r,sd)[t.ACHIEVEMENTS]=new _n(rd(r,ad)),rd(r,sd)[t.ANALYTICS]=ge.initialize(rd(r,ad)),rd(r,ad).initialize().then((function(){var e,n;ed(r,od,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white");var i=((performance.now()-o)/1e3).toFixed(2);if(ge.send("initialization_completed",{time_s:i}),rd(r,id)&&(rd(r,id).resolve(),ed(r,id,null)),null!==(e=rd(r,ad).options)&&void 0!==e&&null!==(e=e.advertisement)&&void 0!==e&&null!==(e=e.interstitial)&&void 0!==e&&e.preloadOnStart){var a=rd(r,ad).options.advertisement.interstitial.preloadOnStart;rd(r,sd)[t.ADVERTISEMENT].preloadInterstitial(a)}if(null!==(n=rd(r,ad).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var s=rd(r,ad).options.advertisement.rewarded.preloadOnStart;rd(r,sd)[t.ADVERTISEMENT].preloadRewarded(s)}})).catch((function(e){var t=((performance.now()-o)/1e3).toFixed(2),r=(null==e?void 0:e.message)||String(e);ge.send("initialization_failed",{error:r,time_s:t}),console.error("PlaygamaBridge initialization failed:",e)})).finally((function(){setTimeout((function(){return rd(r,sd)[t.GAME].setLoadingProgress(100,!0)}),700)}))}))}return rd(this,id).promise}}])&&Kp(c.prototype,p),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge||window.playgamaBridge||(window.bridge=new yd,window.playgamaBridge=window.bridge)})()})();