(()=>{var t={258:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return a(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,a(r,t).push(n),r;function n(){i.call(r,t,n),e.apply(this,arguments)}},off:i,emit:function(t,e){var r=this,n=a(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,i)}))}return!!n.length}};function o(t){for(var e in n)t[e]=n[e];return t}function i(t,e){var n,o=this;if(arguments.length){if(e){if(n=a(o,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[r][t]=n}}else if((n=o[r])&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(t,e,n){if(!n||t[r]){var o=t[r]||(t[r]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit",XIAOMI:"xiaomi"},e={CORE:"core",PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements",ANALYTICS:"analytics"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed",ORIENTATION_STATE_CHANGED:"orientation_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={PORTRAIT:"portrait",LANDSCAPE:"landscape"},p="bridge-orientation-overlay",h={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},d="not_available",y="in_game",m="native",v="native_popup",_={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},g={SDK_NOT_INITIALIZED:{message:"Before using the SDK you must initialize it"},STORAGE_NOT_SUPPORTED:{message:"Storage not supported"},STORAGE_NOT_AVAILABLE:{message:"Storage not available"},GAME_PARAMS_NOT_FOUND:{message:"Game params are not found"},INVITE_FRIENDS_MESSAGE_LENGTH_ERROR:{message:"Message is too long"}};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function E(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:String(e)}function P(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function w(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,O(t,e,"set"),r),r}function A(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,O(t,e,"get"))}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var T=new WeakMap,k=new WeakMap,D=new WeakMap;const I=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,T,{writable:!0,value:void 0}),P(this,k,{writable:!0,value:void 0}),P(this,D,{writable:!0,value:void 0}),w(this,T,new Promise((function(t,r){w(e,k,t),w(e,D,r)})))}var e,r;return e=t,(r=[{key:"promise",get:function(){return A(this,T)}},{key:"resolve",value:function(t){A(this,k).call(this,t)}},{key:"reject",value:function(t){A(this,D).call(this,t)}}])&&b(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var R=r(258),L=r.n(R);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function C(t,e,r){return e&&N(t.prototype,e),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:String(e)}const M=C((function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=void 0,(n=G(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=e})),B=JSON.parse('{"i8":"1.28.0-preview.1"}');function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==x(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var V=["post","Message"].join(""),W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=document.createElement("script");o.src=t;for(var i=0;i<Object.keys(e).length;i++){var a=Object.keys(e)[i],s=e[a];o.setAttribute(a,s)}o.addEventListener("load",r),o.addEventListener("error",(function(){return n(new Error("Failed to load: ".concat(t)))})),document.head.appendChild(o)}))},z=function(t){var e=t.adSenseId,r=t.channelId,n=t.hostId,o=t.interstitialPlacementId,i=t.rewardedPlacementId,a=t.adFrequencyHint,s=void 0===a?"180s":a,c=t.testMode,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(t){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",a.setAttribute("data-ad-client",e),r?a.setAttribute("data-ad-channel",r):n&&a.setAttribute("data-ad-host",n),o&&a.setAttribute("data-admob-interstitial-slot",o),i&&a.setAttribute("data-admob-rewarded-slot",i),u&&a.setAttribute("data-adbreak-test","on"),a.setAttribute("data-ad-frequency-hint",s),a.setAttribute("crossorigin","anonymous"),a.addEventListener("load",(function(){window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push(U({preloadAdBreaks:"on",sound:"on",onReady:function(){}},l)),t((function(t){return window.adsbygoogle.push(t)}))})),document.head.appendChild(a)}))};function Z(t){var e=document.createElement("div");return e.id=c,e.style.position="absolute",document.body.appendChild(e),"top"===t?(e.style.top="0px",e.style.height="90px",e.style.width="100%"):(e.style.bottom="0px",e.style.height="90px",e.style.width="100%"),e}var Y=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))},J=function(t){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(t)},K=function(t,e){return void 0===t[e]?null:t[e]};function q(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))return t.reduce((function(t,n,o){if(t[o]=K(e,n),r)try{t[o]=JSON.parse(t[o])}catch(t){}return t}),new Array(t.length));var n=K(e,t);if(r&&"string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}function X(t,e){for(var r=U({},t),n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];i in t&&e[i]instanceof Object&&t[i]instanceof Object?r[i]=X(t[i],e[i]):r[i]=e[i]}return r}function Q(){var t=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),e=Date.now().toString(36);return"".concat(t).concat(e)}function $(){var t,e="bridge_player_guest_id";try{t=localStorage.getItem(e)}catch(t){}if(!t){t=Q();try{localStorage.setItem(e,t)}catch(t){}}return{id:t,name:"Guest ".concat(t)}}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent[V](t,e)}function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function ot(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:String(e)}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function ct(t,e){lt(t,e),e.add(t)}function ut(t,e,r){lt(t,e),e.set(t,r)}function lt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ft(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,dt(t,e,"get"))}function pt(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ht(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,dt(t,e,"set"),r),r}function dt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var yt=new WeakMap,mt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,St=new WeakMap,bt=new WeakSet,Et=new WeakSet,Pt=new WeakSet,wt=new WeakSet,At=new WeakSet,Ot=new WeakSet,Tt=new WeakSet;function kt(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():Q()}function Dt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{event_name:t,module:e,bridge_version:B.i8,platform_id:this._platformBridge.platformId,game_id:ft(this,_t),player_id:this._platformBridge.playerId,player_guest_id:ft(this,gt),session_id:ft(this,St),timestamp:(new Date).toISOString(),data:r}}function It(){if(0!==ft(this,yt).length){var e=function(t){if(Array.isArray(t))return rt(t)}(n=ft(this,yt))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();ht(this,yt,[]),ht(this,mt,null);var r="https://playgama.com/api/events/v2/bridge/analytics";this._platformBridge.platformId===t.DISCORD&&(r="/playgama/api/events/v2/bridge/analytics"),fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})}).then((function(t){if(!t.ok)throw new Error("Network response was not ok: ".concat(t.status))})).catch((function(t){console.error("Error sending analytics events:",t)}))}var n}function Rt(){var e,r=this._platformBridge.options;switch(this._platformBridge.platformId){case t.GAME_DISTRIBUTION:case t.Y8:e=r.gameId;break;case t.HUAWEI:e=r.appId;break;case t.MSN:e=r.gameId;break;case t.DISCORD:e=r.appId;break;case t.GAMEPUSH:e=r.projectId;break;default:e=null}return e||(e=pt(this,At,Lt).call(this,window.location.href)),e}function Lt(e){try{var r=new URL(e).pathname.split("/").filter(Boolean);switch(this._platformBridge.platformId){case t.YANDEX:var n=r.indexOf("app"),o=-1!==n?r[n+1]:null;if(o)return o;break;case t.LAGGED:var i=r.indexOf("g"),a=-1!==i?r[i+1]:null;if(a)return pt(this,Ot,jt).call(this,a);break;case t.CRAZY_GAMES:var s=r.indexOf("game"),c=-1!==s?r[s+1]:null;if(c)return pt(this,Ot,jt).call(this,c);break;case t.PLAYGAMA:var u=r.indexOf("game"),l=-1!==u?r[u+1]:null;if(l)return pt(this,Ot,jt).call(this,l);var f=r[0];if("string"==typeof f&&/^[a-z0-9]{10,}$/i.test(f))return f}}catch(t){return null}return null}function jt(t){return"string"!=typeof t||0===t.length?"":t.replace(/-/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))}function Nt(){var t=this;ft(this,vt)||ht(this,vt,setInterval((function(){t.send("".concat(e.CORE,"_ping"),e.CORE)}),15e3))}const Ct=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=st(o);if(i){var r=st(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return at(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),ct(at(t=a.call(this)),Tt),ct(at(t),Ot),ct(at(t),At),ct(at(t),wt),ct(at(t),Pt),ct(at(t),Et),ct(at(t),bt),ut(at(t),yt,{writable:!0,value:[]}),ut(at(t),mt,{writable:!0,value:null}),ut(at(t),vt,{writable:!0,value:null}),ut(at(t),_t,{writable:!0,value:null}),ut(at(t),gt,{writable:!0,value:null}),ut(at(t),St,{writable:!0,value:null}),ht(at(t),St,pt(at(t),bt,kt).call(at(t))),t}return r=s,n=[{key:"initialize",value:function(t){this._platformBridge=t,ht(this,_t,pt(this,wt,Rt).call(this)),ht(this,gt,$().id);var r=pt(this,Et,Dt).call(this,"".concat(e.CORE,"_initialization_started"),e.CORE);return ft(this,yt).push(r),pt(this,Tt,Nt).call(this),this}},{key:"send",value:function(t,e){var r,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==(null===(r=this._platformBridge.options)||void 0===r?void 0:r.sendAnalyticsEvents)){var i=window.location.href;if(!(i.startsWith("file://")||i.includes("localhost")||i.includes("127.0.0.1"))){var a=pt(this,Et,Dt).call(this,t,e,o);ft(this,yt).push(a),ft(this,mt)&&clearTimeout(ft(this,mt)),ht(this,mt,setTimeout((function(){pt(n,Pt,It).call(n)}),3e3))}}}}],n&&nt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(M));function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bt(n.key),n)}}function Bt(t){var e=function(t,e){if("object"!=Gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gt(e)?e:String(e)}function xt(t,e){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xt(t,e)}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ft(t)}function Ut(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Vt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Wt(t,e,"get"))}function Wt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var zt=new WeakMap,Zt=new WeakMap,Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(c,t);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ft(i);if(a){var r=Ft(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ht(t)}(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Ut(Ht(e=s.call(this,t)),zt,{writable:!0,value:!1}),Ut(Ht(e),Zt,{writable:!0,value:performance.now()}),e._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(t){return e.emit(n.AUDIO_STATE_CHANGED,t)})),e._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(t){return e.emit(n.PAUSE_STATE_CHANGED,t)})),e}return r=c,(o=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(t){var r,n,o={};if(t===h.GAME_READY){if(Vt(this,zt))return Promise.reject();n=!0,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=this,Wt(r,zt,"set"),n),o={time_s:((performance.now()-Vt(this,Zt))/1e3).toFixed(2)};var i=document.getElementById("loading-overlay");i&&i.remove()}return Ct.send("".concat(e.PLATFORM,"_message_").concat(t),e.PLATFORM,o),this._platformBridge.sendMessage(t)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getGameById(e)}return this._platformBridge.getGameById(t)}}])&&Mt(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(M);L().mixin(Yt.prototype);const Jt=Yt;function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function Xt(t){var e=function(t,e){if("object"!=Kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kt(e)?e:String(e)}function Qt(t,e){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qt(t,e)}function $t(t){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$t(t)}const te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qt(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$t(n);if(o){var r=$t(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.authorize(e)}return this._platformBridge.authorizePlayer(t)}}])&&qt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function ee(t){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(t)}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,se(n.key),n)}}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ie(t)}function ae(t,e,r){return(e=se(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function se(t){var e=function(t,e){if("object"!=ee(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ee(e)?e:String(e)}var ce=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(c,e);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ie(i);if(a){var r=ie(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oe(t)}(this,t)});function c(e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),ae(oe(r=s.call(this,e)),"_currentLoadingProgress",null),ae(oe(r),"_loadingProcessCompleted",!1),r._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(t){return r.emit(n.VISIBILITY_STATE_CHANGED,t)})),r._platformBridge.options.disableLoadingLogo||function(t){var e=document.createElement("style");e.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(e);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===t?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),h=document.createElementNS(f.namespaceURI,"mask");h.setAttribute("id","logo-mask");var d=document.createElementNS(f.namespaceURI,"rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","black"),h.appendChild(d),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("fill","white"),h.appendChild(e)})),p.appendChild(h);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(t){var e=t.offset,r=t.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",e),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("stroke",n.strokeColor),e.setAttribute("stroke-width","3"),f.appendChild(e)})),r.appendChild(f)}(r._platformBridge.platformId!==t.YANDEX&&r._platformBridge.options.showFullLoadingLogo),r}return r=c,o=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||e&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=t;var a=Math.max(0,Math.min(100,t)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],o&&re(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(M);L().mixin(ce.prototype);const ue=ce;function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pe(n.key),n)}}function pe(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:String(e)}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function de(t){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},de(t)}const ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=de(n);if(o){var r=de(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageSupported(t)}},{key:"isAvailable",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageAvailable(t)}},{key:"get",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e[this._platformBridge.platformId];if(n)return this.get(t,n,r)}var o=e;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?Array.isArray(t)&&0===t.length?Promise.resolve([]):this._platformBridge.getDataFromStorage(t,o,r):Promise.reject()}},{key:"set",value:function(t,e,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(t,e,n)}var o=r;if(o||(o=this.defaultType),!this._platformBridge.isStorageAvailable(o))return Promise.reject();if(Array.isArray(t)){if(!Array.isArray(e))return Promise.reject(new Error("Value must be an array when key is an array"));if(t.length!==e.length)return Promise.reject(new Error("Key and value arrays must have the same length"));if(0===t.length)return Promise.resolve()}return this._platformBridge.setDataToStorage(t,e,o)}},{key:"delete",value:function(t,e){if(e){var r=e[this._platformBridge.platformId];if(r)return this.delete(t,r)}var n=e;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?Array.isArray(t)&&0===t.length?Promise.resolve():this._platformBridge.deleteDataFromStorage(t,n):Promise.reject()}}],r&&fe(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_e(n.key),n)}}function _e(t){var e=function(t,e){if("object"!=me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==me(e)?e:String(e)}function ge(t,e){be(t,e),e.add(t)}function Se(t,e,r){be(t,e),e.set(t,r)}function be(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ee(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Pe(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ae(t,e,"set"),r),r}function we(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ae(t,e,"get"))}function Ae(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Oe="started",Te=new WeakMap,ke=new WeakMap,De=new WeakMap,Ie=new WeakMap,Re=new WeakSet,Le=new WeakSet,je=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,Le),ge(this,Re),Se(this,Te,{writable:!0,value:0}),Se(this,ke,{writable:!0,value:0}),Se(this,De,{writable:!0,value:"created"}),Se(this,Ie,{writable:!0,value:0}),Pe(this,Te,e)}var e,r;return e=t,(r=[{key:"state",get:function(){return we(this,De)}},{key:"start",value:function(){var t=this;we(this,De)!==Oe&&(Pe(this,ke,we(this,Te)),Ee(this,Re,Ne).call(this,Oe),Pe(this,Ie,setInterval((function(){Pe(t,ke,we(t,ke)-1),t.emit("time_left_changed",we(t,ke)),we(t,ke)<=0&&(Ee(t,Le,Ce).call(t),Ee(t,Re,Ne).call(t,"completed"))}),1e3)))}},{key:"stop",value:function(){Ee(this,Le,Ce).call(this),we(this,De)===Oe&&Ee(this,Re,Ne).call(this,"stopped")}}])&&ve(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ne(t){Pe(this,De,t),this.emit("state_changed",we(this,De))}function Ce(){clearInterval(we(this,Ie)),Pe(this,ke,0)}L().mixin(je.prototype);const Ge=je;function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xe(n.key),n)}}function xe(t){var e=function(t,e){if("object"!=Me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Me(e)?e:String(e)}function He(t,e){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},He(t,e)}function Fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ue(t)}function Ve(t,e){ze(t,e),e.add(t)}function We(t,e,r){ze(t,e),e.set(t,r)}function ze(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ze(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ke(t,e,"set"),r),r}function Ye(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Je(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ke(t,e,"get"))}function Ke(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var qe=new WeakMap,Xe=new WeakMap,Qe=new WeakMap,$e=new WeakMap,tr=new WeakMap,er=new WeakMap,rr=new WeakMap,nr=new WeakMap,or=new WeakMap,ir=new WeakSet,ar=new WeakSet,sr=new WeakSet,cr=new WeakSet,ur=new WeakSet,lr=new WeakSet,fr=new WeakSet,pr=new WeakSet,hr=new WeakSet,dr=new WeakSet,yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}(l,t);var e,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ue(o);if(c){var r=Ue(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fe(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Ve(Fe(e=u.call(this,t)),dr),Ve(Fe(e),hr),Ve(Fe(e),pr),Ve(Fe(e),fr),Ve(Fe(e),lr),Ve(Fe(e),ur),Ve(Fe(e),cr),Ve(Fe(e),sr),Ve(Fe(e),ar),Ve(Fe(e),ir),We(Fe(e),qe,{writable:!0,value:s.HIDDEN}),We(Fe(e),Xe,{writable:!0,value:null}),We(Fe(e),Qe,{writable:!0,value:null}),We(Fe(e),$e,{writable:!0,value:i.CLOSED}),We(Fe(e),tr,{writable:!0,value:null}),We(Fe(e),er,{writable:!0,value:void 0}),We(Fe(e),rr,{writable:!0,value:60}),We(Fe(e),nr,{writable:!0,value:a.CLOSED}),We(Fe(e),or,{writable:!0,value:null}),e._platformBridge.on(n.BANNER_STATE_CHANGED,(function(t){return Ye(Fe(e),fr,Er).call(Fe(e),t)})),e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(t){t===i.CLOSED&&Ye(Fe(e),ur,Sr).call(Fe(e)),Ye(Fe(e),pr,Pr).call(Fe(e),t)})),e._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(t){return Ye(Fe(e),hr,wr).call(Fe(e),t)})),Ye(Fe(e),sr,_r).call(Fe(e)),e}return e=l,r=[{key:"isBannerSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return Je(this,qe)}},{key:"isInterstitialSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return Je(this,$e)}},{key:"isRewardedSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return Je(this,or)}},{key:"rewardedState",get:function(){return Je(this,nr)}},{key:"minimumDelayBetweenInterstitial",get:function(){return Je(this,rr)}},{key:"setMinimumDelayBetweenInterstitial",value:function(t){if(null===Ye(this,ar,vr).call(this,Ye(this,cr,gr).call(this))){var e=Ye(this,ar,vr).call(this,t);null!==e&&Ye(this,ir,mr).call(this,e)}}},{key:"showBanner",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN){Ze(this,Xe,e);var n,o=r;if(o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback),Ze(this,Qe,o),Ye(this,fr,Er).call(this,s.LOADING),this.isBannerSupported){var i=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.placements,a=Ye(this,dr,Ar).call(this,o,i);this._platformBridge.showBanner(e,a)}else Ye(this,fr,Er).call(this,s.FAILED)}}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,i=Ye(this,dr,Ar).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Ye(this,lr,br).call(this)){var r,n=e;if(n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback),Ze(this,tr,n),Ye(this,pr,Pr).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&Je(this,er)&&Je(this,er).state===Oe)Ye(this,pr,Pr).call(this,i.FAILED);else{var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,a=Ye(this,dr,Ar).call(this,n,o);this._platformBridge.showInterstitial(a)}else Ye(this,pr,Pr).call(this,i.FAILED)}}},{key:"preloadRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,i=Ye(this,dr,Ar).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Ye(this,lr,br).call(this)){var r;Ze(this,or,e),Je(this,or)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&Ze(this,or,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,o=Ye(this,dr,Ar).call(this,Je(this,or),n);Ye(this,hr,wr).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):Ye(this,hr,wr).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Be(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(M);function mr(t){Ze(this,rr,t),Je(this,er)&&(Je(this,er).stop(),Ye(this,ur,Sr).call(this))}function vr(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseInt(t,10);return Number.isNaN(e)?null:e}return null}function _r(){var t=Ye(this,cr,gr).call(this);if(void 0!==t){var e=Ye(this,ar,vr).call(this,t);null!==e&&Ye(this,ir,mr).call(this,e)}}function gr(){var t;return null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.minimumDelayBetweenInterstitial}function Sr(){Je(this,rr)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(Ze(this,er,new Ge(Je(this,rr))),Je(this,er).start())}function br(){var t=[i.LOADING,i.OPENED].includes(Je(this,$e)),e=[a.LOADING,a.OPENED,a.REWARDED].includes(Je(this,nr));return t||e}function Er(t){Je(this,qe)!==t&&(Ze(this,qe,t),Ct.send("".concat(e.ADVERTISEMENT,"_banner_").concat(t),e.ADVERTISEMENT,{position:Je(this,Xe),placement:Je(this,Qe)}),this.emit(n.BANNER_STATE_CHANGED,Je(this,qe)))}function Pr(t){Je(this,$e)!==t&&(Ze(this,$e,t),Ct.send("".concat(e.ADVERTISEMENT,"_interstitial_").concat(t),e.ADVERTISEMENT,{placement:Je(this,tr)}),this.emit(n.INTERSTITIAL_STATE_CHANGED,Je(this,$e)))}function wr(t){Je(this,nr)!==t&&(Ze(this,nr,t),Ct.send("".concat(e.ADVERTISEMENT,"_rewarded_").concat(t),e.ADVERTISEMENT,{placement:Je(this,or)}),this.emit(n.REWARDED_STATE_CHANGED,Je(this,nr)))}function Ar(t,e){if(!t)return t;if(!e)return t;var r=e.find((function(e){return e.id===t}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:t}L().mixin(yr.prototype);const Or=yr;function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function kr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dr(n.key),n)}}function Dr(t){var e=function(t,e){if("object"!=Tr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tr(e)?e:String(e)}function Ir(t,e){return Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ir(t,e)}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(t)}const Lr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Rr(n);if(o){var r=Rr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.inviteFriends(e)}return this._platformBridge.inviteFriends(t)}},{key:"joinCommunity",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.joinCommunity(e)}return this._platformBridge.joinCommunity(t)}},{key:"share",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.share(e)}return this._platformBridge.share(t)}},{key:"createPost",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.createPost(e)}return this._platformBridge.createPost(t)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&kr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cr(n.key),n)}}function Cr(t){var e=function(t,e){if("object"!=jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jr(e)?e:String(e)}function Gr(t,e){return Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gr(t,e)}function Mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Br(t)}function xr(t,e){Fr(t,e),e.add(t)}function Hr(t,e,r){Fr(t,e),e.set(t,r)}function Fr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ur(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,zr(t,e,"set"),r),r}function Vr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Wr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,zr(t,e,"get"))}function zr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Zr=new WeakMap,Yr=new WeakMap,Jr=new WeakMap,Kr=new WeakMap,qr=new WeakSet,Xr=new WeakSet,Qr=new WeakSet,$r=new WeakSet,tn=new WeakSet,en=new WeakSet,rn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Br(n);if(o){var r=Br(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mr(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),xr(Mr(e=i.call(this,t)),en),xr(Mr(e),tn),xr(Mr(e),$r),xr(Mr(e),Qr),xr(Mr(e),Xr),xr(Mr(e),qr),Hr(Mr(e),Zr,{writable:!0,value:null}),Hr(Mr(e),Yr,{writable:!0,value:null}),Hr(Mr(e),Jr,{writable:!0,value:null}),Hr(Mr(e),Kr,{writable:!0,value:!1}),Vr(Mr(e),qr,nn).call(Mr(e)),e}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}},{key:"orientation",get:function(){return Wr(this,Zr)}}])&&Nr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function nn(){var t,e,r,n=this,o=this._platformBridge.deviceType;if(o===l.MOBILE||o===l.TABLET){var i=null===(t=this._platformBridge.options)||void 0===t?void 0:t.device;Ur(this,Kr,null!==(e=null==i?void 0:i.useBuiltInOrientationPopup)&&void 0!==e&&e),Ur(this,Jr,null!==(r=null==i?void 0:i.supportedOrientations)&&void 0!==r?r:[f.PORTRAIT,f.LANDSCAPE]),Ur(this,Zr,Vr(this,Xr,on).call(this)),window.screen.orientation?window.screen.orientation.addEventListener("change",(function(){return Vr(n,Qr,an).call(n)})):window.addEventListener("orientationchange",(function(){return Vr(n,Qr,an).call(n)})),window.addEventListener("resize",(function(){return Vr(n,Qr,an).call(n)})),Vr(this,$r,sn).call(this)}}function on(){var t;return null!==(t=window.screen.orientation)&&void 0!==t&&t.type?window.screen.orientation.type.includes("portrait")?f.PORTRAIT:f.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?f.PORTRAIT:f.LANDSCAPE:window.innerHeight>window.innerWidth?f.PORTRAIT:f.LANDSCAPE}function an(){var t=Vr(this,Xr,on).call(this);t!==Wr(this,Zr)&&(Ur(this,Zr,t),this.emit(n.ORIENTATION_STATE_CHANGED,Wr(this,Zr)),Vr(this,$r,sn).call(this))}function sn(){if(Wr(this,Kr))if(1===Wr(this,Jr).length){var t=Wr(this,Jr)[0];Wr(this,Zr)!==t?Vr(this,tn,cn).call(this):Vr(this,en,un).call(this)}else Vr(this,en,un).call(this)}function cn(){Wr(this,Yr)||(Ur(this,Yr,function(){if(!document.getElementById("bridge-orientation-overlay-styles")){var t=document.createElement("style");t.id="bridge-orientation-overlay-styles",t.textContent="\n            #".concat(p," {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.95);\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                z-index: 9999999;\n            }\n\n            #bridge-orientation-icon {\n                width: 80px;\n                height: 80px;\n                animation: bridge-rotate-phone 1.5s ease-in-out infinite;\n            }\n\n            #bridge-orientation-message {\n                color: #fff;\n                font-size: 18px;\n                font-family: Arial, sans-serif;\n                margin-top: 20px;\n                text-align: center;\n            }\n\n            @keyframes bridge-rotate-phone {\n                0%, 100% { transform: rotate(0deg); }\n                50% { transform: rotate(90deg); }\n            }\n        "),document.head.appendChild(t)}var e=document.createElement("div");e.id=p;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","bridge-orientation-icon"),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.innerHTML='\n        <rect x="5" y="2" width="14" height="20" rx="2" stroke="white" stroke-width="2"/>\n        <line x1="12" y1="18" x2="12" y2="18" stroke="white" stroke-width="2" stroke-linecap="round"/>\n    ';var n=document.createElement("div");return n.id="bridge-orientation-message",n.innerText="Please rotate your device",e.appendChild(r),e.appendChild(n),e}()),document.body.appendChild(Wr(this,Yr)))}function un(){Wr(this,Yr)&&(Wr(this,Yr).remove(),Ur(this,Yr,null))}L().mixin(rn.prototype);const ln=rn;function fn(t){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(t)}function pn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hn(n.key),n)}}function hn(t){var e=function(t,e){if("object"!=fn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fn(e)?e:String(e)}function dn(t,e){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dn(t,e)}function yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t){return mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mn(t)}function vn(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function _n(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var gn=new WeakSet,Sn=new WeakSet;function bn(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:t}function En(t){var e,r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return!1;var n=r.find((function(e){return e.id===t}));return!!n&&!0===n.isMain}const Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mn(n);if(o){var r=mn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yn(t)}(this,t)});function a(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return vn(yn(t=i.call.apply(i,[this].concat(r))),Sn),vn(yn(t),gn),t}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(t,e){var r=_n(this,gn,bn).call(this,t),n=_n(this,Sn,En).call(this,t);return this._platformBridge.leaderboardsSetScore(r,e,n)}},{key:"getEntries",value:function(t){var e=_n(this,gn,bn).call(this,t);return this._platformBridge.leaderboardsGetEntries(e)}},{key:"showNativePopup",value:function(t){var e=_n(this,gn,bn).call(this,t);return this._platformBridge.leaderboardsShowNativePopup(e)}}])&&pn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function An(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,On(n.key),n)}}function On(t){var e=function(t,e){if("object"!=wn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wn(e)?e:String(e)}function Tn(t,e){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tn(t,e)}function kn(t){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kn(t)}const Dn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kn(o);if(i){var r=kn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return r=s,(n=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(t,r){return Ct.send("".concat(e.PAYMENTS,"_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsPurchase(t,r).then((function(r){return Ct.send("".concat(e.PAYMENTS,"_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Ct.send("".concat(e.PAYMENTS,"_purchase_failed"),e.PAYMENTS,{id:t}),r}))}},{key:"getPurchases",value:function(){return Ct.send("".concat(e.PAYMENTS,"_get_purchases_started"),e.PAYMENTS),this._platformBridge.paymentsGetPurchases().then((function(t){return Ct.send("".concat(e.PAYMENTS,"_get_purchases_completed"),e.PAYMENTS),t})).catch((function(t){throw Ct.send("".concat(e.PAYMENTS,"_get_purchases_failed"),e.PAYMENTS),t}))}},{key:"getCatalog",value:function(){return Ct.send("".concat(e.PAYMENTS,"_get_catalog_started"),e.PAYMENTS),this._platformBridge.paymentsGetCatalog().then((function(t){return Ct.send("".concat(e.PAYMENTS,"_get_catalog_completed"),e.PAYMENTS),t})).catch((function(t){throw Ct.send("".concat(e.PAYMENTS,"_get_catalog_failed"),e.PAYMENTS),t}))}},{key:"consumePurchase",value:function(t){return Ct.send("".concat(e.PAYMENTS,"_consume_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsConsumePurchase(t).then((function(r){return Ct.send("".concat(e.PAYMENTS,"_consume_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Ct.send("".concat(e.PAYMENTS,"_consume_purchase_failed"),e.PAYMENTS,{id:t}),r}))}}])&&An(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(M);function In(t){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(t)}function Rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ln(n.key),n)}}function Ln(t){var e=function(t,e){if("object"!=In(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==In(e)?e:String(e)}function jn(t,e){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jn(t,e)}function Nn(t){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nn(t)}const Cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nn(n);if(o){var r=Nn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===In(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.get(e)}return this._platformBridge.getRemoteConfig(t)}}])&&Rn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function Gn(t){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(t)}function Mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bn(n.key),n)}}function Bn(t){var e=function(t,e){if("object"!=Gn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gn(e)?e:String(e)}function xn(t,e){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xn(t,e)}function Hn(t){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hn(t)}const Fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Hn(n);if(o){var r=Hn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(t){return this._platformBridge.clipboardWrite(t)}}])&&Mn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function Un(t){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(t)}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wn(n.key),n)}}function Wn(t){var e=function(t,e){if("object"!=Un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Un(e)?e:String(e)}function zn(t,e){return zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zn(t,e)}function Zn(t){return Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zn(t)}const Yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zn(n);if(o){var r=Zn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Un(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.unlock(e)}return this._platformBridge.unlockAchievement(t)}},{key:"getList",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getList(e)}return this._platformBridge.getAchievementsList(t)}},{key:"showNativePopup",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.showNativePopup(e)}return this._platformBridge.showAchievementsNativePopup(t)}}])&&Vn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(M);function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function Kn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qn(n.key),n)}}function qn(t){var e=function(t,e){if("object"!=Jn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jn(e)?e:String(e)}function Xn(t,e,r){Qn(t,e),e.set(t,r)}function Qn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $n(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function to(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ro(t,e,"get"))}function eo(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ro(t,e,"set"),r),r}function ro(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var no=new WeakMap,oo=new WeakMap,io=new WeakMap,ao=new WeakSet;function so(){var t=Object.values(to(this,no)).some((function(t){return!0===t}));to(this,oo)!==t&&(eo(this,oo,t),to(this,io).call(this,to(this,oo)))}const co=function(){function t(e,r){var n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Qn(this,n=ao),n.add(this),Xn(this,no,{writable:!0,value:{}}),Xn(this,oo,{writable:!0,value:!1}),Xn(this,io,{writable:!0,value:null}),eo(this,io,r),e.forEach((function(t){to(o,no)[t]=!1}))}var e,r;return e=t,(r=[{key:"setState",value:function(t,e){t in to(this,no)&&"boolean"==typeof e&&to(this,no)[t]!==e&&(to(this,no)[t]=e,$n(this,ao,so).call(this))}},{key:"getState",value:function(t){return t in to(this,no)&&to(this,no)[t]}},{key:"getAggregatedState",value:function(){return to(this,oo)}},{key:"resetAll",value:function(){var t=this;Object.keys(to(this,no)).forEach((function(e){to(t,no)[e]=!1})),$n(this,ao,so).call(this)}}])&&Kn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uo(t){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uo(t)}function lo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lo(Object(r),!0).forEach((function(e){ho(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yo(n.key),n)}}function ho(t,e,r){return(e=yo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yo(t){var e=function(t,e){if("object"!=uo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uo(e)?e:String(e)}function mo(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var vo=new WeakMap,_o=function(){function e(t){var r,i,a,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ho(this,"_isInitialized",!1),ho(this,"_platformSdk",null),ho(this,"_isPlayerAuthorized",!1),ho(this,"_playerId",null),ho(this,"_playerName",null),ho(this,"_playerPhotos",[]),ho(this,"_playerExtra",{}),ho(this,"_visibilityState",null),ho(this,"_localStorage",null),ho(this,"_defaultStorageType",u.LOCAL_STORAGE),ho(this,"_platformStorageCachedData",null),ho(this,"_isBannerSupported",!1),ho(this,"_paymentsPurchases",[]),ho(this,"_pauseStateAggregator",null),ho(this,"_audioStateAggregator",null),a={writable:!0,value:{}},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=vo),i.set(r,a);try{this._localStorage=window.localStorage}catch(t){}this._visibilityState=document.visibilityState;var c=["interstitial","rewarded","visibility","platform"];this._pauseStateAggregator=new co(c,(function(t){return s.emit(n.PAUSE_STATE_CHANGED,t)})),this._audioStateAggregator=new co(c,(function(t){return s.emit(n.AUDIO_STATE_CHANGED,!t)})),document.addEventListener("visibilitychange",(function(){s._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){s._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){s._setVisibilityState(o.VISIBLE)})),t&&(this._options=fo({},t))}var r,c;return r=e,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return t.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var t=navigator.language;return"string"==typeof t?t.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!this._audioStateAggregator||!this._audioStateAggregator.getAggregatedState()}},{key:"isPlatformPaused",get:function(){return!!this._pauseStateAggregator&&this._pauseStateAggregator.getAggregatedState()}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(t,e){fetch("https://playgama.com/api/v1/timestamp/now").then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(e){t(1e3*e.timestamp)})).catch((function(){e()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(this._getDataFromLocalStorage(t[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(t,r);return Promise.resolve(i)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,e,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this._setDataToLocalStorage(t[n],e[n]);return Promise.resolve()}return this._setDataToLocalStorage(t,e),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this._deleteDataFromLocalStorage(t[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(t),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var t=document.createElement("div");t.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",t.style.position="absolute",t.style.left="-9999px",t.style.width="1px",t.style.height="1px",document.body.appendChild(t);var e={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e).then((function(e){e.redirected?r(e.redirected):window.setTimeout((function(){var e,n=0===t.offsetHeight||"none"===(null===(e=window.getComputedStyle(t))||void 0===e?void 0:e.display);r(n),t.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(t){if(this.isPaymentsSupported){var e={id:t};return this._paymentsPurchases.push(e),Promise.resolve(e)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(t){if(this.isPaymentsSupported){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));return e<0?Promise.reject():(this._paymentsPurchases.splice(e,1),Promise.resolve({id:t}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(t){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(t):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(t,e){var r=this._localStorage.getItem(t);if(e&&"string"==typeof r)try{r=JSON.parse(r)}catch(t){}return r}},{key:"_setDataToLocalStorage",value:function(t,e){this._localStorage.setItem(t,"object"===uo(e)?JSON.stringify(e):e)}},{key:"_deleteDataFromLocalStorage",value:function(t){this._localStorage.removeItem(t)}},{key:"_setVisibilityState",value:function(t){if(this._visibilityState!==t){this._visibilityState=t,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState);var e=t===o.HIDDEN;this._pauseStateAggregator&&this._pauseStateAggregator.setState("visibility",e),this._audioStateAggregator&&this._audioStateAggregator.setState("visibility",e)}}},{key:"_setBannerState",value:function(t){this.emit(n.BANNER_STATE_CHANGED,t)}},{key:"_setInterstitialState",value:function(t){this.emit(n.INTERSTITIAL_STATE_CHANGED,t);var e=t===i.OPENED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("interstitial",e),this._audioStateAggregator&&this._audioStateAggregator.setState("interstitial",e)}},{key:"_setRewardedState",value:function(t){this.emit(n.REWARDED_STATE_CHANGED,t);var e=t===a.OPENED||t===a.REWARDED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("rewarded",e),this._audioStateAggregator&&this._audioStateAggregator.setState("rewarded",e)}},{key:"_setAudioState",value:function(t){this._audioStateAggregator?this._audioStateAggregator.setState("platform",!t):this.emit(n.AUDIO_STATE_CHANGED,t)}},{key:"_setPauseState",value:function(t){this._pauseStateAggregator?this._pauseStateAggregator.setState("platform",t):this.emit(n.PAUSE_STATE_CHANGED,t)}},{key:"_createPromiseDecorator",value:function(t){var e=new I;return mo(this,vo)[t]=e,e}},{key:"_getPromiseDecorator",value:function(t){return mo(this,vo)[t]}},{key:"_resolvePromiseDecorator",value:function(t,e){mo(this,vo)[t]&&(mo(this,vo)[t].resolve(e),delete mo(this,vo)[t])}},{key:"_rejectPromiseDecorator",value:function(t,e){mo(this,vo)[t]&&(mo(this,vo)[t].reject(e),delete mo(this,vo)[t])}},{key:"_paymentsGetProductsPlatformData",value:function(){var t=this;return this._options.payments?this._options.payments.map((function(e){var r=fo({},e[t.platformId]);return r.platformProductId=r.id,r.id=e.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));if(!r)return null;var n=fo({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(t){return"".concat(t,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(t){var e,r=this;return(null===(e=this._options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.useBuiltInErrorPopup)?function(t){if(!document.getElementById("bridge-info-popup-styles")){var e=document.createElement("style");e.id="bridge-info-popup-styles",e.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(e)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(t){o.onclick=function(){n.style.display="none",r.style.display="none",t()},r.style.display="block",n.style.display="flex"}))}().then((function(){t?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(t?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var t=$();this._playerId=t.id,this._playerName=t.name}}])&&po(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();L().mixin(_o.prototype);const go=_o;function So(t){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(t)}function bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,To(n.key),n)}}function Eo(){return Eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ao(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Eo.apply(this,arguments)}function Po(t,e){return Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Po(t,e)}function wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ao(t){return Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(t)}function Oo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function To(t){var e=function(t,e){if("object"!=So(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==So(e)?e:String(e)}function ko(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Do(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Io(t,e,"get"))}function Io(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ro=new WeakMap,Lo=new WeakSet;function jo(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(t);return i||(i=this._createPromiseDecorator(t),this._platformSdk.send(e,n).then((function(e){e[o]?r._resolvePromiseDecorator(t):r._rejectPromiseDecorator(t)})).catch((function(e){r._rejectPromiseDecorator(t,e)}))),i.promise}const No=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ao(o);if(c){var r=Ao(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===So(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wo(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Oo(e=wo(t=f.call.apply(f,[this].concat(o))),r=Lo),r.add(e),function(t,e,r){(e=To(e))in t?Object.defineProperty(t,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[e]=true}(wo(t),"_isBannerSupported"),function(t,e,r){Oo(t,e),e.set(t,{writable:!0,value:void 0})}(wo(t),Ro),t}return r=p,(n=[{key:"platformId",get:function(){return t.VK}},{key:"platformLanguage",get:function(){var t=new URL(window.location.href);if(t.searchParams.has("language")){var e=t.searchParams.get("language"),r=0;try{r=parseInt(e,10)}catch(t){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Eo(Ao(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var t=new URL(window.location.href);return t.searchParams.has("hash")?t.searchParams.get("hash"):Eo(Ao(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(Do(this,Ro)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return Eo(Ao(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Do(this,Ro)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r,n,o=this._getPromiseDecorator(_.INITIALIZE);if(!o){o=this._createPromiseDecorator(_.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(e=this,r=Ro,n=i.searchParams.get("platform"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,Io(e,r,"set"),n)),W("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Y("vkBridge").then((function(){t._platformSdk=window.vkBridge,t._platformSdk.send("VKWebAppInit").then((function(){t._platformSdk.send("VKWebAppGetUserInfo").then((function(e){e&&(t._playerId=e.id,t._playerName="".concat(e.first_name," ").concat(e.last_name),e.photo_100&&t._playerPhotos.push(e.photo_100),e.photo_200&&t._playerPhotos.push(e.photo_200),e.photo_max_orig&&t._playerPhotos.push(e.photo_max_orig))})).finally((function(){t._isInitialized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Eo(Ao(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Eo(Ao(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(t)){var o=[];return i.forEach((function(t){var e=n.keys.findIndex((function(e){return e.key===t}));if(e<0)o.push(null);else if(""!==n.keys[e].value){var i=n.keys[e].value;if(r)try{i=JSON.parse(n.keys[e].value)}catch(t){}o.push(i)}else o.push(null)})),void e(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(t){}e(a)}else e(null)})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?o(t.error_data.error_reason):o()}))})):Eo(Ao(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a={key:t[i],value:e[i]};"string"!=typeof e[i]&&(a.value=JSON.stringify(e[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:t,value:e};return"string"!=typeof e&&(s.value=JSON.stringify(e)),new Promise((function(t,e){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){t()})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?e(t.error_data.error_reason):e()}))}))}return Eo(Ao(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.setDataToStorage(t[n],"",e));return Promise.all(r)}return this.setDataToStorage(t,"",e)}return Eo(Ao(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:t}).then((function(t){t.result?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(e){e.result&&t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(e){e.result&&t._setInterstitialState(i.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(e){t._setInterstitialState(e.result?i.CLOSED:i.FAILED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result&&t._setRewardedState(a.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return ko(this,Lo,jo).call(this,_.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(t){if(!t||!t.groupId)return Promise.reject();var e=t.groupId;return"string"==typeof e&&(e=parseInt(e,10),Number.isNaN(e))?Promise.reject():ko(this,Lo,jo).call(this,_.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:e}).then((function(){window.open("https://vk.com/public".concat(e))}))}},{key:"share",value:function(t){var e={};return t&&t.link&&(e.link=t.link),ko(this,Lo,jo).call(this,_.SHARE,"VKWebAppShare",e,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?ko(this,Lo,jo).call(this,_.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return ko(this,Lo,jo).call(this,_.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(t){return ko(this,Lo,jo).call(this,_.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:t})}}])&&bo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(go);function Co(t){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Co(t)}function Go(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Go(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=xo(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xo(n.key),n)}}function xo(t){var e=function(t,e){if("object"!=Co(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Co(e)?e:String(e)}function Ho(){return Ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ho.apply(this,arguments)}function Fo(t,e){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fo(t,e)}function Uo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vo(t){return Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vo(t)}function Wo(t,e,r){zo(t,e),e.set(t,r)}function zo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Yo(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ko(t,e,"set"),r),r}function Jo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ko(t,e,"get"))}function Ko(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var qo=new WeakMap,Xo=new WeakMap,Qo=new WeakMap,$o=new WeakMap,ti=new WeakSet;function ei(){var t=this;return new Promise((function(e){var r=!1;t._options&&t._options.useSignedData&&(r=t._options.useSignedData),t._platformSdk.getPlayer({signed:r}).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized=e.isAuthorized(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var n=e.getName();""!==n&&(t._playerName=n),t._playerPhotos=[];var o=e.getPhoto("small"),i=e.getPhoto("medium"),a=e.getPhoto("large");return o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),a&&t._playerPhotos.push(a),t._playerExtra={payingStatus:e.getPayingStatus()},r&&(t._playerExtra.signature=e.signature),Yo(t,Xo,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){e()}))}))}const ri=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fo(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vo(o);if(c){var r=Vo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Co(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Uo(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return zo(e=Uo(t=f.call.apply(f,[this].concat(o))),r=ti),r.add(e),Wo(Uo(t),qo,{writable:!0,value:!1}),Wo(Uo(t),Xo,{writable:!0,value:null}),Wo(Uo(t),Qo,{writable:!0,value:null}),Wo(Uo(t),$o,{writable:!0,value:null}),t}return r=p,(n=[{key:"platformId",get:function(){return t.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():Ho(Vo(p.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():Ho(Vo(p.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return Ho(Vo(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Jo(this,qo)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("/sdk.js").then((function(){Y("YaGames","init").then((function(){window.YaGames.init().then((function(e){var r;t._platformSdk=e,Yo(t,$o,Zo(t,ti,ei).call(t));var n=null===(r=t._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.28.0-preview.1"}),o=t._platformSdk.shortcut.canShowPrompt().then((function(e){Yo(t,qo,e.canShow)})),i=new Promise((function(t){setTimeout(t,1e3)})),a=Promise.race([o,i]),c=t._platformSdk.getPayments().then((function(e){Yo(t,Qo,e)}));t._isBannerSupported=!0;var u=t._platformSdk.adv.getBannerAdvStatus().then((function(e){e.stickyAdvIsShowing&&t._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:var e;return null===(e=this._platformSdk.features.LoadingAPI)||void 0===e||e.ready(),Promise.resolve();case h.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case h.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return Ho(Vo(p.prototype),"sendMessage",this).call(this,t)}}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var t=this;return new Promise((function(e,r){t._platformSdk.features.GamesAPI.getAllGames().then((function(t){var r=t.games;e(r)})).catch(r)}))}},{key:"getGameById",value:function(t){var e=this;return null!=t&&t.gameId?new Promise((function(r,n){e._platformSdk.features.GamesAPI.getGameByID(null==t?void 0:t.gameId).then((function(t){var e=t.game,n=t.isAvailable;r(Mo(Mo({},e),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var t=this,e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(Yo(this,$o,Zo(this,ti,ei).call(this)),Jo(this,$o).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){Yo(t,$o,Zo(t,ti,ei).call(t)),Jo(t,$o).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ho(Vo(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ho(Vo(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Jo(this,$o).then((function(){return new Promise((function(e){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var i=void 0===n._platformStorageCachedData[t[o]]?null:n._platformStorageCachedData[t[o]];r.push(i)}e(r)}else e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}))})):Promise.reject():Ho(Vo(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Jo(this,$o).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Mo({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;Jo(n,Xo).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))}))})):Promise.reject():Ho(Vo(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Jo(this,$o).then((function(){return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?Mo({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];Jo(r,Xo).setData(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}))})):Promise.reject():Ho(Vo(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.adv.hideBannerAdv().then((function(e){e.stickyAdvIsShowing||t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){t._setInterstitialState(i.OPENED)},onClose:function(e){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)},onError:function(t){console.error(t)}}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(t){t(!1)}))}},{key:"addToHomeScreen",value:function(){var t=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(e){"accepted"!==e.outcome?t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN):t._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN)})).catch((function(e){t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN,e)}))),e.promise}},{key:"rate",value:function(){var t=this,e=this._getPromiseDecorator(_.RATE);return e||(e=this._createPromiseDecorator(_.RATE),this._platformSdk.feedback.canReview().then((function(e){e.value?t._platformSdk.feedback.requestReview().then((function(e){e.feedbackSent?t._resolvePromiseDecorator(_.RATE):t._rejectPromiseDecorator(_.RATE)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)})):t._rejectPromiseDecorator(_.RATE,e.reason)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(t,e).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(t,n).then((function(t){var r;r=t&&t.entries.length>0?t.entries.map((function(t){return{id:t.player.uniqueID,name:t.player.publicName,score:t.score,rank:t.rank,photo:t.player.getAvatarSrc("large")}})):[],e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this;if(!Jo(this,Qo))return Promise.reject();var r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),Jo(this,Qo).purchase(r).then((function(r){var n=Mo({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this;if(!Jo(this,Qo))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),Jo(this,Qo).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!Jo(this,Qo))return Promise.reject();var e=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Jo(this,Qo).getCatalog().then((function(r){var n=e.map((function(t){var e,n=r.find((function(e){return e.id===t.id}));return{id:t.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(e=n.getPriceCurrencyImage)||void 0===e?void 0:e.call(n,"medium")}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!Jo(this,Qo))return Promise.reject();var e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Jo(this,Qo).getPurchases().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=Mo({id:r.find((function(e){return e.id===t.productID})).id},t.purchaseData);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"getRemoteConfig",value:function(t){var e=this;if(!this._platformSdk)return Promise.reject();var r=t;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(t){e._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,t)})).catch((function(t){e._rejectPromiseDecorator(_.GET_REMOTE_CONFIG,t)}))),n.promise}},{key:"clipboardWrite",value:function(t){var e=this,r=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(_.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(t).then((function(){e._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)})).catch((function(t){e._rejectPromiseDecorator(_.CLIPBOARD_WRITE,t)}))),r.promise}}])&&Bo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(go);function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function oi(){oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ni(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ni(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ii(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ai(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ii(i,n,o,a,s,"next",t)}function s(t){ii(i,n,o,a,s,"throw",t)}a(void 0)}))}}function si(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?si(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=li(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,li(n.key),n)}}function li(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ni(e)?e:String(e)}function fi(){return fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=di(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},fi.apply(this,arguments)}function pi(t,e){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pi(t,e)}function hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function di(t){return di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},di(t)}function yi(t,e){vi(t,e),e.add(t)}function mi(t,e,r){vi(t,e),e.set(t,r)}function vi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _i(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function gi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,bi(t,e,"set"),r),r}function Si(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,bi(t,e,"get"))}function bi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ei="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",Pi="https://store.xsolla.com/api/v2/project/",wi=new WeakMap,Ai=new WeakMap,Oi=new WeakMap,Ti=new WeakSet,ki=new WeakSet,Di=new WeakSet,Ii=new WeakSet;function Ri(){var t=this;return Si(this,Ai)?new Promise((function(e,r){t._platformSdk.user.getUser().then((function(n){if(!n)return t._playerApplyGuestData(),void r();t._isPlayerAuthorized=!0,n.username&&(t._playerName=n.username),n.profilePictureUrl&&(t._playerPhotos=[n.profilePictureUrl]),t._playerExtra=n,t._options.useUserToken?t._platformSdk.user.getUserToken().then((function(e){t._playerExtra.jwt=e})).finally((function(){e()})):e()})).catch((function(e){t._playerApplyGuestData(),r(e)}))})):(this._playerApplyGuestData(),Promise.reject())}function Li(){return ji.apply(this,arguments)}function ji(){return(ji=ai(oi().mark((function t(){return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.XPayStationWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,W(Ei);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ni(){return Ci.apply(this,arguments)}function Ci(){return(Ci=ai(oi().mark((function t(){var e;return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._platformSdk.user.getXsollaUserToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Gi(t,e,r){return Mi.apply(this,arguments)}function Mi(){return(Mi=ai(oi().mark((function t(e,r,n){var o;return oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Pi,"/").concat(e,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=t.sent).ok){t.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return t.abrupt("return",o.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const Bi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pi(t,e)}(d,e);var r,n,o,f,p=(o=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=di(o);if(f){var r=di(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ni(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hi(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return yi(hi(t=p.call.apply(p,[this].concat(r))),Ii),yi(hi(t),Di),yi(hi(t),ki),yi(hi(t),Ti),mi(hi(t),wi,{writable:!0,value:!1}),mi(hi(t),Ai,{writable:!0,value:!1}),mi(hi(t),Oi,{writable:!0,value:{adStarted:function(){Si(hi(t),wi)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED)},adFinished:function(){Si(hi(t),wi)?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setInterstitialState(i.CLOSED)},adError:function(){Si(hi(t),wi)?t._setRewardedState(a.FAILED):t._setInterstitialState(i.FAILED)}}}),t}return r=d,(n=[{key:"platformId",get:function(){return t.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Si(this,Ai)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():fi(di(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return Si(this,Ai)}},{key:"isPaymentsSupported",get:function(){return!0===Si(this,Ai)}},{key:"deviceType",get:function(){if(Si(this,Ai)){var t=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(t))return t}return fi(di(d.prototype),"deviceType",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Y("CrazyGames","SDK","init").then((function(){t._platformSdk=window.CrazyGames.SDK,t._defaultStorageType=u.PLATFORM_INTERNAL,t._isBannerSupported=!0,t._platformSdk.init().then((function(){gi(t,Ai,t._platformSdk.user.isUserAccountAvailable);var e=_i(t,Ti,Ri).call(t);t.options.xsollaProjectId&&_i(t,ki,Li).call(t),Promise.all([e]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(!Si(this,Ai))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){_i(t,Ti,Ri).call(t).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case h.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case h.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return fi(di(d.prototype),"sendMessage",this).call(this,t)}}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||fi(di(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||fi(di(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){if(Array.isArray(t)){var o=[];return t.forEach((function(t){var e=n._platformSdk.data.getItem(t);if(r)try{e=JSON.parse(e)}catch(t){}o.push(e)})),void e(o)}var i=n._platformSdk.data.getItem(t);if(r)try{i=JSON.parse(i)}catch(t){}e(i)})):fi(di(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(t)){for(var o=0;o<t.length;o++){var i=e[o];"string"!=typeof e[o]&&(i=JSON.stringify(e[o])),n._platformSdk.data.setItem(t[o],i)}r()}else{var a=e;"string"!=typeof e&&(a=JSON.stringify(e)),n._platformSdk.data.setItem(t,a),r()}})):fi(di(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?Array.isArray(t)?(t.forEach((function(t){return r._platformSdk.data.removeItem(t)})),Promise.resolve()):(this._platformSdk.data.removeItem(t),Promise.resolve()):fi(di(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Z(t)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){gi(this,wi,!1),this._platformSdk.ad.requestAd("midgame",Si(this,Oi))}},{key:"showRewarded",value:function(){gi(this,wi,!0),this._platformSdk.ad.requestAd("rewarded",Si(this,Oi))}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ad.hasAdblock().then((function(t){e(t)}))}))}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),_i(this,ki,Li).call(this).then((function(){return _i(e,Di,Ni).call(e)})).then((function(t){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:t,sandbox:e.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var c=s.order_id||s.invoice;if(!c)return;_i(e,Ii,Gi).call(e,e.options.xsollaProjectId,c,t).then((function(t){e._platformSdk.analytics.trackOrder("xsolla",t);var o=ci({id:r.id,sku:n,orderId:c},t);e._paymentsPurchases.push(o),i||(i=!0,e._resolvePromiseDecorator(_.PURCHASE,o))})).catch((function(t){i||e._rejectPromiseDecorator(_.PURCHASE,t)}))}}catch(t){i||e._rejectPromiseDecorator(_.PURCHASE,t)}})),o.on("close",(function(){i||e._rejectPromiseDecorator(_.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),_i(this,Di,Ni).call(this).then((function(e){return fetch("".concat(Pi,"/").concat(t.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla catalog HTTP ".concat(t.status));return t.json()})).then((function(r){var n=new Map((r.items||[]).map((function(t){return[t.sku,t]}))),o=e.map((function(t){var e,r,o,i,a,s,c,u,l,f,p=t.platformProductId||t.id,h=n.get(p);return{id:t.id,name:null!==(e=null!==(r=null==h?void 0:h.name)&&void 0!==r?r:t.name)&&void 0!==e?e:t.id,description:null!==(o=null!==(i=null==h?void 0:h.description)&&void 0!==i?i:t.description)&&void 0!==o?o:"",price:null!==(a=null==h||null===(s=h.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==h||null===(u=h.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==h||null===(f=h.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(_.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(_.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})}catch(t){this._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),_i(this,Di,Ni).call(this).then((function(e){return fetch("".concat(Pi,"/").concat(t.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla inventory HTTP ".concat(t.status));return t.json()})).then((function(e){var r=t._paymentsGetProductsPlatformData()||[];t._paymentsPurchases=(e.items||[]).map((function(t){var e=r.find((function(e){return e.id===t.sku}));return e?ci({id:e.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}])&&ui(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(go);function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Hi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Vi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vi(n.key),n)}}function Vi(t){var e=function(t,e){if("object"!=xi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xi(e)?e:String(e)}function Wi(){return Wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Wi.apply(this,arguments)}function zi(t,e){return zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zi(t,e)}function Zi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yi(t){return Yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yi(t)}var Ji=new WeakSet;function Ki(){var t=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(e){t._platformSdk.getUsers([t._playerId],(function(r){if(r&&1===r.length){var n=r[0];t._playerName=n.full_name,""!==n.avatar&&(t._playerPhotos=[n.avatar])}e()}))}))}const qi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zi(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yi(o);if(s){var r=Yi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zi(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Zi(t=c.call.apply(c,[this].concat(o))),r=Ji),r.add(e),t}return r=l,(n=[{key:"platformId",get:function(){return t.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){t._platformSdk=new window.AgRuSdk,t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(e,r){"rewarded"===e.type?null===r?e.status?t._setRewardedState(a.OPENED):(e.reward&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED):null===r?e.status?t._setInterstitialState(i.OPENED):t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)}));var e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,Ji,Ki).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._resolvePromiseDecorator(_.INITIALIZE)}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,r)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Wi(Yi(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Wi(Yi(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,r){if(n._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===n._platformStorageCachedData[t[i]]?null:n._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(t)){for(var a=[],s=0;s<t.length;s++){var c=void 0===n._platformStorageCachedData[t[s]]?null:n._platformStorageCachedData[t[s]];a.push(c)}return void e(a)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else r(i)})):r()})):Wi(Yi(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Fi({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.setSaveData(i,(function(t,e){null===e&&(n._platformStorageCachedData=i,r()),o(e)}))}else o()})):Wi(Yi(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Fi({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.setSaveData(o,(function(t,i){null===i&&(r._platformStorageCachedData=o,e()),n(i)}))}else n()})):Wi(Yi(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&Ui(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Xi(t){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function Qi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$i(n.key),n)}}function $i(t){var e=function(t,e){if("object"!=Xi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xi(e)?e:String(e)}function ta(t,e){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ta(t,e)}function ea(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ra(t){return ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ra(t)}function na(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ia(t,e,"set"),r),r}function oa(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ia(t,e,"get"))}function ia(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var aa=new WeakMap;const sa=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ta(t,e)}(p,e);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ra(o);if(l){var r=ra(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Xi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ea(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=ea(t=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=aa),r.set(e,n),t}return r=p,(n=[{key:"platformId",get:function(){return t.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var e=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(t){switch(t.name){case"SDK_READY":e._platformSdk=window.gdsdk,e._isInitialized=!0,e.showInterstitial(),e._resolvePromiseDecorator(_.INITIALIZE);break;case"SDK_GAME_START":oa(e,aa)?(e._setRewardedState(a.CLOSED),e._platformSdk.preloadAd("rewarded")):e._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":oa(e,aa)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":e._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,W("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return t.promise}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Z(t)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var t=this;na(this,aa,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){t._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var t=this;na(this,aa,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){t._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&Qi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(go);function ca(t){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(t)}function ua(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_a(n.key),n)}}function la(){return la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ha(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},la.apply(this,arguments)}function fa(t,e){return fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fa(t,e)}function pa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ha(t){return ha=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ha(t)}function da(t,e){ma(t,e),e.add(t)}function ya(t,e,r){ma(t,e),e.set(t,r)}function ma(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function va(t,e,r){return(e=_a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _a(t){var e=function(t,e){if("object"!=ca(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ca(e)?e:String(e)}function ga(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Sa(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ba(t,e,"get"))}function ba(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ea="AUTHORIZED",Pa={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},wa=new WeakMap,Aa=new WeakMap,Oa=new WeakMap,Ta=new WeakMap,ka=new WeakSet,Da=new WeakSet,Ia=new WeakSet,Ra=new WeakSet,La=new WeakSet,ja=new WeakSet,Na=new WeakSet,Ca=new WeakSet,Ga=new WeakSet,Ma=new WeakSet,Ba=new WeakSet,xa=new WeakSet,Ha=new WeakSet,Fa=new WeakSet,Ua=new WeakSet,Va=new WeakSet;function Wa(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(t){return{method:"users.hasAppPermission",ext_perm:t}}}}function za(){var t=this;return{userProfileCallback:function(e,r,n){return ga(t,ka,Ya).call(t,e,r,n)},hasValueAccessCallback:function(e,r,n){return ga(t,Ia,Ka).call(t,r,n)}}}function Za(){var t=this;return{showPermissions:function(){return ga(t,Ra,qa).call(t)},loadAd:function(e){return ga(t,La,Xa).call(t,e)},showLoadedAd:function(e,r){return ga(t,ja,Qa).call(t,r)},showAd:function(e,r){return ga(t,Na,$a).call(t,r)},requestBannerAds:function(e,r){return ga(t,Ca,ts).call(t,e,r)},showBannerAds:function(e,r){return ga(t,Ma,rs).call(t,r)},hideBannerAds:function(e,r){return ga(t,Ga,es).call(t,r)},setBannerFormat:function(e){return ga(t,Ba,ns).call(t,e)},showInvite:function(e){return ga(t,xa,os).call(t,e)},showRatingDialog:function(e,r){return ga(t,Ha,is).call(t,e,r)},joinGroup:function(e,r){return ga(t,Fa,as).call(t,e,r)},showLoginSuggestion:function(e,r){return ga(t,Da,Ja).call(t,e,r)},postMediatopic:function(e,r){return ga(t,Ua,ss).call(t,e,r)},isAdBlockEnabled:function(e,r){return ga(t,Va,cs).call(t,e,r)}}}function Ya(t,e){"ok"===t&&(this._playerId=e.uid,this._playerName=e.name,this._playerPhotos=[e.pic50x50,e.pic128x128,e.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(Sa(this,Aa).hasAppPermission(Pa.VALUABLE_ACCESS),Sa(this,Oa).hasValueAccessCallback)}function Ja(t,e){if("error"===t)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function Ka(t){if(this._hasValuableAccessPermission=!!t,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(_.INITIALIZE);else{var e=Object.values(Pa).map((function(t){return'"'.concat(t,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(e,"]"))}}function qa(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(Sa(this,Aa).hasAppPermission(Pa.VALUABLE_ACCESS),Sa(this,Oa).hasValueAccessCallback)}function Xa(t){"error"===t?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Qa(t){switch(t){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function $a(t){switch(t){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function ts(t,e){if("error"!==t)switch(e){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",Sa(this,wa));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function es(t){t?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function rs(t){t||this._setBannerState(s.FAILED)}function ns(t){"error"===t?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function os(t){"error"===t?this._rejectPromiseDecorator(_.INVITE_FRIENDS):this._resolvePromiseDecorator(_.INVITE_FRIENDS)}function is(t,e){"error"===t?this._rejectPromiseDecorator(_.RATE,e):this._resolvePromiseDecorator(_.RATE)}function as(t,e){"error"===t?this._rejectPromiseDecorator(_.JOIN_COMMUNITY,e):this._resolvePromiseDecorator(_.JOIN_COMMUNITY)}function ss(t,e){"error"===t?this._rejectPromiseDecorator(_.CREATE_POST,e):this._resolvePromiseDecorator(_.CREATE_POST)}function cs(t,e){"ok"===t?this._resolvePromiseDecorator(_.ADBLOCK_DETECT,"true"===e):this._rejectPromiseDecorator(_.ADBLOCK_DETECT)}const us=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fa(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ha(o);if(s){var r=ha(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pa(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return da(pa(t=c.call.apply(c,[this].concat(r))),Va),da(pa(t),Ua),da(pa(t),Fa),da(pa(t),Ha),da(pa(t),xa),da(pa(t),Ba),da(pa(t),Ma),da(pa(t),Ga),da(pa(t),Ca),da(pa(t),Na),da(pa(t),ja),da(pa(t),La),da(pa(t),Ra),da(pa(t),Ia),da(pa(t),Da),da(pa(t),ka),ya(pa(t),Ta,{get:Za,set:void 0}),ya(pa(t),Oa,{get:za,set:void 0}),ya(pa(t),Aa,{get:Wa,set:void 0}),va(pa(t),"_hasValuableAccessPermission",!1),va(pa(t),"_hasValuableAccessPermissionShowed",!1),va(pa(t),"_platformBannerOptions",{}),ya(pa(t),wa,{writable:!0,value:null}),t}return r=l,(n=[{key:"platformId",get:function(){return t.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("//api.ok.ru/js/fapi5.js").then((function(){Y("FAPI").then((function(){t._platformSdk=window.FAPI,window.API_callback=function(e,r,n){return Sa(t,Ta)[e](r,n)};var e=t._platformSdk.Util.getRequestParameters()||{};e.api_server&&e.apiconnection?t._platformSdk.init(e.api_server,e.apiconnection,(function(){var e,r=null===(e=t._platformSdk)||void 0===e?void 0:e.saved_state;t._isPlayerAuthorized=!r||r===Ea,t._isPlayerAuthorized?t._platformSdk.Client.call(Sa(t,Aa).userProfile,Sa(t,Oa).userProfileCallback):(t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE))}),(function(){t._rejectPromiseDecorator(_.INITIALIZE)})):t._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)}))}))),e.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(Ea)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||la(ha(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:la(ha(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(e,o){var i=Array.isArray(t)?t:[t],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(t)){var u=[];return i.forEach((function(t){if(""!==c[t]&&void 0!==c[t]){var e=c[t];if(r)try{e=JSON.parse(c[t])}catch(t){}u.push(e)}else u.push(null)})),void e(u)}if(""===c[t]||void 0===c[t])return void e(null);var l=c[t];if(r)try{l=JSON.parse(c[t])}catch(t){}e(l)}else o(s)}))})):Promise.reject(g.STORAGE_NOT_AVAILABLE):la(ha(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var o=Array.isArray(t)?t:[t],i=Array.isArray(t)?e:[e],a=[],s=function(){var t=o[c],e=i[c];"string"!=typeof e&&(e=JSON.stringify(e));var r={method:"storage.set",key:t,value:e},s=new Promise((function(t,e){n._platformSdk.Client.call(r,(function(r,n){n?t():e()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return la(ha(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var n=Array.isArray(t)?t:[t],o=[],i=function(){var t={method:"storage.set",key:n[a]},e=new Promise((function(e,n){r._platformSdk.Client.call(t,(function(t,r){r?e():n()}))}));o.push(e)},a=0;a<n.length;a++)i();return Promise.all(o)}return la(ha(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(t){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(t){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(t){var e,r;r=t,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e=this,ba(e,wa,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var t=this._getPromiseDecorator(_.ADBLOCK_DETECT);return t||(t=this._createPromiseDecorator(_.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),t.promise}},{key:"inviteFriends",value:function(t){var e=(t||{}).text;if(!t||"string"!=typeof e)return Promise.reject();var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),e.length>120?this._rejectPromiseDecorator(_.INVITE_FRIENDS,g.INVITE_FRIENDS_MESSAGE_LENGTH_ERROR):this._platformSdk.UI.showInvite(e)),r.promise}},{key:"rate",value:function(){var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._platformSdk.UI.showRatingDialog()),t.promise}},{key:"createPost",value:function(t){if(!t||null==t||!t.media)return Promise.reject();var e,r=this._getPromiseDecorator(_.CREATE_POST);return r||(r=this._createPromiseDecorator(_.CREATE_POST),this._platformSdk.UI.postMediatopic(t,null!==(e=t.status)&&void 0!==e&&e)),r.promise}},{key:"joinCommunity",value:function(t){if(!t||null==t||!t.groupId)return Promise.reject();var e,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(t.groupId,null!==(e=t.enableMessages)&&void 0!==e&&e)),r.promise}}])&&ua(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function ls(t){return ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(t)}function fs(){fs=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ls(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ls(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ps(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function hs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ds(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hs(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ms(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ms(n.key),n)}}function ms(t){var e=function(t,e){if("object"!=ls(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ls(e)?e:String(e)}function vs(){return vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ss(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},vs.apply(this,arguments)}function _s(t,e){return _s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_s(t,e)}function gs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ss(t){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ss(t)}function bs(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Es(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Ps=new WeakSet,ws=new WeakSet;function As(){var t=this;return new Promise((function(e){t._platformSdk.userService.getUser().then((function(e){return e.isAuthorized?(t._isPlayerAuthorized=!0,t._playerId=e.id,t._playerName=e.name,t._playerPhotos=e.photos,t._playerExtra=e,t._defaultStorageType=u.PLATFORM_INTERNAL,Es(t,ws,Os).call(t,[])):(t._playerApplyGuestData(),Promise.resolve())})).catch((function(){t._playerApplyGuestData()})).finally((function(){e()}))}))}function Os(t){return Ts.apply(this,arguments)}function Ts(){var t;return t=fs().mark((function t(e){var r,n=arguments;return fs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(n.length>1&&void 0!==n[1])||n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)})),Ts=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ps(i,n,o,a,s,"next",t)}function s(t){ps(i,n,o,a,s,"throw",t)}a(void 0)}))},Ts.apply(this,arguments)}const ks=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_s(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ss(o);if(s){var r=Ss(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ls(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gs(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return bs(gs(t=c.call.apply(c,[this].concat(r))),ws),bs(gs(t),Ps),t}return r=l,(n=[{key:"platformId",get:function(){return t.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||vs(Ss(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://developer.playgama.com/sdk/v1.js").then((function(){Y("PLAYGAMA_SDK").then((function(){t._platformSdk=window.PLAYGAMA_SDK,t._platformSdk.advService.subscribeToAdStateChanges((function(e,r){if("interstitial"===e)switch(r){case"open":t._setInterstitialState(i.OPENED);break;case"empty":case"error":t._setInterstitialState(i.FAILED);break;case"close":t._setInterstitialState(i.CLOSED)}else if("rewarded"===e)switch(r){case"open":t._setRewardedState(a.OPENED);break;case"empty":case"error":t._setRewardedState(a.FAILED);break;case"rewarded":t._setRewardedState(a.REWARDED);break;case"close":t._setRewardedState(a.CLOSED)}})),Es(t,Ps,As).call(t).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameService.gameReady(),Promise.resolve()):vs(Ss(l.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||vs(Ss(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:vs(Ss(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Es(this,ws,Os).call(this,t,r):Promise.reject():vs(Ss(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?ds({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]="string"!=typeof e[i]?JSON.stringify(e[i]):e[i];else o[t]="string"!=typeof e?JSON.stringify(e):e;return this._platformSdk.storageApi.setItems(o),vs(Ss(l.prototype),"setDataToStorage",this).call(this,t,e,r);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;switch(e){case u.PLATFORM_INTERNAL:return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?ds({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(t)?t:[t]),vs(Ss(l.prototype),"deleteDataFromStorage",this).call(this,t,e);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"showInterstitial",value:function(){this._platformSdk.advService.showInterstitial()}},{key:"showRewarded",value:function(){this._platformSdk.advService.showRewarded()}},{key:"authorizePlayer",value:function(t){var e=this,r=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Es(this,Ps,As).call(this,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){Es(e,Ps,As).call(e,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),r.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(e){if("PAID"===e.status){var n=ds({id:t},e);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(_.PURCHASE,n)}else r._rejectPromiseDecorator(_.PURCHASE,e.error)})).catch((function(t){r._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));return Promise.resolve(e)}}])&&ys(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Ds(t){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(t)}function Is(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ms(n.key),n)}}function Ls(){return Ls="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ls.apply(this,arguments)}function js(t,e){return js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},js(t,e)}function Ns(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cs(t){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cs(t)}function Gs(t,e,r){return(e=Ms(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ms(t){var e=function(t,e){if("object"!=Ds(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ds(e)?e:String(e)}function Bs(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function xs(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Fs(t,e,"set"),r),r}function Hs(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Fs(t,e,"get"))}function Fs(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Us=new WeakMap,Vs=new WeakMap;const Ws=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&js(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cs(o);if(s){var r=Cs(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ds(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ns(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Bs(Ns(t=c.call.apply(c,[this].concat(r))),Us,{writable:!0,value:void 0}),Bs(Ns(t),Vs,{writable:!0,value:void 0}),Gs(Ns(t),"_defaultStorageType",u.PLATFORM_INTERNAL),Gs(Ns(t),"_isPlayerAuthorized",!0),t}return r=l,n=[{key:"platformId",get:function(){return t.PLAYDECK}},{key:"platformLanguage",get:function(){return Hs(this,Us)?Hs(this,Us):Ls(Cs(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.addEventListener("message",(function e(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;t._playerId=i.telegramId,t._playerPhotos=[i.avatar],t._playerName=i.username,xs(t,Us,i.locale),xs(t,Vs,i.params),window.removeEventListener("message",e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}}})),tt({playdeck:{method:"getUserProfile"}},"*")),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_OVER:return tt({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case h.GAME_READY:return tt({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return Ls(Cs(l.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":t._setInterstitialState(i.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setInterstitialState(i.FAILED),window.removeEventListener("message",e)}})),tt({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setRewardedState(a.OPENED);break;case"rewardedAd":t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"skipAd":t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setRewardedState(a.FAILED),window.removeEventListener("message",e)}})),tt({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ls(Cs(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Ls(Cs(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?new Promise((function(e){var r={},n=Array.isArray(t)?t:[t];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(t)?t.map((function(t){return r[t]})):r[t];e(c)}}})),n.forEach((function(t){return tt({playdeck:{method:"getData",key:t}},"*")}))})):Ls(Cs(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(t)?t:[t],o=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));n.forEach((function(t,e){return tt({playdeck:{method:"setData",key:t,value:o[e]}},"*")})),r()})):Ls(Cs(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return tt({playdeck:{method:"setData",key:t,value:""}},"*")})),e()})):Ls(Cs(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(){var t=this,e=this._getPromiseDecorator(_.SHARE);return e||(e=this._createPromiseDecorator(_.SHARE),window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",e),t._resolvePromiseDecorator(_.SHARE))})),tt({playdeck:{method:"customShare",value:Hs(this,Vs)}},"*")),e.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),window.addEventListener("message",(function t(e){var r=e.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(tt({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",t))})),window.addEventListener("message",(function e(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",e);var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Is(Object(r),!0).forEach((function(e){Gs(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:t},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(_.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",e),r._rejectPromiseDecorator(_.PURCHASE,i.value))})),tt({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Stars"),priceCurrencyCode:"Stars",priceValue:t.amount}}));return Promise.resolve(e)}}],n&&Rs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function zs(t){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(t)}function Zs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$s(n.key),n)}}function Ys(){return Ys="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ys.apply(this,arguments)}function Js(t,e){return Js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Js(t,e)}function Ks(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qs(t){return qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qs(t)}function Xs(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Qs(t,e,r){return(e=$s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $s(t){var e=function(t,e){if("object"!=zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zs(e)?e:String(e)}function tc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,rc(t,e,"set"),r),r}function ec(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,rc(t,e,"get"))}function rc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var nc=new WeakMap,oc=new WeakMap,ic=new WeakMap,ac=new WeakMap;const sc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Js(t,e)}(f,e);var r,n,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qs(o);if(s){var r=qs(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ks(t)}(this,t)});function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qs(Ks(t=c.call.apply(c,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),Qs(Ks(t),"_isPlayerAuthorized",!0),Xs(Ks(t),nc,{writable:!0,value:void 0}),Xs(Ks(t),oc,{writable:!0,value:void 0}),Xs(Ks(t),ic,{writable:!0,value:{onStart:function(){return t._setRewardedState(a.OPENED)},onSkip:function(){return t._setRewardedState(a.CLOSED)},onReward:function(){return t._setRewardedState(a.REWARDED)},onError:function(){return t._setRewardedState(a.FAILED)}}}),Xs(Ks(t),ac,{writable:!0,value:{onStart:function(){return t._setInterstitialState(i.OPENED)},onSkip:function(){return t._setInterstitialState(i.CLOSED)},onError:function(){return t._setInterstitialState(i.FAILED)}}}),t}return r=f,(n=[{key:"platformId",get:function(){return t.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:Ys(qs(f.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!ec(this,oc)}},{key:"isRewardedSupported",get:function(){return!!ec(this,oc)}},{key:"deviceType",get:function(){switch(ec(this,nc)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return Ys(qs(f.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://telegram.org/js/telegram-web-app.js").then((function(){t._platformSdk=window.Telegram.WebApp;var e=t._platformSdk.initDataUnsafe.user;t._playerId=e.id,t._playerName=[e.first_name,e.last_name].filter(Boolean).join(" "),t._playerPhotos=[e.photo_url],tc(t,nc,t._platformSdk.platform),t._isInitialized=!0,t._options&&t._options.adsgramBlockId?W("https://sad.adsgram.ai/js/sad.min.js").then((function(){tc(t,oc,window.Adsgram.init({blockId:t._options.adsgramBlockId}))})).finally((function(){t._resolvePromiseDecorator(_.INITIALIZE)})):t._resolvePromiseDecorator(_.INITIALIZE)}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):Ys(qs(f.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ys(qs(f.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Ys(qs(f.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Array.isArray(t)?n._platformSdk.CloudStorage.getItems(t,(function(n,i){if(n)o(n);else{var a=[];t.forEach((function(t){var e=i[t];if(r&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}a.push(e)})),e(a)}})):n._platformSdk.CloudStorage.getItem(t,(function(t,n){t&&o(t);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(t){}e(i)}))})):Ys(qs(f.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(t)?t:[t],i=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));o.forEach((function(t,e){return n._platformSdk.CloudStorage.setItem(t,i[e])})),r()})):Ys(qs(f.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return r._platformSdk.CloudStorage.removeItem(t)})),e()})):Ys(qs(f.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;ec(this,oc)?(ec(this,oc).addEventListener("onStart",ec(this,ac).onStart),ec(this,oc).addEventListener("onSkip",ec(this,ac).onSkip),ec(this,oc).addEventListener("onError",ec(this,ac).onError),ec(this,oc).addEventListener("onBannerNotFound",ec(this,ac).onError),ec(this,oc).show().finally((function(){ec(t,oc).removeEventListener("onStart",ec(t,ac).onStart),ec(t,oc).removeEventListener("onSkip",ec(t,ac).onSkip),ec(t,oc).removeEventListener("onError",ec(t,ac).onError),ec(t,oc).removeEventListener("onBannerNotFound",ec(t,ac).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;ec(this,oc)?(ec(this,oc).addEventListener("onStart",ec(this,ic).onStart),ec(this,oc).addEventListener("onSkip",ec(this,ic).onSkip),ec(this,oc).addEventListener("onReward",ec(this,ic).onReward),ec(this,oc).addEventListener("onError",ec(this,ic).onError),ec(this,oc).addEventListener("onBannerNotFound",ec(this,ic).onError),ec(this,oc).show().finally((function(){ec(t,oc).addEventListener("onStart",ec(t,ic).onStart),ec(t,oc).addEventListener("onSkip",ec(t,ic).onSkip),ec(t,oc).addEventListener("onReward",ec(t,ic).onReward),ec(t,oc).addEventListener("onError",ec(t,ic).onError),ec(t,oc).addEventListener("onBannerNotFound",ec(t,ic).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var t=this,e=this._getPromiseDecorator(_.CLIPBOARD_READ);return e||(e=this._createPromiseDecorator(_.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(e){e?t._resolvePromiseDecorator(_.CLIPBOARD_READ,e):t._rejectPromiseDecorator(_.CLIPBOARD_READ)}))),e.promise}}])&&Zs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(go);var cc=["player"];function uc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uc(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=hc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fc(t){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(t)}function pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hc(n.key),n)}}function hc(t){var e=function(t,e){if("object"!=fc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fc(e)?e:String(e)}function dc(){return dc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},dc.apply(this,arguments)}function yc(t,e){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yc(t,e)}function mc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vc(t){return vc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vc(t)}function _c(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function gc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Sc="userData",bc="6129580795478709",Ec=new WeakSet,Pc=new WeakSet;function wc(){var t=this;return new Promise((function(e,r){t._platformStorageCachedData?e(t._platformStorageCachedData):t._platformSdk.api("user_data/retrieve","POST",{key:Sc},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(t){}t._platformStorageCachedData=o,e(o)}))}))}function Ac(t){if("ok"===t.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var e=t.authResponse.details,r=e.pid,n=e.locale,o=e.nickname,i=e.first_name,a=e.last_name,s=e.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(t){return!!t})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const Oc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vc(o);if(s){var r=vc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _c(mc(t=c.call.apply(c,[this].concat(r))),Pc),_c(mc(t),Ec),t}return r=l,(n=[{key:"platformId",get:function(){return t.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.gameId?W("https://cdn.y8.com/api/sdk.js").then((function(){Y("ID").then((function(){t._platformSdk=window.ID,t._platformSdk.Event.subscribe("id.init",(function(){z({adSenseId:t._options.channelId?"ca-pub-".concat(bc):t._options.adsenseId,channelId:t._options.channelId,hostId:"ca-host-pub-".concat(bc)}).then((function(e){t._showAd=e})),t._platformSdk.getLoginStatus((function(e){gc(t,Pc,Ac).call(t,e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))})),t._platformSdk.init({appId:t._options.gameId})}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.login((function(n){gc(t,Pc,Ac).call(t,n),"ok"===n.status?(t._platformStorageCachedData=null,e()):r()}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||dc(vc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:dc(vc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){gc(n,Ec,wc).call(n).then((function(n){var o=(Array.isArray(t)?t:[t]).map((function(t){var e=n[t];return r||"object"!==fc(e)||null===e?null!=e?e:null:JSON.stringify(e)}));e(o)})).catch(o)})):dc(vc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){gc(n,Ec,wc).call(n).then((function(i){var a=lc({},i);if(Array.isArray(t))for(var s=0;s<t.length;s++)a[t[s]]=e[s];else a[t]=e;n._platformSdk.api("user_data/submit","POST",{key:Sc,value:JSON.stringify(a)},(function(t){"ok"===t.status?(n._platformStorageCachedData=a,r()):o(t)}))})).catch(o)})):dc(vc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){gc(r,Ec,wc).call(r).then((function(o){var i=lc({},o);if(Array.isArray(t))for(var a=0;a<t.length;a++)delete i[t[a]];else delete i[t];r._platformSdk.api("user_data/submit","POST",{key:Sc,value:JSON.stringify(i)},(function(t){"ok"===t.status?(r._platformStorageCachedData=i,e()):n(t)}))})).catch(n)})):dc(vc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){t._setInterstitialState(i.OPENED)},afterAd:function(){t.interstitialState!==i.FAILED&&t._setInterstitialState(i.CLOSED)},adBreakDone:function(e){"viewed"!==e.breakStatus&&t._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){t._setRewardedState(a.OPENED)},afterAd:function(){t.rewardedState!==a.FAILED&&t._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){t._setRewardedState(a.FAILED)},adViewed:function(){t._setRewardedState(a.REWARDED)},adBreakDone:function(e){"frequencyCapped"!==e.breakStatus&&"other"!==e.breakStatus||t._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={table:t,points:e};this._platformSdk.GameAPI.Leaderboards.save(o,(function(t){var e=t.success,n=t.errormessage;e?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={table:t,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(t){var r=t.scores,n=t.success,o=t.errormessage;if(n){var i=r.map((function(t){return{id:t.playerid,name:t.playername,score:t.points,rank:t.rank,photo:null}}));e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,i)}else e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(t){var e=this;return this._isPlayerAuthorized&&t.achievement&&t.achievementkey?new Promise((function(r){e._platformSdk.GameAPI.Achievements.save(t,(function(t){r(t)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.GameAPI.Achievements.listCustom(t,(function(t){t.success?r(t.achievements.map((function(t){var e=t.player;return lc(lc({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,cc)),{},{playerid:e.playerid,playername:e.playername,lastupdated:e.lastupdated,date:e.date,rdate:e.rdate})}))):n(new Error(t.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(t){return this._platformSdk.GameAPI.Achievements.list(t),Promise.resolve()}}])&&pc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Tc(t){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tc(t)}function kc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dc(n.key),n)}}function Dc(t){var e=function(t,e){if("object"!=Tc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tc(e)?e:String(e)}function Ic(){return Ic="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ic.apply(this,arguments)}function Rc(t,e){return Rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rc(t,e)}function Lc(t){return Lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lc(t)}const jc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Lc(o);if(s){var r=Lc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?W("https://lagged.com/api/rev-share/lagged.js").then((function(){Y("LaggedAPI").then((function(){t._platformSdk=window.LaggedAPI,t._platformSdk.init(t._options.devId,t._options.publisherId),t._platformSdk.User.get((function(e){var r,n=null!==(r=null==e?void 0:e.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(t._playerId=o,t._playerName=i,t._playerPhotos.push(a),t._isPlayerAuthorized=!0),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),e.promise}},{key:"isStorageSupported",value:function(t){return t!==u.PLATFORM_INTERNAL&&Ic(Lc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t!==u.PLATFORM_INTERNAL&&Ic(Lc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){t._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(e,r){e?r():t._setRewardedState(a.FAILED)}),(function(e){e?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={score:e,board:t};this._platformSdk.Scores.save(o,(function(t){t.success?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(t){var e=this;return t.achievement?new Promise((function(r,n){e._platformSdk.Achievements.save(Array.isArray(t.achievement)?t.achievement:[t.achievement],(function(t){t.success?r(t):n(t.errormsg)}))})):Promise.reject()}}])&&kc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Nc(){Nc=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Bc(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Bc(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Cc(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Gc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gc(Object(r),!0).forEach((function(e){Yc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bc(t){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(t)}function xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jc(n.key),n)}}function Fc(){return Fc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Fc.apply(this,arguments)}function Uc(t,e){return Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uc(t,e)}function Vc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wc(t){return Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wc(t)}function zc(t,e){Zc(t,e),e.add(t)}function Zc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yc(t,e,r){return(e=Jc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jc(t){var e=function(t,e){if("object"!=Bc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bc(e)?e:String(e)}function Kc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,qc(t,e,"set"),r),r}function qc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Xc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Qc=new WeakMap,$c=new WeakSet,tu=new WeakSet,eu=new WeakSet,ru=new WeakSet;function nu(){var t=this;t._platformSdk.overlayViews.setCustomEventHandler((function(e){if("leaderboard"===e)Kc(t,Qc,!0);else if("close"===e){if(function(t,e){return e.get?e.get.call(t):e.value}(r=t,qc(r,Qc,"get")))return void Kc(t,Qc,!1);t._overlay&&(document.body.removeChild(document.getElementById(t._overlay.iframeElement.id)),t._overlay.dismissAsync(),t._overlay=null)}var r}))}function ou(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[t])return this._preloadedInterstitialPromises[t];var r=null;return this._preloadedInterstitialPromises[t]=this._platformSdk.getInterstitialAdAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedInterstitialPromises[t]=null,Promise.reject()})),this._preloadedInterstitialPromises[t]}function iu(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[t])return this._preloadedRewardedPromises[t];var r=null;return this._preloadedRewardedPromises[t]=this._platformSdk.getRewardedVideoAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedRewardedPromises[t]=null,Promise.reject()})),this._preloadedRewardedPromises[t]}function au(){return su.apply(this,arguments)}function su(){var t;return t=Nc().mark((function t(){return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",Promise.resolve());case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(0),"INVALID_OPERATION"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=13;break}t.next=14;break;case 13:throw new Error(t.t0);case 14:return t.prev=15,t.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!t.sent){t.next=21;break}return t.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:t.next=28;break;case 23:if(t.prev=23,t.t1=t.catch(15),"INVALID_OPERATION"!==(null===t.t1||void 0===t.t1?void 0:t.t1.code)){t.next=27;break}return t.abrupt("return",Promise.resolve());case 27:throw new Error(t.t1);case 28:return t.abrupt("return",Promise.resolve());case 29:case"end":return t.stop()}}),t,this,[[0,8],[15,23]])})),su=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cc(i,n,o,a,s,"next",t)}function s(t){Cc(i,n,o,a,s,"throw",t)}a(void 0)}))},su.apply(this,arguments)}const cu=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uc(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wc(o);if(c){var r=Wc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Bc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vc(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return zc(Vc(t=f.call.apply(f,[this].concat(i))),ru),zc(Vc(t),eu),zc(Vc(t),tu),zc(Vc(t),$c),Yc(Vc(t),"_contextId",null),Yc(Vc(t),"_supportedApis",[]),Yc(Vc(t),"_preloadedInterstitialPromises",{}),Yc(Vc(t),"_preloadedRewardedPromises",{}),Yc(Vc(t),"_defaultStorageType",u.PLATFORM_INTERNAL),Yc(Vc(t),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},Zc(e=Vc(t),r=Qc),r.set(e,n),t}return r=p,n=[{key:"platformId",get:function(){return t.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||Fc(Wc(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return Fc(Wc(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return v}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return Y("FBInstant")})).then((function(){return t._platformSdk=window.FBInstant,t._platformSdk.initializeAsync()})).then((function(){return t._isPlayerAuthorized=!0,t._playerId=t._platformSdk.player.getID(),t._contextId=t._platformSdk.context.getID(),t._platformLanguage=t._platformSdk.getLocale(),"string"==typeof t._platformLanguage&&(t._platformLanguage=t._platformLanguage.substring(0,2).toLowerCase()),t._supportedApis=t._platformSdk.getSupportedAPIs(),Xc(t,$c,nu).call(t),Promise.allSettled([t._platformSdk.community.canFollowOfficialPageAsync(),t._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(e){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return xc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xc(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;t._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){return t._rejectPromiseDecorator(_.INITIALIZE,e)}))),e.promise}},{key:"sendMessage",value:function(t){var e=this;return t===h.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return Xc(e,ru,au).call(e)}),0),new Promise((function(t){e._platformSdk.startGameAsync().then(t)}))):Fc(Wc(p.prototype),"sendMessage",this).call(this,t)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):Fc(Wc(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Fc(Wc(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.player.getDataAsync(i).then((function(t){var n=i.map((function(e){var n=t[e];return r||"object"!==Bc(n)||null===n?null!=n?n:null:JSON.stringify(n)}));e(n)})).catch(o)})):Fc(Wc(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):Fc(Wc(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null;else o[t]=null;r._platformSdk.player.setDataAsync(o).then(e).catch(n)})):Fc(Wc(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t,e){var r=this;this._platformSdk.loadBannerAdAsync(e,t).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideBannerAdAsync().then((function(){t._setBannerState(s.HIDDEN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(t){Xc(this,tu,ou).call(this,t)}},{key:"showInterstitial",value:function(t){var e=this;Xc(this,tu,ou).call(this,t).then((function(t){return e._setInterstitialState(i.OPENED),t.showAsync()})).then((function(){e._setInterstitialState(i.CLOSED),Xc(e,tu,ou).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!1)}))}},{key:"preloadRewarded",value:function(t){Xc(this,eu,iu).call(this,t)}},{key:"showRewarded",value:function(t){var e=this;Xc(this,eu,iu).call(this,t).then((function(t){return e._setRewardedState(a.OPENED),t.showAsync()})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),Xc(e,eu,iu).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!0)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.globalLeaderboards.setScoreAsync(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="9999",t.id="loading-overlay";var e=document.createElement("div");return e.style.fontSize="24px",e.style.color="#fff",e.innerText="Loading...",t.appendChild(e),t}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(t,20).then((function(t){var r=t.map((function(t){return{score:t.getScore(),sessionID:t.getPlayer().getSessionID()}})),o=e._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(t){t.showAsync(),e._overlay=t,n.remove(),e._resolvePromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(t,r){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(t){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=Mc({id:t},r);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=e.map((function(t){var e=r.find((function(e){return e.productID===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceAmount}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=Mc({id:r.find((function(e){return e.id===t.productID})).id},t);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.image||!e.text)return Promise.reject();if(!J(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.inviteAsync(e).then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),r.promise}},{key:"joinCommunity",value:function(t){var e=this,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),t&&!0===t.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)}))),r.promise}},{key:"share",value:function(t){var e=this;if(!t.image||!t.text)return Promise.reject();if(!J(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.shareAsync(Mc({intent:"REQUEST"},t)).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}],n&&Hc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(go);function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}function lu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fu(n.key),n)}}function fu(t){var e=function(t,e){if("object"!=uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uu(e)?e:String(e)}var pu,hu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"send",value:function(t){tt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*")}},{key:"addListener",value:function(t){window.addEventListener("message",t)}},{key:"removeListener",value:function(t){window.removeEventListener("message",t)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&lu(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function du(){du=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==gu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(gu(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function yu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mu(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function vu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vu(Object(r),!0).forEach((function(e){Tu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gu(t){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(t)}function Su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ku(n.key),n)}}function bu(t,e){return bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bu(t,e)}function Eu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pu(t,e){Ou(t,e),e.add(t)}function wu(){return wu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Au(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},wu.apply(this,arguments)}function Au(t){return Au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Au(t)}function Ou(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tu(t,e,r){return(e=ku(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ku(t){var e=function(t,e){if("object"!=gu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gu(e)?e:String(e)}function Du(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}function Iu(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Ru="banner",Lu="bridge",ju={AUTHORIZED_ONLY:"authorized_only",ALWAYS:"always",NEVER:"never"},Nu={IS_STORAGE_AVAILABLE:"is_storage_available",IS_STORAGE_SUPPORTED:"is_storage_supported",GET_DATA_FROM_STORAGE:"get_data_from_storage",SET_DATA_TO_STORAGE:"set_data_to_storage",DELETE_DATA_FROM_STORAGE:"delete_data_from_storage",GET_SERVER_TIME:"get_server_time",CHECK_ADBLOCK:"check_adblock",CLIPBOARD_READ:"clipboard_read",LIVENESS_PING:"ping",UNLOCK_ACHIEVEMENT:"unlock_achievement",GET_ACHIEVEMENTS:"get_achievements",SHOW_ACHIEVEMENTS_NATIVE_POPUP:"show_achievements_native_popup",GET_PERFORMANCE_RESOURCES:"get_performance_resources",GET_LANGUAGE:"get_language",GET_PLAYER:"get_player",AUDIO_STATE:"audio_state",PAUSE_STATE:"pause_state"},Cu="isLocalStorageSupported",Gu="isPlatformInternalStorageSupported",Mu="isBannerSupported",Bu=new WeakMap,xu=new WeakSet,Hu=new WeakSet,Fu=new WeakSet,Uu=new WeakSet,Vu=new WeakSet,Wu=new WeakSet,zu=new WeakSet,Zu=new WeakSet,Yu=new WeakSet,Ju=new WeakSet,Ku=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bu(t,e)}(f,r);var o,i,a,c,l=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Au(a);if(c){var r=Au(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===gu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eu(t)}(this,t)});function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Pu(Eu(t=l.call.apply(l,[this].concat(i))),Ju),Pu(Eu(t),Yu),Pu(Eu(t),Zu),Pu(Eu(t),zu),Pu(Eu(t),Wu),Pu(Eu(t),Vu),Pu(Eu(t),Uu),Pu(Eu(t),Fu),Pu(Eu(t),Hu),Pu(Eu(t),xu),Tu(Eu(t),"_supportedFeatures",[]),Tu(Eu(t),"_leaderboardsType",null),e=Eu(t),r=Bu,n={writable:!0,value:new hu},Ou(e,r),r.set(e,n),t}return o=f,(i=[{key:"platformId",get:function(){return t.QA_TOOL}},{key:"platformLanguage",get:function(){return Iu(this,Vu,tl).call(this,{type:e.PLATFORM,action:Nu.GET_LANGUAGE,options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(Mu)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var t;return null!==(t=this._leaderboardsType)&&void 0!==t?t:d}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),this.on(n.AUDIO_STATE_CHANGED,(function(r){Iu(t,Vu,tl).call(t,{type:e.PLATFORM,action:Nu.AUDIO_STATE,options:{isEnabled:r}})})),this.on(n.PAUSE_STATE_CHANGED,(function(r){Iu(t,Vu,tl).call(t,{type:e.PLATFORM,action:Nu.PAUSE_STATE,options:{isPaused:r}})})),Du(this,Bu).addListener((function(r){var n=r.data;if(null!=n&&n.type&&(null==n?void 0:n.source)!==Lu)if(n.type===e.PLATFORM){if(n.action===_.INITIALIZE)Iu(t,zu,rl).call(t).then((function(){Iu(t,xu,qu).call(t,n)}));else if(n.action===Nu.AUDIO_STATE)Iu(t,Hu,Xu).call(t,n);else if(n.action===Nu.PAUSE_STATE)Iu(t,Fu,Qu).call(t,n);else if(n.action===Nu.GET_PERFORMANCE_RESOURCES){var o,i=Du(t,Bu).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Iu(t,Uu,$u).call(t,i,a)}}else n.type===e.ADVERTISEMENT&&Iu(t,Zu,ol).call(t,n)})),Iu(this,Vu,tl).call(this,{type:e.PLATFORM,action:_.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(t){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),Iu(this,Wu,el).call(this,e.PLAYER,_.AUTHORIZE_PLAYER,{options:t}).then((function(t){var e=t.auth;"success"===e.status?Iu(r,zu,rl).call(r).then((function(){r._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):r._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e.error)}))),n.promise}},{key:"sendMessage",value:function(t){return[h.GAME_READY,h.IN_GAME_LOADING_STARTED,h.IN_GAME_LOADING_STOPPED,h.GAMEPLAY_STARTED,h.GAMEPLAY_STOPPED,h.PLAYER_GOT_ACHIEVEMENT,h.GAME_OVER].includes(t)?(Iu(this,Vu,tl).call(this,{type:e.PLATFORM,action:t}),Promise.resolve()):wu(Au(f.prototype),"sendMessage",this).call(this,t)}},{key:"getServerTime",value:function(){return Iu(this,Wu,el).call(this,e.PLATFORM,Nu.GET_SERVER_TIME,{options:{}},{timeout:5e3}).then((function(t){var e=t.time;if(!e)throw new Error("Invalid server time");return e})).catch((function(){throw new Error("Server time request timeout")}))}},{key:"isStorageSupported",value:function(t){return Iu(this,Vu,tl).call(this,{type:e.STORAGE,action:Nu.IS_STORAGE_SUPPORTED,options:{storageType:t}}),!(t!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(Gu))||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(Cu))}},{key:"isStorageAvailable",value:function(t){return Iu(this,Vu,tl).call(this,{type:e.STORAGE,action:Nu.IS_STORAGE_AVAILABLE,options:{storageType:t}}),(t===u.PLATFORM_INTERNAL&&this._supportedFeatures.includes(Gu)&&Iu(this,Yu,il).call(this)||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(Cu)))&&wu(Au(f.prototype),"isStorageAvailable",this).call(this,u.LOCAL_STORAGE)}},{key:"getDataFromStorage",value:function(t,r,n){return this.isStorageSupported(r)?Iu(this,Wu,el).call(this,e.STORAGE,Nu.GET_DATA_FROM_STORAGE,{options:{key:t,storageType:r,tryParseJson:n}}).then((function(e){var r=e.storage;return q(t,r,n)})):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,r,n){return Iu(this,Vu,tl).call(this,{type:e.STORAGE,action:Nu.SET_DATA_TO_STORAGE,options:{key:t,value:r,storageType:n}}),this.isStorageSupported(n)?n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE?Promise.resolve():wu(Au(f.prototype),"setDataToStorage",this).call(this,t,r,n):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,r){return Iu(this,Vu,tl).call(this,{type:e.STORAGE,action:Nu.DELETE_DATA_FROM_STORAGE,options:{key:t,storageType:r}}),this.isStorageSupported(r)?r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE?Promise.resolve():wu(Au(f.prototype),"deleteDataFromStorage",this).call(this,t,r):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showInterstitial",value:function(t){this.isInterstitialSupported&&Iu(this,Vu,tl).call(this,{type:e.ADVERTISEMENT,action:"interstitial",options:{placement:t}})}},{key:"showRewarded",value:function(t){this.isRewardedSupported&&Iu(this,Vu,tl).call(this,{type:e.ADVERTISEMENT,action:"reward",options:{placement:t}})}},{key:"showBanner",value:function(t,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),Iu(this,Vu,tl).call(this,{type:e.ADVERTISEMENT,action:s.SHOWN,options:{type:Ru,position:t,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),Iu(this,Vu,tl).call(this,{type:e.ADVERTISEMENT,action:s.HIDDEN,options:{type:Ru}}))}},{key:"checkAdBlock",value:function(){return Iu(this,Vu,tl).call(this,{type:Nu.CHECK_ADBLOCK,action:_.ADBLOCK_DETECT}),wu(Au(f.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var t=this._getPromiseDecorator(_.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(_.INVITE_FRIENDS),this._resolvePromiseDecorator(_.INVITE_FRIENDS),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.INVITE_FRIENDS})),t.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._resolvePromiseDecorator(_.JOIN_COMMUNITY),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.JOIN_COMMUNITY})),t.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var t=this._getPromiseDecorator(_.SHARE);return t||(t=this._createPromiseDecorator(_.SHARE),this._resolvePromiseDecorator(_.SHARE),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.SHARE})),t.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var t=this._getPromiseDecorator(_.CREATE_POST);return t||(t=this._createPromiseDecorator(_.CREATE_POST),this._resolvePromiseDecorator(_.CREATE_POST),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.CREATE_POST})),t.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.ADD_TO_HOME_SCREEN})),t.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_FAVORITES);return t||(t=this._createPromiseDecorator(_.ADD_TO_FAVORITES),this._resolvePromiseDecorator(_.ADD_TO_FAVORITES),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.ADD_TO_FAVORITES})),t.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._resolvePromiseDecorator(_.RATE),Iu(this,Vu,tl).call(this,{type:e.SOCIAL,action:_.RATE})),t.promise}},{key:"paymentsPurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),Iu(this,Wu,el).call(this,e.PAYMENTS,_.PURCHASE,{options:{product:n}}).then((function(e){var n=e.purchase;if(n&&"object"===gu(n))if(null!=n&&n.status){var o=_u({id:t},n.purchaseData);r._paymentsPurchases.push(o),r._resolvePromiseDecorator(_.PURCHASE,o)}else r._rejectPromiseDecorator(_.PURCHASE,(null==n?void 0:n.error)||new Error("Unknown purchase error"));else r._rejectPromiseDecorator(_.PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsConsumePurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(_.CONSUME_PURCHASE);return o||(o=this._createPromiseDecorator(_.CONSUME_PURCHASE),Iu(this,Wu,el).call(this,e.PAYMENTS,_.CONSUME_PURCHASE,{options:{product:this._paymentsPurchases[n]}}).then((function(e){var o=e.purchase;if(o&&"object"===gu(o))if(null!=o&&o.status){var i=_u({id:t},o);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(_.CONSUME_PURCHASE,i)}else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,(null==o?void 0:o.error)||new Error("Unknown consume purchase error"));else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);if(!r){r=this._createPromiseDecorator(_.GET_CATALOG);var n=this._paymentsGetProductsPlatformData();Iu(this,Wu,el).call(this,e.PAYMENTS,_.GET_CATALOG,{options:{products:n}}).then((function(){var e=n.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));t._resolvePromiseDecorator(_.GET_CATALOG,e)}))}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_PURCHASES);return r||(r=this._createPromiseDecorator(_.GET_PURCHASES),Iu(this,Wu,el).call(this,e.PAYMENTS,_.GET_PURCHASES,{options:{products:this._paymentsGetProductsPlatformData()}}).then((function(e){var r=e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){return _u({id:n.find((function(e){return e.id===t.id})).id},t.purchaseData)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)}))),r.promise}},{key:"getRemoteConfig",value:function(){var t=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),Iu(this,Wu,el).call(this,e.REMOTE_CONFIG,_.GET_REMOTE_CONFIG).then((function(e){var r=e.result;t._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,r)}))),r.promise}},{key:"clipboardWrite",value:function(t){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return n||(n=this._createPromiseDecorator(_.CLIPBOARD_WRITE),Iu(this,Wu,el).call(this,e.CLIPBOARD,_.CLIPBOARD_WRITE,{options:{text:t}}).then((function(){r._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)}))),n.promise}},{key:"clipboardRead",value:function(){var t=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(Nu.CLIPBOARD_READ);return r||(r=this._createPromiseDecorator(Nu.CLIPBOARD_READ),Iu(this,Wu,el).call(this,e.CLIPBOARD,Nu.CLIPBOARD_READ,{options:{}}).then((function(e){var r=e.text;t._resolvePromiseDecorator(Nu.CLIPBOARD_READ,r)}))),r.promise}},{key:"leaderboardsSetScore",value:function(t,r){if(this.leaderboardsType===d)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={id:t,score:r};Iu(this,Vu,tl).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var r=this;if(this.leaderboardsType!==y)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),Iu(this,Wu,el).call(this,e.LEADERBOARDS,_.LEADERBOARDS_GET_ENTRIES,{options:{id:t}},{timeout:5e3}).then((function(t){var e=t.entries;r._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,e)})).catch((function(){r._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES)}))),n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){return this.leaderboardsType!==v?Promise.reject(new Error("Leaderboards are not available")):(Iu(this,Vu,tl).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SHOW_NATIVE_POPUP,options:{id:t}}),Promise.resolve(_.LEADERBOARDS_SHOW_NATIVE_POPUP))}},{key:"unlockAchievement",value:function(t){return this.isAchievementsSupported?Iu(this,Wu,el).call(this,e.ACHIEVEMENTS,Nu.UNLOCK_ACHIEVEMENT,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"getAchievementsList",value:function(t){return this.isGetAchievementsListSupported?Iu(this,Wu,el).call(this,e.ACHIEVEMENTS,Nu.GET_ACHIEVEMENTS,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?(Iu(this,Vu,tl).call(this,{type:e.ACHIEVEMENTS,action:Nu.SHOW_ACHIEVEMENTS_NATIVE_POPUP}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(t){return _u({id:t.id},t.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));return r?_u({id:r.id},r.playgama):null}}])&&Su(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),f}(go);function qu(t){var e,r,n,o,i;this._supportedFeatures=t.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(Mu);var a=t.config,s=void 0===a?{}:a;this._deviceType=null!==(e=s.deviceType)&&void 0!==e?e:wu(Au(pu.prototype),"deviceType",this),this._platformLanguage=s.platformLanguage?s.platformLanguage.toLowerCase():wu(Au(pu.prototype),"platformLanguage",this),this._platformTld=null!==(r=s.platformTld)&&void 0!==r?r:wu(Au(pu.prototype),"platformTld",this),this._platformPayload=null!==(n=s.platformPayload)&&void 0!==n?n:wu(Au(pu.prototype),"platformPayload",this),this._leaderboardsType=null!==(o=s.leaderboardsType)&&void 0!==o?o:d,this._internalStoragePolicy=null!==(i=s.internalStoragePolicy)&&void 0!==i?i:ju.AUTHORIZED_ONLY,this._paymentsPurchases=t.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE),Iu(this,Ju,al).call(this),Iu(this,Vu,tl).call(this,{type:"liveness",action:Nu.LIVENESS_PING,options:{version:"1.28.0-preview.1"}})}function Xu(t){this._setAudioState(t.options.isEnabled)}function Qu(t){this._setPauseState(t.options.isPaused)}function $u(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(t){var e={};return i.forEach((function(r){r in t&&(e[r]=t[r])})),e}));return Iu(this,Vu,tl).call(this,{type:e.PLATFORM,action:Nu.GET_PERFORMANCE_RESOURCES,id:t,options:{resources:a}}),Promise.resolve(o)}function tl(t){Du(this,Bu).send(_u({source:Lu},t))}function el(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Du(this,Bu).generateMessageId(),a=_u({timeout:0},o);return new Promise((function(s,c){var u=function n(o){var a=o.data;(null==a?void 0:a.type)===t&&(null==a?void 0:a.action)===e&&(null==a?void 0:a.id)===i&&(null==a?void 0:a.source)!==Lu&&(Du(r,Bu).removeListener(n),s(a))};Du(r,Bu).addListener(u),Iu(r,Vu,tl).call(r,_u({type:t,action:e,id:i,options:o},n)),a.timeout>0&&setTimeout((function(){c(new Error("Request timeout")),Du(r,Bu).removeListener(u)}),a.timeout)}))}function rl(){return nl.apply(this,arguments)}function nl(){var t;return t=du().mark((function t(){var r=this;return du().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Iu(this,Wu,el).call(this,e.PLAYER,Nu.GET_PLAYER).then((function(t){var e,n=t.player;null!=n&&n.isAuthorized?(r._playerId=n.userId,r._isPlayerAuthorized=n.isAuthorized,r._playerName=n.name,Array.isArray(n.photos)&&(r._playerPhotos=function(t){if(Array.isArray(t))return yu(t)}(e=n.photos)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return yu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yu(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=n,Iu(r,Ju,al).call(r)):r._playerApplyGuestData()})).catch((function(){r._playerApplyGuestData()})));case 1:case"end":return t.stop()}}),t,this)})),nl=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mu(i,n,o,a,s,"next",t)}function s(t){mu(i,n,o,a,s,"throw",t)}a(void 0)}))},nl.apply(this,arguments)}function ol(t){var e=t.action,r=t.payload;if("interstitial"===e){if(!this.isInterstitialSupported)return;switch(r.status){case"start":this._setInterstitialState(i.LOADING);break;case"open":this._setInterstitialState(i.OPENED);break;case"failed":this._setInterstitialState(i.FAILED);break;case"close":this._setInterstitialState(i.CLOSED)}}else if("reward"===e){if(!this.isRewardedSupported)return;switch(r.status){case"start":this._setRewardedState(a.LOADING);break;case"open":this._setRewardedState(a.OPENED);break;case"rewarded":this._setRewardedState(a.REWARDED);break;case"close":this._setRewardedState(a.CLOSED);break;case"failed":this._setRewardedState(a.FAILED)}}}function il(){return this._internalStoragePolicy===ju.AUTHORIZED_ONLY&&this._isPlayerAuthorized||this._internalStoragePolicy===ju.ALWAYS}function al(){Iu(this,Yu,il).call(this)?this._defaultStorageType=u.PLATFORM_INTERNAL:this._defaultStorageType=u.LOCAL_STORAGE}pu=Ku;const sl=Ku;function cl(t){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(t)}function ul(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ll(n.key),n)}}function ll(t){var e=function(t,e){if("object"!=cl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cl(e)?e:String(e)}function fl(){return fl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},fl.apply(this,arguments)}function pl(t,e){return pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pl(t,e)}function hl(t){return hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hl(t)}const dl=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pl(t,e)}(u,e);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hl(o);if(s){var r=hl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===cl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return t.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Y("PokiSDK","init").then((function(){t._platformSdk=window.PokiSDK,t._platformSdk.init().then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return fl(hl(u.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this,e=!1;this._platformSdk.commercialBreak((function(){e=!0,t._setInterstitialState(i.OPENED)})).then((function(){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)})).catch((function(e){t._setInterstitialState(i.FAILED,e)}))}},{key:"showRewarded",value:function(){var t=this,e=!1;this._platformSdk.rewardedBreak((function(){e=!0,t._setRewardedState(a.OPENED)})).then((function(r){e?(r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(e){t._setRewardedState(a.FAILED,e)}))}}])&&ul(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(go);function yl(t){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(t)}function ml(){ml=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==yl(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yl(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function vl(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function _l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vl(i,n,o,a,s,"next",t)}function s(t){vl(i,n,o,a,s,"throw",t)}a(void 0)}))}}function gl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gl(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=El(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,El(n.key),n)}}function El(t){var e=function(t,e){if("object"!=yl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yl(e)?e:String(e)}function Pl(){return Pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ol(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Pl.apply(this,arguments)}function wl(t,e){return wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wl(t,e)}function Al(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ol(t){return Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ol(t)}function Tl(t,e){Dl(t,e),e.add(t)}function kl(t,e,r){Dl(t,e),e.set(t,r)}function Dl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Il(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,jl(t,e,"set"),r),r}function Rl(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Ll(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,jl(t,e,"get"))}function jl(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Nl=new WeakMap,Cl=new WeakMap,Gl=new WeakSet,Ml=new WeakSet,Bl=new WeakSet,xl=new WeakSet;function Hl(){var t=this;return Ll(this,Nl)?new Promise((function(e){Ll(t,Nl).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!1).then((function(){return e()}));case"ready":t._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){t._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!1).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setInterstitialState(i.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!1)}function Fl(){var t=this;return Ll(this,Nl)?new Promise((function(e){Ll(t,Nl).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!0).then((function(){return e()}));case"ready":t._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){t._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){t._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!0).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setRewardedState(a.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!0)}function Ul(t){t?(this._isPlayerAuthorized=!0,this._playerId=t.playerId,this._playerName=t.playerDisplayName,this._playerExtra=t,Il(this,Cl,"personal"===t.userAccountType.toLowerCase())):this._playerApplyGuestData()}function Vl(t){return Wl.apply(this,arguments)}function Wl(){return Wl=_l(ml().mark((function t(e){var r,n=arguments;return ml().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSave.getDataAsync({gameId:this._options.gameId});case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)}))),Wl.apply(this,arguments)}const zl=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wl(t,e)}(d,e);var r,n,o,c,l,f,p,h=(f=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ol(f);if(p){var r=Ol(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Al(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Tl(Al(t=h.call.apply(h,[this].concat(r))),xl),Tl(Al(t),Bl),Tl(Al(t),Ml),Tl(Al(t),Gl),kl(Al(t),Nl,{writable:!0,value:null}),kl(Al(t),Cl,{writable:!0,value:!1}),t}return r=d,n=[{key:"platformId",get:function(){return t.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return Ll(this,Cl)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;e=this._createPromiseDecorator(_.INITIALIZE),W("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.21.min.js").then((function(){return Y("$msstart")})).then((function(){t._platformSdk=window.$msstart,t._platformSdk.getSignedInUserAsync().then((function(e){Rl(t,Bl,Ul).call(t,e)})).catch((function(){Rl(t,Bl,Ul).call(t,null)})).finally((function(){t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&W("https://playgama.com/ads/msn.v0.1.js").then((function(){return Y("pgAds")})).then((function(){window.pgAds.init(n).then((function(){Il(t,Nl,window.pgAds);var e=t._options.gameId;Ll(t,Nl).updateTargeting({gameId:e})}))}))}return e.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.signInAsync().then((function(r){Rl(t,Bl,Ul).call(t,r),e()})).catch((function(e){Rl(t,Bl,Ul).call(t,null),r(e)}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Pl(Ol(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Pl(Ol(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Rl(this,xl,Vl).call(this,t,r):Promise.reject():Pl(Ol(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Sl({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSave.saveDataAsync({data:i,gameId:n._options.gameId}).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject():Pl(Ol(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null,delete r._platformStorageCachedData[t[i]];else o[t]=null,delete r._platformStorageCachedData[t];r.platformSdk.cloudSave.saveDataAsync({data:o,gameId:r._options.gameId}).then((function(){e()})).catch((function(t){n(t)}))})):Promise.reject():Pl(Ol(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.shareAsync(t).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;return new Promise((function(t,n){r._platformSdk.submitGameResultsAsync(e).then(t).catch(n)}))}},{key:"showBanner",value:function(t){var e,r=this;e="top"===t?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([e]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideDisplayAdsAsync().then((function(){t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.loadAdsAsync(!1).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setInterstitialState(i.OPENED),e.showAdsCompletedAsync})).then((function(){return t._setInterstitialState(i.CLOSED)})).catch((function(){return Rl(t,Gl,Hl).call(t)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.loadAdsAsync(!0).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setRewardedState(a.OPENED),e.showAdsCompletedAsync})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return Rl(t,Ml,Fl).call(t)}))}},{key:"paymentsPurchase",value:(l=_l(ml().mark((function t(e){var r,n,o,i;return ml().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._paymentsGetProductPlatformData(e)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.PURCHASE)){t.next=23;break}if(n=this._createPromiseDecorator(_.PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.purchaseAsync({productId:r.platformProductId});case 12:if("IAP_PURCHASE_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:i=Sl(Sl({id:e},o.receipt),{},{receiptSignature:o.receiptSignature}),this._paymentsPurchases.push(i),this._resolvePromiseDecorator(_.PURCHASE,i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),this._rejectPromiseDecorator(_.PURCHASE,t.t0);case 23:return t.abrupt("return",n.promise);case 24:case"end":return t.stop()}}),t,this,[[6,20]])}))),function(t){return l.apply(this,arguments)})},{key:"paymentsConsumePurchase",value:(c=_l(ml().mark((function t(e){var r,n,o,i;return ml().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this._paymentsPurchases.findIndex((function(t){return t.id===e})))<0)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.CONSUME_PURCHASE)){t.next=24;break}if(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].productId});case 12:if("IAP_CONSUME_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:this._paymentsPurchases.splice(r,1),delete(i=Sl(Sl({id:e},o.consumptionReceipt),{},{consumptionSignature:o.consumptionSignature})).productId,this._resolvePromiseDecorator(_.CONSUME_PURCHASE,i),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),this._rejectPromiseDecorator(_.CONSUME_PURCHASE,t.t0);case 24:return t.abrupt("return",n.promise);case 25:case"end":return t.stop()}}),t,this,[[6,21]])}))),function(t){return c.apply(this,arguments)})},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=e.map((function(t){var e=r.find((function(e){return e.productId===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,publisherName:e.publisherName,inAppOfferToken:e.inAppOfferToken,isConsumable:e.isConsumable,price:"".concat(e.price.listPrice," ").concat(e.price.currencyCode," "),priceCurrencyCode:e.price.currencyCode,priceValue:e.price.listPrice}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)}else t._rejectPromiseDecorator(_.GET_CATALOG,r.description)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:(o=_l(ml().mark((function t(){var e,r,n;return ml().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._getPromiseDecorator(_.GET_PURCHASES)){t.next=20;break}if(e=this._createPromiseDecorator(_.GET_PURCHASES),t.prev=3,this._isPlayerAuthorized){t.next=7;break}return t.next=7,this.authorizePlayer();case 7:return t.next=9,this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId});case 9:if("IAP_GET_ALL_PURCHASES_FAILURE"!==(r=t.sent).code){t.next=12;break}throw new Error(r.description);case 12:n=this._paymentsGetProductsPlatformData(),this._paymentsPurchases=r.receipts.map((function(t){return Sl(Sl({id:n.find((function(e){return e.platformProductId===t.productId})).id},t),{},{receiptSignature:r.receiptSignature})})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),this._rejectPromiseDecorator(_.GET_PURCHASES,t.t0);case 20:return t.abrupt("return",e.promise);case 21:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return o.apply(this,arguments)})}],n&&bl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(go);function Zl(t){return Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(t)}function Yl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yl(Object(r),!0).forEach((function(e){ef(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Kl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rf(n.key),n)}}function ql(){return ql="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ql.apply(this,arguments)}function Xl(t,e){return Xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xl(t,e)}function Ql(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $l(t){return $l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$l(t)}function tf(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function ef(t,e,r){return(e=rf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rf(t){var e=function(t,e){if("object"!=Zl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zl(e)?e:String(e)}function nf(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var of=new WeakSet,af=new WeakSet,sf=new WeakSet,cf=new WeakSet,uf=new WeakSet,lf=new WeakSet,ff=new WeakSet,pf=new WeakSet,hf=new WeakSet,df=new WeakSet,yf=new WeakSet,mf=new WeakSet,vf=new WeakSet;function _f(t,e){var r;r=JSON.stringify({action:t,data:e}),window.system&&window.system[V](r)}function gf(){if(window.system){var t=this;window.system.onmessage=function(e){try{var r=JSON.parse(e),n=r.action,o=r.data;n===_.INITIALIZE?nf(t,sf,Sf).call(t,o):n===_.AUTHORIZE_PLAYER?nf(t,cf,bf).call(t,o):n===_.SET_INTERSTITIAL_STATE?nf(t,uf,Ef).call(t,o):n===_.SET_REWARDED_STATE?nf(t,lf,Pf).call(t,o):n===_.GET_CATALOG?nf(t,ff,wf).call(t,o):n===_.PURCHASE?nf(t,pf,Af).call(t,o):n===_.CONSUME_PURCHASE?nf(t,hf,Of).call(t,o):n===_.GET_PURCHASES?nf(t,df,Tf).call(t,o):n===_.GET_STORAGE_DATA?nf(t,yf,kf).call(t,o):n===_.SET_STORAGE_DATA?nf(t,mf,Df).call(t,o):n===_.DELETE_STORAGE_DATA&&nf(t,vf,If).call(t,o)}catch(t){console.error("Error parsing Huawei message:",t)}}}}function Sf(t){t.success?(this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE,t)):this._rejectPromiseDecorator(_.INITIALIZE,new Error(t))}function bf(t){if(!t.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,new Error(t));this._playerId=t.playerId,this._playerName=t.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function Ef(t){Object.values(i).includes(t.state)&&this._setInterstitialState(t.state,t.state===i.FAILED?new Error(t):void 0)}function Pf(t){Object.values(a).includes(t.state)&&this._setRewardedState(t.state,t.state===a.FAILED?new Error(t):void 0)}function wf(t){if(t.success){var e=this._paymentsGetProductsPlatformData().map((function(e){var r=t.data.find((function(t){return t.productId===e.id}));return{id:e.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(_.GET_CATALOG,e)}else this._rejectPromiseDecorator(_.GET_CATALOG,new Error(t))}function Af(t){if(t.success){var e=t.data,r=Jl({id:t.id},e);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(_.PURCHASE,r)}else this._rejectPromiseDecorator(_.PURCHASE,new Error(t))}function Of(t){if(t.success){var e=this._paymentsPurchases.findIndex((function(e){return e.purchaseToken===t.purchaseToken}));e>=0&&this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,t)}else this._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error(t))}function Tf(t){if(t.success){var e=this._paymentsGetProductsPlatformData();this._paymentsPurchases=t.data.map((function(t){var r=JSON.parse(t),n=Jl({id:e.find((function(t){return t.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(_.GET_PURCHASES,new Error(t))}function kf(t){t.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.GET_STORAGE_DATA,new Error(t))}function Df(t){t.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.SET_STORAGE_DATA,new Error(t))}function If(t){t.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA,new Error(t))}const Rf=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xl(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$l(o);if(i){var r=$l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ql(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return tf(Ql(t=a.call.apply(a,[this].concat(r))),vf),tf(Ql(t),mf),tf(Ql(t),yf),tf(Ql(t),df),tf(Ql(t),hf),tf(Ql(t),pf),tf(Ql(t),ff),tf(Ql(t),lf),tf(Ql(t),uf),tf(Ql(t),cf),tf(Ql(t),sf),tf(Ql(t),af),tf(Ql(t),of),ef(Ql(t),"_defaultStorageType",u.PLATFORM_INTERNAL),t}return r=s,(n=[{key:"platformId",get:function(){return t.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);return t||(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,nf(this,af,gf).call(this),nf(this,of,_f).call(this,_.INITIALIZE,this._appId)):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),t.promise}},{key:"authorizePlayer",value:function(){var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),nf(this,of,_f).call(this,_.AUTHORIZE_PLAYER)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ql($l(s.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ql($l(s.prototype),"isStorageAvailable",this).call(this,t)}},{key:"setDataToStorage",value:function(t,e,r){if(r!==u.PLATFORM_INTERNAL)return ql($l(s.prototype),"setDataToStorage",this).call(this,t,e,r);var n=this._getPromiseDecorator(_.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.SET_STORAGE_DATA),nf(this,of,_f).call(this,_.SET_STORAGE_DATA,{key:t,value:e})),n.promise}},{key:"getDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return ql($l(s.prototype),"getDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.GET_STORAGE_DATA),nf(this,of,_f).call(this,_.GET_STORAGE_DATA,t)),r.promise}},{key:"deleteDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return ql($l(s.prototype),"deleteDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),nf(this,of,_f).call(this,_.DELETE_STORAGE_DATA,t)),r.promise}},{key:"showInterstitial",value:function(t){nf(this,of,_f).call(this,_.SHOW_INTERSTITIAL,t)}},{key:"showRewarded",value:function(t){nf(this,of,_f).call(this,_.SHOW_REWARDED,t)}},{key:"paymentsPurchase",value:function(t){if(!this._paymentsGetProductPlatformData(t))return Promise.reject();var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),nf(this,of,_f).call(this,_.PURCHASE,t)),e.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject();var r=this._getPromiseDecorator(_.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(_.CONSUME_PURCHASE),nf(this,of,_f).call(this,_.CONSUME_PURCHASE,this._paymentsPurchases[e].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=this._getPromiseDecorator(_.GET_CATALOG);return e||(e=this._createPromiseDecorator(_.GET_CATALOG),nf(this,of,_f).call(this,_.GET_CATALOG,t.map((function(t){return t.id})))),e.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),nf(this,of,_f).call(this,_.GET_PURCHASES)),t.promise}}])&&Kl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(go);function Lf(t){return Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(t)}function jf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jf(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=xf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cf(){Cf=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Lf(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Lf(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Gf(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Mf(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gf(i,n,o,a,s,"next",t)}function s(t){Gf(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Bf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xf(n.key),n)}}function xf(t){var e=function(t,e){if("object"!=Lf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lf(e)?e:String(e)}function Hf(){return Hf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Hf.apply(this,arguments)}function Ff(t,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ff(t,e)}function Uf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vf(t){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vf(t)}var Wf=new WeakSet;function zf(){var t=this,e={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=e[r];n&&(t._setRewardedState(n),n===a.REWARDED&&t._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(e){var n=r[e];n&&t._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(e){var r=n[e];r&&t._setBannerState(r)}))}const Zf=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ff(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vf(a);if(s){var r=Vf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Lf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Uf(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Uf(t=c.call.apply(c,[this].concat(o))),r=Wf),r.add(e),t}return r=l,n=[{key:"platformId",get:function(){return t.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;switch(e=this._createPromiseDecorator(_.INITIALIZE),new URLSearchParams(window.location.search).get("target")){case"prod":default:r="https://app.bitquest.games/bqsdk.min.js";break;case"stage":r="https://app-stage.bitquest.games/bqsdk.min.js";break;case"bank":r="https://app-global.memebeat.io/bqsdk.min.js"}W(r).then((function(){Y("bq").then((function(){t._platformSdk=window.bq,t._platformSdk.initialize().then((function(){t._platformSdk.platform.sendMessage("game_ready");var e=t._platformSdk.player,r=e.id,n=void 0===r?null:r,o=e.name,i=void 0===o?"":o;t._playerId=n,t._playerName=i,t._isPlayerAuthorized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._playerExtra=e,function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,Wf,zf).call(t),t.showPreRoll(),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))}return e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Hf(Vf(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Hf(Vf(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return n._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return this._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Hf(Vf(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=Mf(Cf().mark((function t(e,r,n){return Cf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return t.next=3,this._platformSdk.storage.set(e,r,"platform_internal");case 3:return t.abrupt("return");case 4:return t.next=6,Hf(Vf(l.prototype),"setDataToStorage",this).call(this,e,r,n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Mf(Cf().mark((function t(e,r){var n;return Cf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=13;break}if(!Array.isArray(e)){t.next=10;break}n=0;case 3:if(!(n<e.length)){t.next=9;break}return t.next=6,this._platformSdk.storage.delete(e[n],"platform_internal");case 6:n++,t.next=3;break;case 9:return t.abrupt("return");case 10:return t.next=12,this._platformSdk.storage.delete(e,"platform_internal");case 12:return t.abrupt("return");case 13:return t.next=15,Hf(Vf(l.prototype),"deleteDataFromStorage",this).call(this,e,r);case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._getPromiseDecorator(_.PURCHASE);return r||(r=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payment.purchase(t).then((function(r){var n=Nf({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var t,e=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(t=this._platformSdk)||void 0===t||!t.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(_.GET_CATALOG);return n||(n=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(t){if(!Array.isArray(t))throw new Error("Catalog response is not an array");var n=r.map((function(e){var r=t.find((function(t){return t.purchaseId===e.id}));return r?{id:e.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);e._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(_.GET_CATALOG,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(t).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(e){var r=null==e?void 0:e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){var e=n.find((function(e){return e.id===t.purchaseId}));if(!e)return null;var r=Nf({id:e.id},t);return delete r.purchaseId,r})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.leaderboard.setScore(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(t).then((function(t){var r=Array.isArray(t)?t:t.entries||t.data||[];e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))),r.promise}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.platform.getServerTime())}))}}],n&&Bf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Yf(t){return Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(t)}function Jf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$f(n.key),n)}}function Kf(t,e){return Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kf(t,e)}function qf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xf(t){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xf(t)}function Qf(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function $f(t){var e=function(t,e){if("object"!=Yf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yf(e)?e:String(e)}function tp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var ep=new WeakSet,rp=new WeakSet,np=new WeakSet;function op(){var t=this;this._platformSdk.ads.on("rewarded:start",(function(){t._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(e){e||t._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)}))}function ip(){var t=this;this._platformSdk.ads.on("fullscreen:start",(function(){t._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){t._setInterstitialState(i.CLOSED)}))}function ap(){var t=this;this._platformSdk.ads.on("sticky:render",(function(){t._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){t._setBannerState(s.HIDDEN)}))}const sp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kf(t,e)}(c,e);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xf(o);if(i){var r=Xf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qf(t)}(this,t)});function c(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Qf(qf(t=s.call.apply(s,[this].concat(o))),np),Qf(qf(t),rp),Qf(qf(t),ep),e=qf(t),!0,(r=$f(r="_isBannerSupported"))in e?Object.defineProperty(e,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[r]=true,t}return r=c,(n=[{key:"platformId",get:function(){return t.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);W(r).then((function(){Y("GamePush").then((function(){var e;t._platformSdk=window.GamePush;var r=null===(e=t._platformSdk)||void 0===e?void 0:e.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;t._isPlayerAuthorized=!0,t._playerId=o,t._playerName=a,c&&t._playerPhotos.push(c)}else t._playerApplyGuestData();t._isInitialized=!0,tp(t,rp,ip).call(t),tp(t,ep,op).call(t),tp(t,np,ap).call(t),t._resolvePromiseDecorator(_.INITIALIZE)}))}))}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return e.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.ads.showRewardedVideo().catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ads.isAdblockEnabled().then((function(t){e(t)}))}))}}])&&Jf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(go);function cp(t){return cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(t)}function up(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?up(Object(r),!0).forEach((function(e){yp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):up(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mp(n.key),n)}}function pp(t,e){return pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pp(t,e)}function hp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dp(t){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dp(t)}function yp(t,e,r){return(e=mp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mp(t){var e=function(t,e){if("object"!=cp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=cp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cp(e)?e:String(e)}var vp="https://discord.com/api/v10";const _p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pp(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dp(o);if(i){var r=dp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===cp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hp(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return yp(hp(t=a.call.apply(a,[this].concat(r))),"_appId",null),yp(hp(t),"_accessToken",null),t}return r=s,(n=[{key:"platformId",get:function(){return t.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.appId?(this._appId=this._options.appId,W("/cdn/discord/discord-v2.0.0.min.js").then((function(){Y("discord","DiscordSDK").then((function(){return t._platformSdk=new window.discord.DiscordSDK(t._appId),t._platformSdk.ready()})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))):this._rejectPromiseDecorator(_.INITIALIZE,g.DISCORD_GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(t){var e=this,r=(null==t?void 0:t.scope)||["identify"],n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(t){var r=t.code;return fetch("".concat("/api","/discord/auth-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,appId:e._appId})})})).then((function(t){return t.json()})).then((function(t){return e._accessToken=t.accessToken,e._playerExtra={token:t.token,accessToken:e._accessToken,channelId:e._platformSdk.channelId},e._platformSdk.commands.authenticate({access_token:e._accessToken})})).then((function(t){if(null===t)throw e._playerApplyGuestData(),new Error("Authorization failed");return fetch("".concat(vp,"/users/@me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e._accessToken),"Content-Type":"application/json"}})})).then((function(t){return t.json()})).then((function(t){e._playerId=t.id,e._playerName=t.username,t.avatar&&e._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png")),e._playerExtra=lp(lp({},e._playerExtra),t),e._isPlayerAuthorized=!0,e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})).catch((function(t){e._playerApplyGuestData(),e._accessToken=null,e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),n.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);if(!r)return Promise.reject();var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=lp({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),fetch("".concat(vp,"/applications/").concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=e.map((function(t){var e,r,o=n.find((function(e){return e.id===t.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(e=o.price)||void 0===e||null===(e=e.currency)||void 0===e?void 0:e.toUpperCase(),s="".concat(i," ").concat(a);return{id:t.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.entitlements.map((function(t){return lp({id:r.find((function(e){return e.id===t.id})).id},t)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=this._getPromiseDecorator(_.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),e.promise}},{key:"share",value:function(t){var e=this;if(!t.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:t.mediaUrl}).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}])&&fp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(go);function gp(t){return gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(t)}function Sp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sp(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Pp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ep(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pp(n.key),n)}}function Pp(t){var e=function(t,e){if("object"!=gp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gp(e)?e:String(e)}function wp(){return wp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},wp.apply(this,arguments)}function Ap(t,e){return Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ap(t,e)}function Op(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tp(t){return Tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tp(t)}function kp(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Dp(t,e,"get"))}function Dp(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ip=new WeakMap;const Rp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ap(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tp(o);if(s){var r=Tp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===gp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Op(t)}(this,t)});function l(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=Op(t=c.call.apply(c,[this].concat(i))),n={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=Ip),r.set(e,n),t}return r=l,(n=[{key:"platformId",get:function(){return t.YOUTUBE}},{key:"platformLanguage",get:function(){return kp(this,Ip)?kp(this,Ip):wp(Tp(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),Y("ytgame").then((function(){t._platformSdk=window.ytgame,t._defaultStorageType=u.PLATFORM_INTERNAL;var e=t._platformSdk.system.getLanguage().then((function(e){var r,n,o;r=t,n=Ip,o=e.length>2?e.slice(0,2):e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r,Dp(r,n,"set"),o)}));t._platformStorageCachedData={};var r=t._platformSdk.game.loadData().then((function(e){"string"==typeof e&&""!==e&&(t._platformStorageCachedData=JSON.parse(e))}));t._platformSdk.system.onAudioEnabledChange((function(e){t._setAudioState(e)})),t._platformSdk.system.onPause((function(){t._setPauseState(!0)})),t._platformSdk.system.onResume((function(){t._setPauseState(!1)})),Promise.all([e,r]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE),t._platformSdk.game.firstFrameReady()}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||wp(Tp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||wp(Tp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(t)){for(var i=[],a=0;a<t.length;a++){var s=void 0===n._platformStorageCachedData[t[a]]?null:n._platformStorageCachedData[t[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(t){}i.push(s)}e(i)}else{var c=void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(t){}e(c)}})).catch((function(){o()}))})):wp(Tp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?bp({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):wp(Tp(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o=null!==r._platformStorageCachedData?bp({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))})):wp(Tp(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):wp(Tp(l.prototype),"sendMessage",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var i="string"==typeof e?parseInt(e,10):e;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){n._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return o.promise}}])&&Ep(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Lp(t){return Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(t)}var jp=["gamer_id","gamer_name","gamer_avatar_url"];function Np(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hp(n.key),n)}}function Cp(t,e){return Cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cp(t,e)}function Gp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mp(t){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(t)}function Bp(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function xp(t,e,r){return(e=Hp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hp(t){var e=function(t,e){if("object"!=Lp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lp(e)?e:String(e)}function Fp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Up=new WeakSet,Vp=new WeakSet;function Wp(){var t=this,e=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadInterstitialPromise=null,n(new Error(t))}})}))),this._preloadInterstitialPromise}function zp(){var t=this,e=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadRewardedPromise=null,n(new Error(t))}})}))),this._preloadRewardedPromise}const Zp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cp(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mp(o);if(c){var r=Mp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Lp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gp(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Bp(Gp(t=u.call.apply(u,[this].concat(r))),Vp),Bp(Gp(t),Up),xp(Gp(t),"_preloadInterstitialPromise",null),xp(Gp(t),"_preloadRewardedPromise",null),xp(Gp(t),"_isBannerAvailable",!1),t}return r=l,(n=[{key:"platformId",get:function(){return t.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.onSdkReady=function(){if(t._platformSdk=window.JioGames,t._platformSdk.playerInfo){var e=t._platformSdk.playerInfo,r=e.gamer_id,n=e.gamer_name,o=e.gamer_avatar_url,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,jp);t.playerId=r||null,t.playerName=n||null,o&&t.playerPhotos.push(o),t.playerExtra=i,t._isPlayerAuthorized=!0}t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)},window.onBannerReady=function(){t._isBannerAvailable=!0},W("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,JSON.stringify(e))}))),e.promise}},{key:"preloadInterstitial",value:function(){Fp(this,Up,Wp).call(this)}},{key:"showInterstitial",value:function(){var t=this;Fp(this,Up,Wp).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Interstitial,{onAdClosed:function(){t._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setInterstitialState(i.FAILED)}}),t._setInterstitialState(i.OPENED),t._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){Fp(this,Vp,zp).call(this)}},{key:"showRewarded",value:function(){var t=this;Fp(this,Vp,zp).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Rewarded,{onAdClosed:function(e){e&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setRewardedState(a.FAILED)}}),t._setRewardedState(a.OPENED),t._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(t){var e,r=this;this._isBannerAvailable?null===(e=window.JGBanner)||void 0===e||e.loadBanner().then((function(){var e,n;r._setBannerState(s.SHOWN),null===(e=window.JGBanner)||void 0===e||e.showBanner(t||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(t){console.error(t),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var t;null===(t=window.JGBanner)||void 0===t||t.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(t,e,r){if(!r)return Promise.reject();var n="string"==typeof e?parseInt(e,10):e;return this._platformSdk.postScore(n),Promise.resolve()}}])&&Np(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Yp(t){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(t)}function Jp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jp(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Xp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xp(n.key),n)}}function Xp(t){var e=function(t,e){if("object"!=Yp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yp(e)?e:String(e)}function Qp(){return Qp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=th(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Qp.apply(this,arguments)}function $p(t,e){return $p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$p(t,e)}function th(t){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},th(t)}const eh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$p(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=th(o);if(s){var r=th(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||Qp(th(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){Y("PortalSDK").then((function(){t._platformSdk=window.PortalSDK,t._platformSdk.initialize().then((function(){t._platformSdk.initializeOverlay(),t._defaultStorageType=u.PLATFORM_INTERNAL,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Qp(th(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Qp(th(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return Promise.resolve(n._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Qp(th(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t,r){return Promise.resolve(n._platformSdk.setValue(t,e[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(t,e))}return Qp(th(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var n=t.map((function(t){return Promise.resolve(r._platformSdk.removeValue(t))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(t))}return Qp(th(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.requestAd().then((function(){t._setInterstitialState(i.OPENED),t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.requestRewardAd().then((function(e){e?(t._setRewardedState(a.OPENED),t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):Qp(th(l.prototype),"sendMessage",this).call(this,t)}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t),n=this._getPromiseDecorator(_.PURCHASE);if(!n){n=this._createPromiseDecorator(_.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(t){var r=t.find((function(t){return t&&t.id===o}));if(!r)throw new Error("Shop item not found in catalog");return e._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=Kp({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e||!Array.isArray(e)||0===e.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=e.map((function(t){var e=t.id,n=r.find((function(t){return t&&t.id===e}));return n?{id:t.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=t.id,n=r.find((function(t){return t.id===e}));return n?Kp({id:n.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}])&&qp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function rh(t){return rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(t)}function nh(){nh=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==rh(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(rh(e)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},w(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function oh(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ih(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){oh(i,n,o,a,s,"next",t)}function s(t){oh(i,n,o,a,s,"throw",t)}a(void 0)}))}}function ah(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sh(n.key),n)}}function sh(t){var e=function(t,e){if("object"!=rh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rh(e)?e:String(e)}function ch(){return ch="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ch.apply(this,arguments)}function uh(t,e){return uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uh(t,e)}function lh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fh(t){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fh(t)}function ph(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function hh(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var dh=new WeakSet,yh=new WeakSet,mh=new WeakSet,vh=new WeakSet,_h=new WeakSet,gh=new WeakSet,Sh=new WeakSet,bh=new WeakSet,Eh=new WeakSet,Ph=new WeakSet;function wh(t){tt({type:t,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},"*")}function Ah(t){this._isPlayerAuthorized=t.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=t.playerId,this._playerName=t.playerName,t.playerPhoto&&this._playerPhotos.push(t.playerPhoto),this._defaultStorageType=u.PLATFORM_INTERNAL),this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE)}function Oh(t){var e,r;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,null!==(r=t.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(_.GET_STORAGE_DATA)}function Th(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA):this._rejectPromiseDecorator(_.SET_STORAGE_DATA)}function kh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA)}function Dh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.PURCHASE,t.data):this._rejectPromiseDecorator(_.PURCHASE,t.data)}function Ih(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_CATALOG,t.data):this._rejectPromiseDecorator(_.GET_CATALOG,t.data)}function Rh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_PURCHASES,t.data):this._rejectPromiseDecorator(_.GET_PURCHASES,t.data)}function Lh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.CREATE_POST):this._rejectPromiseDecorator(_.CREATE_POST)}function jh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.JOIN_COMMUNITY):this._rejectPromiseDecorator(_.JOIN_COMMUNITY)}const Nh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uh(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fh(a);if(s){var r=fh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lh(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ph(lh(t=c.call.apply(c,[this].concat(r))),Ph),ph(lh(t),Eh),ph(lh(t),bh),ph(lh(t),Sh),ph(lh(t),gh),ph(lh(t),_h),ph(lh(t),vh),ph(lh(t),mh),ph(lh(t),yh),ph(lh(t),dh),t}return r=l,n=[{key:"platformId",get:function(){return t.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(window.addEventListener("message",(function(e){if("devvit-message"===e.data.type){var r=e.data.data.message;r.type===_.INITIALIZE?hh(t,yh,Ah).call(t,r):r.type===_.GET_STORAGE_DATA?hh(t,mh,Oh).call(t,r):r.type===_.SET_STORAGE_DATA?hh(t,vh,Th).call(t,r):r.type===_.DELETE_STORAGE_DATA?hh(t,_h,kh).call(t,r):r.type===_.GET_CATALOG?hh(t,Sh,Ih).call(t,r):r.type===_.PURCHASE?hh(t,gh,Dh).call(t,r):r.type===_.GET_PURCHASES?hh(t,bh,Rh).call(t,r):r.type===_.CREATE_POST?hh(t,Eh,Lh).call(t,r):r.type===_.JOIN_COMMUNITY&&hh(t,Ph,jh).call(t)}})),e=this._createPromiseDecorator(_.INITIALIZE),hh(this,dh,wh).call(this,_.INITIALIZE)),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ch(fh(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ch(fh(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(_.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.GET_STORAGE_DATA),hh(this,dh,wh).call(this,_.GET_STORAGE_DATA,{key:t})),n.promise}return ch(fh(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=ih(nh().mark((function t(e,r,n){var o;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return(o=this._getPromiseDecorator(_.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(_.SET_STORAGE_DATA),hh(this,dh,wh).call(this,_.SET_STORAGE_DATA,{key:e,value:r})),t.abrupt("return",o.promise);case 4:return t.abrupt("return",ch(fh(l.prototype),"setDataToStorage",this).call(this,e,r,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=ih(nh().mark((function t(e,r){var n;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=4;break}return(n=this._getPromiseDecorator(_.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),hh(this,dh,wh).call(this,_.DELETE_STORAGE_DATA,{key:e})),t.abrupt("return",n.promise);case 4:return t.abrupt("return",ch(fh(l.prototype),"deleteDataFromStorage",this).call(this,e,r));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(t){var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),hh(this,dh,wh).call(this,_.PURCHASE,{id:t})),e.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var t=this._getPromiseDecorator(_.GET_CATALOG);return t||(t=this._createPromiseDecorator(_.GET_CATALOG),hh(this,dh,wh).call(this,_.GET_CATALOG)),t.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),hh(this,dh,wh).call(this,_.GET_PURCHASES)),t.promise}},{key:"createPost",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getPromiseDecorator(_.CREATE_POST);return e||(e=this._createPromiseDecorator(_.CREATE_POST),hh(this,dh,wh).call(this,_.CREATE_POST,{options:t})),e.promise}},{key:"joinCommunity",value:function(){var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),hh(this,dh,wh).call(this,_.JOIN_COMMUNITY)),t.promise}}],n&&ah(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Ch(t){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(t)}function Gh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mh(n.key),n)}}function Mh(t){var e=function(t,e){if("object"!=Ch(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ch(e)?e:String(e)}function Bh(){return Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Bh.apply(this,arguments)}function xh(t,e){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xh(t,e)}function Hh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fh(t){return Fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fh(t)}function Uh(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vh(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Wh(t,e,"get"))}function Wh(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var zh=new WeakSet,Zh=new WeakMap;function Yh(t){var e=document.createElement("ins");return e.style.display="block",e.classList.add("adsbygoogle"),e.setAttribute("data-ad-client",this._options.adSenseId),e.setAttribute("data-ad-slot",t),e.setAttribute("data-ad-format","auto"),e.setAttribute("data-container-id",c),e.setAttribute("data-full-width-responsive","true"),this._options.testMode&&e.setAttribute("data-adtest","on"),e}const Jh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xh(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fh(o);if(c){var r=Fh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hh(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Uh(e=Hh(t=u.call.apply(u,[this].concat(o))),r=zh),r.add(e),function(t,e,r){Uh(t,e),e.set(t,{writable:!0,value:function(){}})}(Hh(t),Zh),t}return r=l,(n=[{key:"platformId",get:function(){return t.XIAOMI}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();try{window.funmax&&window.funmax.loadStart&&window.funmax.loadStart()}catch(t){console.error(t)}var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.adSenseId?z({adSenseId:this._options.adSenseId,testMode:!!this._options.testMode}).then((function(e){var r,n;n=e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=t,Wh(r,Zh,"set"),n),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?new Promise((function(t){try{window.funmax&&window.funmax.loadReady&&window.funmax.loadReady()}catch(t){console.error(t)}t()})):Bh(Fh(l.prototype),"sendMessage",this).call(this,t)}},{key:"showBanner",value:function(t,e){if(!this._bannerContainer){this._bannerPlacement=e,this._bannerContainer=Z(t);var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,zh,Yh).call(this,e);this._bannerContainer.appendChild(r),this._setBannerState(s.SHOWN)}}},{key:"hideBanner",value:function(){var t;null===(t=this._bannerContainer)||void 0===t||t.remove(),this._bannerContainer=null,this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(t){var e=this;Vh(this,Zh)?Vh(this,Zh).call(this,{type:"start",name:t,beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(t){var e=this;Vh(this,Zh)?Vh(this,Zh).call(this,{type:"reward",name:t,beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}}])&&Gh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(go);function Kh(t){return Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(t)}function qh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=$h(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$h(n.key),n)}}function $h(t){var e=function(t,e){if("object"!=Kh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kh(e)?e:String(e)}function td(t,e){rd(t,e),e.add(t)}function ed(t,e,r){rd(t,e),e.set(t,r)}function rd(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nd(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ad(t,e,"set"),r),r}function od(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function id(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ad(t,e,"get"))}function ad(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var sd=new WeakMap,cd=new WeakMap,ud=new WeakMap,ld=new WeakMap,fd=new WeakMap,pd=new WeakSet,hd=new WeakSet,dd=new WeakSet;function yd(e){var r,n=t.MOCK,o=new URL(window.location.href);if(e.forciblySetPlatformId)n=od(this,hd,md).call(this,e.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=od(this,hd,md).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=t.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=t.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=t.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=t.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=t.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=t.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=t.PLAYDECK:o.hash.includes("tgWebAppData")?n=t.TELEGRAM:o.hostname.includes("y8")?n=t.Y8:o.hostname.includes("fbsbx")?n=t.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=t.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=t.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=t.BITQUEST:o.hostname.includes("eponesh.")?n=t.GAMEPUSH:o.hostname.includes("discordsays.com")?n=t.DISCORD:o.hostname.includes("usercontent.goog")?n=t.YOUTUBE:o.hostname.includes("portalapp.")?n=t.PORTAL:o.hostname.includes("devvit.")&&(n=t.REDDIT)}var a=e;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=X(a,a.platforms[n])),delete a.platforms,n){case t.VK:nd(this,ud,new No(a));break;case t.YANDEX:nd(this,ud,new ri(a));break;case t.CRAZY_GAMES:nd(this,ud,new Bi(a));break;case t.ABSOLUTE_GAMES:nd(this,ud,new qi(a));break;case t.GAME_DISTRIBUTION:nd(this,ud,new sa(a));break;case t.OK:nd(this,ud,new us(a));break;case t.PLAYGAMA:nd(this,ud,new ks(a));break;case t.PLAYDECK:nd(this,ud,new Ws(a));break;case t.TELEGRAM:nd(this,ud,new sc(a));break;case t.Y8:nd(this,ud,new Oc(a));break;case t.LAGGED:nd(this,ud,new jc(a));break;case t.FACEBOOK:nd(this,ud,new cu(a));break;case t.POKI:nd(this,ud,new dl(a));break;case t.QA_TOOL:nd(this,ud,new sl(a));break;case t.MSN:nd(this,ud,new zl(a));break;case t.HUAWEI:nd(this,ud,new Rf(a));break;case t.BITQUEST:nd(this,ud,new Zf(a));break;case t.GAMEPUSH:nd(this,ud,new sp(a));break;case t.DISCORD:nd(this,ud,new _p(a));break;case t.YOUTUBE:nd(this,ud,new Rp(a));break;case t.JIO_GAMES:nd(this,ud,new Zp(a));break;case t.PORTAL:nd(this,ud,new eh(a));break;case t.REDDIT:nd(this,ud,new Nh(a));break;case t.XIAOMI:nd(this,ud,new Jh(a));break;default:nd(this,ud,new go(a))}}function md(e){for(var r=Object.values(t),n=0;n<r.length;n++)if(e===r[n])return e;return t.MOCK}function vd(t){return id(this,sd)||console.error(g.SDK_NOT_INITIALIZED),id(this,ld)[t]}const _d=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),td(this,dd),td(this,hd),td(this,pd),ed(this,sd,{writable:!0,value:!1}),ed(this,cd,{writable:!0,value:null}),ed(this,ud,{writable:!0,value:null}),ed(this,ld,{writable:!0,value:{}}),ed(this,fd,{writable:!0,value:"javascript"})}var c,p;return c=r,(p=[{key:"version",get:function(){return"1.28.0-preview.1"}},{key:"isInitialized",get:function(){return id(this,sd)}},{key:"options",get:function(){return id(this,ud).options}},{key:"platform",get:function(){return od(this,dd,vd).call(this,e.PLATFORM)}},{key:"player",get:function(){return od(this,dd,vd).call(this,e.PLAYER)}},{key:"game",get:function(){return od(this,dd,vd).call(this,e.GAME)}},{key:"storage",get:function(){return od(this,dd,vd).call(this,e.STORAGE)}},{key:"advertisement",get:function(){return od(this,dd,vd).call(this,e.ADVERTISEMENT)}},{key:"social",get:function(){return od(this,dd,vd).call(this,e.SOCIAL)}},{key:"device",get:function(){return od(this,dd,vd).call(this,e.DEVICE)}},{key:"leaderboard",get:function(){return od(this,dd,vd).call(this,e.LEADERBOARDS)}},{key:"leaderboards",get:function(){return od(this,dd,vd).call(this,e.LEADERBOARDS)}},{key:"payments",get:function(){return od(this,dd,vd).call(this,e.PAYMENTS)}},{key:"achievements",get:function(){return od(this,dd,vd).call(this,e.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return od(this,dd,vd).call(this,e.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return od(this,dd,vd).call(this,e.CLIPBOARD)}},{key:"analytics",get:function(){return od(this,dd,vd).call(this,e.ANALYTICS)}},{key:"engine",get:function(){return id(this,fd)},set:function(t){nd(this,fd,t)}},{key:"PLATFORM_ID",get:function(){return t}},{key:"PLATFORM_MESSAGE",get:function(){return h}},{key:"MODULE_NAME",get:function(){return e}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"DEVICE_ORIENTATION",get:function(){return f}},{key:"initialize",value:function(t){var r=this;if(id(this,sd))return Promise.resolve();if(!id(this,cd)){nd(this,cd,new I);var n,o=performance.now(),i="./playgama-bridge-config.json";t&&t.configFilePath&&(i=t.configFilePath),fetch(i).then((function(t){return t.json()})).then((function(t){n=Xh({},t)})).catch((function(e){console.error("Config parsing error.",e),n=Xh({},t)})).finally((function(){od(r,pd,yd).call(r,n),id(r,ud).engine=r.engine,id(r,ld)[e.PLATFORM]=new Jt(id(r,ud)),id(r,ld)[e.PLAYER]=new te(id(r,ud)),id(r,ld)[e.GAME]=new ue(id(r,ud)),id(r,ld)[e.STORAGE]=new ye(id(r,ud)),id(r,ld)[e.ADVERTISEMENT]=new Or(id(r,ud)),id(r,ld)[e.SOCIAL]=new Lr(id(r,ud)),id(r,ld)[e.DEVICE]=new ln(id(r,ud)),id(r,ld)[e.LEADERBOARDS]=new Pn(id(r,ud)),id(r,ld)[e.PAYMENTS]=new Dn(id(r,ud)),id(r,ld)[e.REMOTE_CONFIG]=new Cn(id(r,ud)),id(r,ld)[e.CLIPBOARD]=new Fn(id(r,ud)),id(r,ld)[e.ACHIEVEMENTS]=new Yn(id(r,ud)),id(r,ld)[e.ANALYTICS]=Ct.initialize(id(r,ud)),id(r,ud).initialize().then((function(){var t,n;nd(r,sd,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white");var i=((performance.now()-o)/1e3).toFixed(2);if(Ct.send("".concat(e.CORE,"_initialization_completed"),e.CORE,{time_s:i}),id(r,cd)&&(id(r,cd).resolve(),nd(r,cd,null)),null!==(t=id(r,ud).options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.preloadOnStart){var a=id(r,ud).options.advertisement.interstitial.preloadOnStart;id(r,ld)[e.ADVERTISEMENT].preloadInterstitial(a)}if(null!==(n=id(r,ud).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var s=id(r,ud).options.advertisement.rewarded.preloadOnStart;id(r,ld)[e.ADVERTISEMENT].preloadRewarded(s)}})).catch((function(t){var r=((performance.now()-o)/1e3).toFixed(2),n=(null==t?void 0:t.message)||String(t);Ct.send("".concat(e.CORE,"_initialization_failed"),e.CORE,{error:n,time_s:r}),console.error("PlaygamaBridge initialization failed:",t)})).finally((function(){setTimeout((function(){return id(r,ld)[e.GAME].setLoadingProgress(100,!0)}),700)}))}))}return id(this,cd).promise}}])&&Qh(c.prototype,p),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge||window.playgamaBridge||(window.bridge=new _d,window.playgamaBridge=window.bridge)})()})();
