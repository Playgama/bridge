(()=>{var t={258:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return a(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,a(r,t).push(n),r;function n(){i.call(r,t,n),e.apply(this,arguments)}},off:i,emit:function(t,e){var r=this,n=a(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,i)}))}return!!n.length}};function o(t){for(var e in n)t[e]=n[e];return t}function i(t,e){var n,o=this;if(arguments.length){if(e){if(n=a(o,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[r][t]=n}}else if((n=o[r])&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(t,e,n){if(!n||t[r]){var o=t[r]||(t[r]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit",XIAOMI:"xiaomi"},e={CORE:"core",PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements",ANALYTICS:"analytics"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed",ORIENTATION_STATE_CHANGED:"orientation_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={PORTRAIT:"portrait",LANDSCAPE:"landscape"},p="bridge-orientation-overlay",h={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},d="not_available",y="in_game",m="native",v="native_popup",_={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},g={SDK_NOT_INITIALIZED:{message:"Before using the SDK you must initialize it"},STORAGE_NOT_SUPPORTED:{message:"Storage not supported"},STORAGE_NOT_AVAILABLE:{message:"Storage not available"},GAME_PARAMS_NOT_FOUND:{message:"Game params are not found"},INVITE_FRIENDS_MESSAGE_LENGTH_ERROR:{message:"Message is too long"}};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function E(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:String(e)}function w(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function P(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,O(t,e,"set"),r),r}function A(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,O(t,e,"get"))}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var T=new WeakMap,k=new WeakMap,D=new WeakMap;const I=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,T,{writable:!0,value:void 0}),w(this,k,{writable:!0,value:void 0}),w(this,D,{writable:!0,value:void 0}),P(this,T,new Promise((function(t,r){P(e,k,t),P(e,D,r)})))}var e,r;return e=t,(r=[{key:"promise",get:function(){return A(this,T)}},{key:"resolve",value:function(t){A(this,k).call(this,t)}},{key:"reject",value:function(t){A(this,D).call(this,t)}}])&&b(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var R=r(258),L=r.n(R);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function C(t,e,r){return e&&N(t.prototype,e),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:String(e)}const x=C((function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=void 0,(n=G(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=e})),B=JSON.parse('{"i8":"1.28.0-preview.1"}');function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=M(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==M(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var V=["post","Message"].join(""),W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=document.createElement("script");o.src=t;for(var i=0;i<Object.keys(e).length;i++){var a=Object.keys(e)[i],s=e[a];o.setAttribute(a,s)}o.addEventListener("load",r),o.addEventListener("error",(function(){return n(new Error("Failed to load: ".concat(t)))})),document.head.appendChild(o)}))},z=function(t){var e=t.adSenseId,r=t.channelId,n=t.hostId,o=t.interstitialPlacementId,i=t.rewardedPlacementId,a=t.adFrequencyHint,s=void 0===a?"180s":a,c=t.testMode,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(t){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",a.setAttribute("data-ad-client",e),r?a.setAttribute("data-ad-channel",r):n&&a.setAttribute("data-ad-host",n),o&&a.setAttribute("data-admob-interstitial-slot",o),i&&a.setAttribute("data-admob-rewarded-slot",i),u&&a.setAttribute("data-adbreak-test","on"),a.setAttribute("data-ad-frequency-hint",s),a.setAttribute("crossorigin","anonymous"),a.addEventListener("load",(function(){window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push(U({preloadAdBreaks:"on",sound:"on",onReady:function(){}},l)),t((function(t){return window.adsbygoogle.push(t)}))})),document.head.appendChild(a)}))};function Y(t){var e=document.createElement("div");return e.id=c,e.style.position="absolute",document.body.appendChild(e),"top"===t?(e.style.top="0px",e.style.height="90px",e.style.width="100%"):(e.style.bottom="0px",e.style.height="90px",e.style.width="100%"),e}var Z=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))},J=function(t){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(t)},K=function(t,e){return void 0===t[e]?null:t[e]};function q(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))return t.reduce((function(t,n,o){if(t[o]=K(e,n),r)try{t[o]=JSON.parse(t[o])}catch(t){}return t}),new Array(t.length));var n=K(e,t);if(r&&"string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}function X(t,e){for(var r=U({},t),n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];i in t&&e[i]instanceof Object&&t[i]instanceof Object?r[i]=X(t[i],e[i]):r[i]=e[i]}return r}function Q(){var t=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),e=Date.now().toString(36);return"".concat(t).concat(e)}function $(){var t,e="bridge_player_guest_id";try{t=localStorage.getItem(e)}catch(t){}if(!t){t=Q();try{localStorage.setItem(e,t)}catch(t){}}return{id:t,name:"Guest ".concat(t)}}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent[V](t,e)}function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function ot(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:String(e)}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function ct(t,e){lt(t,e),e.add(t)}function ut(t,e,r){lt(t,e),e.set(t,r)}function lt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ft(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,dt(t,e,"get"))}function pt(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ht(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,dt(t,e,"set"),r),r}function dt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var yt=new WeakMap,mt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,St=new WeakMap,bt=new WeakMap,Et=new WeakMap,wt=new WeakSet,Pt=new WeakSet,At=new WeakSet,Ot=new WeakSet,Tt=new WeakSet,kt=new WeakSet,Dt=new WeakSet,It=new WeakSet;function Rt(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():Q()}function Lt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{event_name:t,module:e,bridge_version:B.i8,platform_id:this._platformBridge.platformId,game_id:ft(this,_t),player_id:this._platformBridge.playerId,player_guest_id:ft(this,gt),session_id:ft(this,St),timestamp:(new Date).toISOString(),data:r}}function jt(){var e,r=this;if(0!==ft(this,yt).length){var n=function(t){if(Array.isArray(t))return rt(t)}(e=ft(this,yt))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();ht(this,yt,[]),ht(this,mt,null);var o="https://playgama.com/api/events/v2/bridge/analytics";this._platformBridge.platformId===t.DISCORD&&(o="/playgama/api/events/v2/bridge/analytics"),fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:n})}).then((function(t){if(!t.ok)throw new Error("Network response was not ok: ".concat(t.status));ht(r,bt,0)})).catch((function(){ht(r,bt,ft(r,bt)+1),ft(r,bt)>=2&&pt(r,Ot,Nt).call(r)}))}}function Nt(){ht(this,Et,!0),ht(this,yt,[]),ft(this,mt)&&(clearTimeout(ft(this,mt)),ht(this,mt,null)),ft(this,vt)&&(clearInterval(ft(this,vt)),ht(this,vt,null))}function Ct(){var e,r=this._platformBridge.options;switch(this._platformBridge.platformId){case t.GAME_DISTRIBUTION:case t.Y8:e=r.gameId;break;case t.HUAWEI:e=r.appId;break;case t.MSN:e=r.gameId;break;case t.DISCORD:e=r.appId;break;case t.GAMEPUSH:e=r.projectId;break;default:e=null}return e||(e=pt(this,kt,Gt).call(this,window.location.href)),e}function Gt(e){try{var r=new URL(e).pathname.split("/").filter(Boolean);switch(this._platformBridge.platformId){case t.YANDEX:var n=r.indexOf("app"),o=-1!==n?r[n+1]:null;if(o)return o;break;case t.LAGGED:var i=r.indexOf("g"),a=-1!==i?r[i+1]:null;if(a)return pt(this,Dt,xt).call(this,a);break;case t.CRAZY_GAMES:var s=r.indexOf("game"),c=-1!==s?r[s+1]:null;if(c)return pt(this,Dt,xt).call(this,c);break;case t.PLAYGAMA:var u=r.indexOf("game"),l=-1!==u?r[u+1]:null;if(l)return pt(this,Dt,xt).call(this,l);var f=r[0];if("string"==typeof f&&/^[a-z0-9]{10,}$/i.test(f))return f}}catch(t){return null}return null}function xt(t){return"string"!=typeof t||0===t.length?"":t.replace(/-/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))}function Bt(){var t=this;ft(this,vt)||ht(this,vt,setInterval((function(){t.send("".concat(e.CORE,"_ping"),e.CORE)}),15e3))}const Mt=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=st(o);if(i){var r=st(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return at(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),ct(at(t=a.call(this)),It),ct(at(t),Dt),ct(at(t),kt),ct(at(t),Tt),ct(at(t),Ot),ct(at(t),At),ct(at(t),Pt),ct(at(t),wt),ut(at(t),yt,{writable:!0,value:[]}),ut(at(t),mt,{writable:!0,value:null}),ut(at(t),vt,{writable:!0,value:null}),ut(at(t),_t,{writable:!0,value:null}),ut(at(t),gt,{writable:!0,value:null}),ut(at(t),St,{writable:!0,value:null}),ut(at(t),bt,{writable:!0,value:0}),ut(at(t),Et,{writable:!0,value:!1}),ht(at(t),St,pt(at(t),wt,Rt).call(at(t))),t}return r=s,n=[{key:"initialize",value:function(t){var r;this._platformBridge=t,!1===(null===(r=this._platformBridge.options)||void 0===r?void 0:r.sendAnalyticsEvents)&&ht(this,Et,!0);var n=window.location.href;(n.startsWith("file://")||n.includes("localhost")||n.includes("127.0.0.1"))&&ht(this,Et,!0),ht(this,_t,pt(this,Tt,Ct).call(this)),ht(this,gt,$().id);var o=pt(this,Pt,Lt).call(this,"".concat(e.CORE,"_initialization_started"),e.CORE);return ft(this,yt).push(o),pt(this,It,Bt).call(this),this}},{key:"send",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!ft(this,Et)){var o=pt(this,Pt,Lt).call(this,t,e,n);ft(this,yt).push(o),ft(this,mt)&&clearTimeout(ft(this,mt)),ht(this,mt,setTimeout((function(){pt(r,At,jt).call(r)}),3e3))}}}],n&&nt(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(x));function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:String(e)}function Vt(t,e){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vt(t,e)}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zt(t)}function Yt(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Zt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Jt(t,e,"get"))}function Jt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Kt=new WeakMap,qt=new WeakMap,Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vt(t,e)}(c,t);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zt(i);if(a){var r=zt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wt(t)}(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Yt(Wt(e=s.call(this,t)),Kt,{writable:!0,value:!1}),Yt(Wt(e),qt,{writable:!0,value:performance.now()}),e._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(t){return e.emit(n.AUDIO_STATE_CHANGED,t)})),e._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(t){return e.emit(n.PAUSE_STATE_CHANGED,t)})),e}return r=c,(o=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(t){var r,n,o={};if(t===h.GAME_READY){if(Zt(this,Kt))return Promise.reject();n=!0,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=this,Jt(r,Kt,"set"),n),o={time_s:((performance.now()-Zt(this,qt))/1e3).toFixed(2)};var i=document.getElementById("loading-overlay");i&&i.remove()}return Mt.send("".concat(e.PLATFORM,"_message_").concat(t),e.PLATFORM,o),this._platformBridge.sendMessage(t)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getGameById(e)}return this._platformBridge.getGameById(t)}}])&&Ft(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(x);L().mixin(Xt.prototype);const Qt=Xt;function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$t(e)?e:String(e)}function re(t,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},re(t,e)}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(t)}const oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ne(n);if(o){var r=ne(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.authorize(e)}return this._platformBridge.authorizePlayer(t)}}])&&te(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fe(n.key),n)}}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(t)}function le(t,e,r){return(e=fe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fe(t){var e=function(t,e){if("object"!=ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:String(e)}var pe=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(c,e);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ue(i);if(a){var r=ue(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}(this,t)});function c(e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),le(ce(r=s.call(this,e)),"_currentLoadingProgress",null),le(ce(r),"_loadingProcessCompleted",!1),r._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(t){return r.emit(n.VISIBILITY_STATE_CHANGED,t)})),r._platformBridge.options.disableLoadingLogo||function(t){var e=document.createElement("style");e.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(e);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===t?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),h=document.createElementNS(f.namespaceURI,"mask");h.setAttribute("id","logo-mask");var d=document.createElementNS(f.namespaceURI,"rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","black"),h.appendChild(d),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("fill","white"),h.appendChild(e)})),p.appendChild(h);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(t){var e=t.offset,r=t.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",e),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("stroke",n.strokeColor),e.setAttribute("stroke-width","3"),f.appendChild(e)})),r.appendChild(f)}(r._platformBridge.platformId!==t.YANDEX&&r._platformBridge.options.showFullLoadingLogo),r}return r=c,o=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||e&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=t;var a=Math.max(0,Math.min(100,t)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],o&&ae(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(x);L().mixin(pe.prototype);const he=pe;function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,me(n.key),n)}}function me(t){var e=function(t,e){if("object"!=de(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==de(e)?e:String(e)}function ve(t,e){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ve(t,e)}function _e(t){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_e(t)}const ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ve(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_e(n);if(o){var r=_e(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageSupported(t)}},{key:"isAvailable",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageAvailable(t)}},{key:"get",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e[this._platformBridge.platformId];if(n)return this.get(t,n,r)}var o=e;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?Array.isArray(t)&&0===t.length?Promise.resolve([]):this._platformBridge.getDataFromStorage(t,o,r):Promise.reject()}},{key:"set",value:function(t,e,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(t,e,n)}var o=r;if(o||(o=this.defaultType),!this._platformBridge.isStorageAvailable(o))return Promise.reject();if(Array.isArray(t)){if(!Array.isArray(e))return Promise.reject(new Error("Value must be an array when key is an array"));if(t.length!==e.length)return Promise.reject(new Error("Key and value arrays must have the same length"));if(0===t.length)return Promise.resolve()}return this._platformBridge.setDataToStorage(t,e,o)}},{key:"delete",value:function(t,e){if(e){var r=e[this._platformBridge.platformId];if(r)return this.delete(t,r)}var n=e;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?Array.isArray(t)&&0===t.length?Promise.resolve():this._platformBridge.deleteDataFromStorage(t,n):Promise.reject()}}],r&&ye(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function Ee(t){var e=function(t,e){if("object"!=Se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Se(e)?e:String(e)}function we(t,e){Ae(t,e),e.add(t)}function Pe(t,e,r){Ae(t,e),e.set(t,r)}function Ae(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Te(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,De(t,e,"set"),r),r}function ke(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,De(t,e,"get"))}function De(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ie="started",Re=new WeakMap,Le=new WeakMap,je=new WeakMap,Ne=new WeakMap,Ce=new WeakSet,Ge=new WeakSet,xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),we(this,Ge),we(this,Ce),Pe(this,Re,{writable:!0,value:0}),Pe(this,Le,{writable:!0,value:0}),Pe(this,je,{writable:!0,value:"created"}),Pe(this,Ne,{writable:!0,value:0}),Te(this,Re,e)}var e,r;return e=t,(r=[{key:"state",get:function(){return ke(this,je)}},{key:"start",value:function(){var t=this;ke(this,je)!==Ie&&(Te(this,Le,ke(this,Re)),Oe(this,Ce,Be).call(this,Ie),Te(this,Ne,setInterval((function(){Te(t,Le,ke(t,Le)-1),t.emit("time_left_changed",ke(t,Le)),ke(t,Le)<=0&&(Oe(t,Ge,Me).call(t),Oe(t,Ce,Be).call(t,"completed"))}),1e3)))}},{key:"stop",value:function(){Oe(this,Ge,Me).call(this),ke(this,je)===Ie&&Oe(this,Ce,Be).call(this,"stopped")}}])&&be(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Be(t){Te(this,je,t),this.emit("state_changed",ke(this,je))}function Me(){clearInterval(ke(this,Ne)),Te(this,Le,0)}L().mixin(xe.prototype);const He=xe;function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ve(n.key),n)}}function Ve(t){var e=function(t,e){if("object"!=Fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fe(e)?e:String(e)}function We(t,e){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},We(t,e)}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ye(t)}function Ze(t,e){Ke(t,e),e.add(t)}function Je(t,e,r){Ke(t,e),e.set(t,r)}function Ke(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qe(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,$e(t,e,"set"),r),r}function Xe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Qe(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,$e(t,e,"get"))}function $e(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var tr=new WeakMap,er=new WeakMap,rr=new WeakMap,nr=new WeakMap,or=new WeakMap,ir=new WeakMap,ar=new WeakMap,sr=new WeakMap,cr=new WeakMap,ur=new WeakSet,lr=new WeakSet,fr=new WeakSet,pr=new WeakSet,hr=new WeakSet,dr=new WeakSet,yr=new WeakSet,mr=new WeakSet,vr=new WeakSet,_r=new WeakSet,gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&We(t,e)}(l,t);var e,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ye(o);if(c){var r=Ye(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ze(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Ze(ze(e=u.call(this,t)),_r),Ze(ze(e),vr),Ze(ze(e),mr),Ze(ze(e),yr),Ze(ze(e),dr),Ze(ze(e),hr),Ze(ze(e),pr),Ze(ze(e),fr),Ze(ze(e),lr),Ze(ze(e),ur),Je(ze(e),tr,{writable:!0,value:s.HIDDEN}),Je(ze(e),er,{writable:!0,value:null}),Je(ze(e),rr,{writable:!0,value:null}),Je(ze(e),nr,{writable:!0,value:i.CLOSED}),Je(ze(e),or,{writable:!0,value:null}),Je(ze(e),ir,{writable:!0,value:void 0}),Je(ze(e),ar,{writable:!0,value:60}),Je(ze(e),sr,{writable:!0,value:a.CLOSED}),Je(ze(e),cr,{writable:!0,value:null}),e._platformBridge.on(n.BANNER_STATE_CHANGED,(function(t){return Xe(ze(e),yr,Or).call(ze(e),t)})),e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(t){t===i.CLOSED&&Xe(ze(e),hr,Pr).call(ze(e)),Xe(ze(e),mr,Tr).call(ze(e),t)})),e._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(t){return Xe(ze(e),vr,kr).call(ze(e),t)})),Xe(ze(e),fr,Er).call(ze(e)),e}return e=l,r=[{key:"isBannerSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return Qe(this,tr)}},{key:"isInterstitialSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return Qe(this,nr)}},{key:"isRewardedSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return Qe(this,cr)}},{key:"rewardedState",get:function(){return Qe(this,sr)}},{key:"minimumDelayBetweenInterstitial",get:function(){return Qe(this,ar)}},{key:"setMinimumDelayBetweenInterstitial",value:function(t){if(null===Xe(this,lr,br).call(this,Xe(this,pr,wr).call(this))){var e=Xe(this,lr,br).call(this,t);null!==e&&Xe(this,ur,Sr).call(this,e)}}},{key:"showBanner",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN){qe(this,er,e);var n,o=r;if(o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback),qe(this,rr,o),Xe(this,yr,Or).call(this,s.LOADING),this.isBannerSupported){var i=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.placements,a=Xe(this,_r,Dr).call(this,o,i);this._platformBridge.showBanner(e,a)}else Xe(this,yr,Or).call(this,s.FAILED)}}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,i=Xe(this,_r,Dr).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Xe(this,dr,Ar).call(this)){var r,n=e;if(n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback),qe(this,or,n),Xe(this,mr,Tr).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&Qe(this,ir)&&Qe(this,ir).state===Ie)Xe(this,mr,Tr).call(this,i.FAILED);else{var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,a=Xe(this,_r,Dr).call(this,n,o);this._platformBridge.showInterstitial(a)}else Xe(this,mr,Tr).call(this,i.FAILED)}}},{key:"preloadRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,i=Xe(this,_r,Dr).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Xe(this,dr,Ar).call(this)){var r;qe(this,cr,e),Qe(this,cr)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&qe(this,cr,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,o=Xe(this,_r,Dr).call(this,Qe(this,cr),n);Xe(this,vr,kr).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):Xe(this,vr,kr).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Ue(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(x);function Sr(t){qe(this,ar,t),Qe(this,ir)&&(Qe(this,ir).stop(),Xe(this,hr,Pr).call(this))}function br(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseInt(t,10);return Number.isNaN(e)?null:e}return null}function Er(){var t=Xe(this,pr,wr).call(this);if(void 0!==t){var e=Xe(this,lr,br).call(this,t);null!==e&&Xe(this,ur,Sr).call(this,e)}}function wr(){var t;return null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.minimumDelayBetweenInterstitial}function Pr(){Qe(this,ar)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(qe(this,ir,new He(Qe(this,ar))),Qe(this,ir).start())}function Ar(){var t=[i.LOADING,i.OPENED].includes(Qe(this,nr)),e=[a.LOADING,a.OPENED,a.REWARDED].includes(Qe(this,sr));return t||e}function Or(t){Qe(this,tr)!==t&&(qe(this,tr,t),Mt.send("".concat(e.ADVERTISEMENT,"_banner_").concat(t),e.ADVERTISEMENT,{position:Qe(this,er),placement:Qe(this,rr)}),this.emit(n.BANNER_STATE_CHANGED,Qe(this,tr)))}function Tr(t){Qe(this,nr)!==t&&(qe(this,nr,t),Mt.send("".concat(e.ADVERTISEMENT,"_interstitial_").concat(t),e.ADVERTISEMENT,{placement:Qe(this,or)}),this.emit(n.INTERSTITIAL_STATE_CHANGED,Qe(this,nr)))}function kr(t){Qe(this,sr)!==t&&(qe(this,sr,t),Mt.send("".concat(e.ADVERTISEMENT,"_rewarded_").concat(t),e.ADVERTISEMENT,{placement:Qe(this,cr)}),this.emit(n.REWARDED_STATE_CHANGED,Qe(this,sr)))}function Dr(t,e){if(!t)return t;if(!e)return t;var r=e.find((function(e){return e.id===t}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:t}L().mixin(gr.prototype);const Ir=gr;function Rr(t){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(t)}function Lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jr(n.key),n)}}function jr(t){var e=function(t,e){if("object"!=Rr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rr(e)?e:String(e)}function Nr(t,e){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nr(t,e)}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(t)}const Gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cr(n);if(o){var r=Cr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Rr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.inviteFriends(e)}return this._platformBridge.inviteFriends(t)}},{key:"joinCommunity",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.joinCommunity(e)}return this._platformBridge.joinCommunity(t)}},{key:"share",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.share(e)}return this._platformBridge.share(t)}},{key:"createPost",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.createPost(e)}return this._platformBridge.createPost(t)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&Lr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mr(n.key),n)}}function Mr(t){var e=function(t,e){if("object"!=xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xr(e)?e:String(e)}function Hr(t,e){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hr(t,e)}function Fr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ur(t){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ur(t)}function Vr(t,e){zr(t,e),e.add(t)}function Wr(t,e,r){zr(t,e),e.set(t,r)}function zr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Kr(t,e,"set"),r),r}function Zr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Jr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Kr(t,e,"get"))}function Kr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var qr=new WeakMap,Xr=new WeakMap,Qr=new WeakMap,$r=new WeakMap,tn=new WeakSet,en=new WeakSet,rn=new WeakSet,nn=new WeakSet,on=new WeakSet,an=new WeakSet,sn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ur(n);if(o){var r=Ur(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fr(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Vr(Fr(e=i.call(this,t)),an),Vr(Fr(e),on),Vr(Fr(e),nn),Vr(Fr(e),rn),Vr(Fr(e),en),Vr(Fr(e),tn),Wr(Fr(e),qr,{writable:!0,value:null}),Wr(Fr(e),Xr,{writable:!0,value:null}),Wr(Fr(e),Qr,{writable:!0,value:null}),Wr(Fr(e),$r,{writable:!0,value:!1}),Zr(Fr(e),tn,cn).call(Fr(e)),e}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}},{key:"orientation",get:function(){return Jr(this,qr)}}])&&Br(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function cn(){var t,e,r,n=this,o=this._platformBridge.deviceType;if(o===l.MOBILE||o===l.TABLET){var i=null===(t=this._platformBridge.options)||void 0===t?void 0:t.device;Yr(this,$r,null!==(e=null==i?void 0:i.useBuiltInOrientationPopup)&&void 0!==e&&e),Yr(this,Qr,null!==(r=null==i?void 0:i.supportedOrientations)&&void 0!==r?r:[f.PORTRAIT,f.LANDSCAPE]),Yr(this,qr,Zr(this,en,un).call(this)),window.screen.orientation?window.screen.orientation.addEventListener("change",(function(){return Zr(n,rn,ln).call(n)})):window.addEventListener("orientationchange",(function(){return Zr(n,rn,ln).call(n)})),window.addEventListener("resize",(function(){return Zr(n,rn,ln).call(n)})),Zr(this,nn,fn).call(this)}}function un(){var t;return null!==(t=window.screen.orientation)&&void 0!==t&&t.type?window.screen.orientation.type.includes("portrait")?f.PORTRAIT:f.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?f.PORTRAIT:f.LANDSCAPE:window.innerHeight>window.innerWidth?f.PORTRAIT:f.LANDSCAPE}function ln(){var t=Zr(this,en,un).call(this);t!==Jr(this,qr)&&(Yr(this,qr,t),this.emit(n.ORIENTATION_STATE_CHANGED,Jr(this,qr)),Zr(this,nn,fn).call(this))}function fn(){if(Jr(this,$r))if(1===Jr(this,Qr).length){var t=Jr(this,Qr)[0];Jr(this,qr)!==t?Zr(this,on,pn).call(this):Zr(this,an,hn).call(this)}else Zr(this,an,hn).call(this)}function pn(){Jr(this,Xr)||(Yr(this,Xr,function(){if(!document.getElementById("bridge-orientation-overlay-styles")){var t=document.createElement("style");t.id="bridge-orientation-overlay-styles",t.textContent="\n            #".concat(p," {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.95);\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                z-index: 9999999;\n            }\n\n            #bridge-orientation-icon {\n                width: 80px;\n                height: 80px;\n                animation: bridge-rotate-phone 1.5s ease-in-out infinite;\n            }\n\n            #bridge-orientation-message {\n                color: #fff;\n                font-size: 18px;\n                font-family: Arial, sans-serif;\n                margin-top: 20px;\n                text-align: center;\n            }\n\n            @keyframes bridge-rotate-phone {\n                0%, 100% { transform: rotate(0deg); }\n                50% { transform: rotate(90deg); }\n            }\n        "),document.head.appendChild(t)}var e=document.createElement("div");e.id=p;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","bridge-orientation-icon"),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.innerHTML='\n        <rect x="5" y="2" width="14" height="20" rx="2" stroke="white" stroke-width="2"/>\n        <line x1="12" y1="18" x2="12" y2="18" stroke="white" stroke-width="2" stroke-linecap="round"/>\n    ';var n=document.createElement("div");return n.id="bridge-orientation-message",n.innerText="Please rotate your device",e.appendChild(r),e.appendChild(n),e}()),document.body.appendChild(Jr(this,Xr)))}function hn(){Jr(this,Xr)&&(Jr(this,Xr).remove(),Yr(this,Xr,null))}L().mixin(sn.prototype);const dn=sn;function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vn(n.key),n)}}function vn(t){var e=function(t,e){if("object"!=yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yn(e)?e:String(e)}function _n(t,e){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_n(t,e)}function gn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sn(t){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sn(t)}var bn=new WeakSet;function En(t){var e,r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return!1;var n=r.find((function(e){return e.id===t}));return!!n&&!0===n.isMain}const wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_n(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sn(n);if(o){var r=Sn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gn(t)}(this,t)});function a(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=gn(t=i.call.apply(i,[this].concat(o))),r=bn),r.add(e),t}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(t,e){var r=this._getPlatformLeaderboardId(t),n=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,bn,En).call(this,t);return this._platformBridge.leaderboardsSetScore(r,e,n)}},{key:"getEntries",value:function(t){var e=this._getPlatformLeaderboardId(t);return this._platformBridge.leaderboardsGetEntries(e)}},{key:"showNativePopup",value:function(t){var e=this._getPlatformLeaderboardId(t);return this._platformBridge.leaderboardsShowNativePopup(e)}},{key:"_getPlatformLeaderboardId",value:function(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:t}}])&&mn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function An(){An=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Pn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Pn(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function On(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?On(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Rn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kn(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Dn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){kn(i,n,o,a,s,"next",t)}function s(t){kn(i,n,o,a,s,"throw",t)}a(void 0)}))}}function In(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rn(n.key),n)}}function Rn(t){var e=function(t,e){if("object"!=Pn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pn(e)?e:String(e)}function Ln(t,e){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ln(t,e)}function jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nn(t){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nn(t)}function Cn(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Gn(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function Bn(){Bn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==xn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(xn(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Mn(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Hn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mn(i,n,o,a,s,"next",t)}function s(t){Mn(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Un(n.key),n)}}function Un(t){var e=function(t,e){if("object"!=xn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xn(e)?e:String(e)}function Vn(t,e){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vn(t,e)}function Wn(t){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wn(t)}const zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vn(t,e)}(c,t);var e,r,n,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wn(i);if(a){var r=Wn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=c,r=[{key:"type",get:function(){return y}},{key:"setScore",value:(o=Hn(Bn().mark((function t(e,r){var n;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._getSaasPlatformLeaderboardId(e),t.abrupt("return",this.request.post("leaderboards/".concat(n,"/entries"),{score:r}));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"getEntries",value:(n=Hn(Bn().mark((function t(e){var r;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._getSaasPlatformLeaderboardId(e),t.abrupt("return",this.request.get("leaderboards/".concat(r,"/entries")));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getSaasPlatformLeaderboardId",value:function(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n.saas||t}}],r&&Fn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(function(t){var e,r;return e=new WeakSet,r=new WeakSet,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ln(t,e)}(l,t);var o,a,s,c,u=(s=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nn(s);if(c){var r=Nn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jn(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Cn(jn(t=u.call.apply(u,[this].concat(o))),r),Cn(jn(t),e),t}return o=l,(a=[{key:"baseUrl",get:function(){return this._platformBridge.options.saas.baseUrl||"https://playgama.com/api/bridge/v1"}},{key:"xHeaders",get:function(){return{"x-player-id":this._platformBridge.playerId||"","x-platform-id":this._platformBridge.platformId}}},{key:"request",get:function(){return{get:Gn(this,e,n).bind(this),post:Gn(this,r,i).bind(this)}}}])&&In(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),l}(t);function n(t){return o.apply(this,arguments)}function o(){return(o=Dn(An().mark((function t(e){return An().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(e),{method:"GET",credentials:"include",headers:Tn({"Content-Type":"application/json"},this.xHeaders)}).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function i(t,e){return a.apply(this,arguments)}function a(){return(a=Dn(An().mark((function t(e,r){return An().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",body:JSON.stringify(r),credentials:"include",headers:Tn({"Content-Type":"application/json"},this.xHeaders)}).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}}(wn));function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function Zn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jn(n.key),n)}}function Jn(t){var e=function(t,e){if("object"!=Yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yn(e)?e:String(e)}function Kn(t,e){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kn(t,e)}function qn(t){return qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qn(t)}const Xn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qn(o);if(i){var r=qn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return r=s,(n=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(t,r){return Mt.send("".concat(e.PAYMENTS,"_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsPurchase(t,r).then((function(r){return Mt.send("".concat(e.PAYMENTS,"_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Mt.send("".concat(e.PAYMENTS,"_purchase_failed"),e.PAYMENTS,{id:t}),r}))}},{key:"getPurchases",value:function(){return Mt.send("".concat(e.PAYMENTS,"_get_purchases_started"),e.PAYMENTS),this._platformBridge.paymentsGetPurchases().then((function(t){return Mt.send("".concat(e.PAYMENTS,"_get_purchases_completed"),e.PAYMENTS),t})).catch((function(t){throw Mt.send("".concat(e.PAYMENTS,"_get_purchases_failed"),e.PAYMENTS),t}))}},{key:"getCatalog",value:function(){return Mt.send("".concat(e.PAYMENTS,"_get_catalog_started"),e.PAYMENTS),this._platformBridge.paymentsGetCatalog().then((function(t){return Mt.send("".concat(e.PAYMENTS,"_get_catalog_completed"),e.PAYMENTS),t})).catch((function(t){throw Mt.send("".concat(e.PAYMENTS,"_get_catalog_failed"),e.PAYMENTS),t}))}},{key:"consumePurchase",value:function(t){return Mt.send("".concat(e.PAYMENTS,"_consume_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsConsumePurchase(t).then((function(r){return Mt.send("".concat(e.PAYMENTS,"_consume_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Mt.send("".concat(e.PAYMENTS,"_consume_purchase_failed"),e.PAYMENTS,{id:t}),r}))}}])&&Zn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(x);function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function $n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,to(n.key),n)}}function to(t){var e=function(t,e){if("object"!=Qn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qn(e)?e:String(e)}function eo(t,e){return eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eo(t,e)}function ro(t){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ro(t)}const no=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ro(n);if(o){var r=ro(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.get(e)}return this._platformBridge.getRemoteConfig(t)}}])&&$n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}function io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ao(n.key),n)}}function ao(t){var e=function(t,e){if("object"!=oo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oo(e)?e:String(e)}function so(t,e){return so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},so(t,e)}function co(t){return co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},co(t)}const uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&so(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=co(n);if(o){var r=co(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(t){return this._platformBridge.clipboardWrite(t)}}])&&io(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function lo(t){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lo(t)}function fo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,po(n.key),n)}}function po(t){var e=function(t,e){if("object"!=lo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lo(e)?e:String(e)}function ho(t,e){return ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ho(t,e)}function yo(t){return yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yo(t)}const mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yo(n);if(o){var r=yo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.unlock(e)}return this._platformBridge.unlockAchievement(t)}},{key:"getList",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getList(e)}return this._platformBridge.getAchievementsList(t)}},{key:"showNativePopup",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.showNativePopup(e)}return this._platformBridge.showAchievementsNativePopup(t)}}])&&fo(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function vo(t){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vo(t)}function _o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,go(n.key),n)}}function go(t){var e=function(t,e){if("object"!=vo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vo(e)?e:String(e)}function So(t,e,r){bo(t,e),e.set(t,r)}function bo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Eo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function wo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ao(t,e,"get"))}function Po(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ao(t,e,"set"),r),r}function Ao(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Oo=new WeakMap,To=new WeakMap,ko=new WeakMap,Do=new WeakSet;function Io(){var t=Object.values(wo(this,Oo)).some((function(t){return!0===t}));wo(this,To)!==t&&(Po(this,To,t),wo(this,ko).call(this,wo(this,To)))}const Ro=function(){function t(e,r){var n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bo(this,n=Do),n.add(this),So(this,Oo,{writable:!0,value:{}}),So(this,To,{writable:!0,value:!1}),So(this,ko,{writable:!0,value:null}),Po(this,ko,r),e.forEach((function(t){wo(o,Oo)[t]=!1}))}var e,r;return e=t,(r=[{key:"setState",value:function(t,e){t in wo(this,Oo)&&"boolean"==typeof e&&wo(this,Oo)[t]!==e&&(wo(this,Oo)[t]=e,Eo(this,Do,Io).call(this))}},{key:"getState",value:function(t){return t in wo(this,Oo)&&wo(this,Oo)[t]}},{key:"getAggregatedState",value:function(){return wo(this,To)}},{key:"resetAll",value:function(){var t=this;Object.keys(wo(this,Oo)).forEach((function(e){wo(t,Oo)[e]=!1})),Eo(this,Do,Io).call(this)}}])&&_o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lo(t){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lo(t)}function jo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function No(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jo(Object(r),!0).forEach((function(e){Go(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xo(n.key),n)}}function Go(t,e,r){return(e=xo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xo(t){var e=function(t,e){if("object"!=Lo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lo(e)?e:String(e)}function Bo(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var Mo=new WeakMap,Ho=function(){function e(t){var r,i,a,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Go(this,"_isInitialized",!1),Go(this,"_platformSdk",null),Go(this,"_isPlayerAuthorized",!1),Go(this,"_playerId",null),Go(this,"_playerName",null),Go(this,"_playerPhotos",[]),Go(this,"_playerExtra",{}),Go(this,"_visibilityState",null),Go(this,"_localStorage",null),Go(this,"_defaultStorageType",u.LOCAL_STORAGE),Go(this,"_platformStorageCachedData",null),Go(this,"_isBannerSupported",!1),Go(this,"_paymentsPurchases",[]),Go(this,"_pauseStateAggregator",null),Go(this,"_audioStateAggregator",null),a={writable:!0,value:{}},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=Mo),i.set(r,a);try{this._localStorage=window.localStorage}catch(t){}this._visibilityState=document.visibilityState;var c=["interstitial","rewarded","visibility","platform"];this._pauseStateAggregator=new Ro(c,(function(t){return s.emit(n.PAUSE_STATE_CHANGED,t)})),this._audioStateAggregator=new Ro(c,(function(t){return s.emit(n.AUDIO_STATE_CHANGED,!t)})),document.addEventListener("visibilitychange",(function(){s._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){s._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){s._setVisibilityState(o.VISIBLE)})),t&&(this._options=No({},t))}var r,c;return r=e,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return t.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var t=navigator.language;return"string"==typeof t?t.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!this._audioStateAggregator||!this._audioStateAggregator.getAggregatedState()}},{key:"isPlatformPaused",get:function(){return!!this._pauseStateAggregator&&this._pauseStateAggregator.getAggregatedState()}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(t,e){fetch("https://playgama.com/api/v1/timestamp/now").then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(e){t(1e3*e.timestamp)})).catch((function(){e()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(this._getDataFromLocalStorage(t[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(t,r);return Promise.resolve(i)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,e,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this._setDataToLocalStorage(t[n],e[n]);return Promise.resolve()}return this._setDataToLocalStorage(t,e),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this._deleteDataFromLocalStorage(t[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(t),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var t=document.createElement("div");t.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",t.style.position="absolute",t.style.left="-9999px",t.style.width="1px",t.style.height="1px",document.body.appendChild(t);var e={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e).then((function(e){e.redirected?r(e.redirected):window.setTimeout((function(){var e,n=0===t.offsetHeight||"none"===(null===(e=window.getComputedStyle(t))||void 0===e?void 0:e.display);r(n),t.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(t){if(this.isPaymentsSupported){var e={id:t};return this._paymentsPurchases.push(e),Promise.resolve(e)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(t){if(this.isPaymentsSupported){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));return e<0?Promise.reject():(this._paymentsPurchases.splice(e,1),Promise.resolve({id:t}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(t){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(t):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(t,e){var r=this._localStorage.getItem(t);if(e&&"string"==typeof r)try{r=JSON.parse(r)}catch(t){}return r}},{key:"_setDataToLocalStorage",value:function(t,e){this._localStorage.setItem(t,"object"===Lo(e)?JSON.stringify(e):e)}},{key:"_deleteDataFromLocalStorage",value:function(t){this._localStorage.removeItem(t)}},{key:"_setVisibilityState",value:function(t){if(this._visibilityState!==t){this._visibilityState=t,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState);var e=t===o.HIDDEN;this._pauseStateAggregator&&this._pauseStateAggregator.setState("visibility",e),this._audioStateAggregator&&this._audioStateAggregator.setState("visibility",e)}}},{key:"_setBannerState",value:function(t){this.emit(n.BANNER_STATE_CHANGED,t)}},{key:"_setInterstitialState",value:function(t){this.emit(n.INTERSTITIAL_STATE_CHANGED,t);var e=t===i.OPENED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("interstitial",e),this._audioStateAggregator&&this._audioStateAggregator.setState("interstitial",e)}},{key:"_setRewardedState",value:function(t){this.emit(n.REWARDED_STATE_CHANGED,t);var e=t===a.OPENED||t===a.REWARDED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("rewarded",e),this._audioStateAggregator&&this._audioStateAggregator.setState("rewarded",e)}},{key:"_setAudioState",value:function(t){this._audioStateAggregator?this._audioStateAggregator.setState("platform",!t):this.emit(n.AUDIO_STATE_CHANGED,t)}},{key:"_setPauseState",value:function(t){this._pauseStateAggregator?this._pauseStateAggregator.setState("platform",t):this.emit(n.PAUSE_STATE_CHANGED,t)}},{key:"_createPromiseDecorator",value:function(t){var e=new I;return Bo(this,Mo)[t]=e,e}},{key:"_getPromiseDecorator",value:function(t){return Bo(this,Mo)[t]}},{key:"_resolvePromiseDecorator",value:function(t,e){Bo(this,Mo)[t]&&(Bo(this,Mo)[t].resolve(e),delete Bo(this,Mo)[t])}},{key:"_rejectPromiseDecorator",value:function(t,e){Bo(this,Mo)[t]&&(Bo(this,Mo)[t].reject(e),delete Bo(this,Mo)[t])}},{key:"_paymentsGetProductsPlatformData",value:function(){var t=this;return this._options.payments?this._options.payments.map((function(e){var r=No({},e[t.platformId]);return r.platformProductId=r.id,r.id=e.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));if(!r)return null;var n=No({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(t){return"".concat(t,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(t){var e,r=this;return(null===(e=this._options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.useBuiltInErrorPopup)?function(t){if(!document.getElementById("bridge-info-popup-styles")){var e=document.createElement("style");e.id="bridge-info-popup-styles",e.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(e)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(t){o.onclick=function(){n.style.display="none",r.style.display="none",t()},r.style.display="block",n.style.display="flex"}))}().then((function(){t?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(t?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var t=$();this._playerId=t.id,this._playerName=t.name}}])&&Co(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();L().mixin(Ho.prototype);const Fo=Ho;function Uo(t){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uo(t)}function Vo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ko(n.key),n)}}function Wo(){return Wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Wo.apply(this,arguments)}function zo(t,e){return zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zo(t,e)}function Yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zo(t){return Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zo(t)}function Jo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ko(t){var e=function(t,e){if("object"!=Uo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Uo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uo(e)?e:String(e)}function qo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Xo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Qo(t,e,"get"))}function Qo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var $o=new WeakMap,ti=new WeakSet;function ei(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(t);return i||(i=this._createPromiseDecorator(t),this._platformSdk.send(e,n).then((function(e){e[o]?r._resolvePromiseDecorator(t):r._rejectPromiseDecorator(t)})).catch((function(e){r._rejectPromiseDecorator(t,e)}))),i.promise}const ri=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zo(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zo(o);if(c){var r=Zo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Uo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yo(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Jo(e=Yo(t=f.call.apply(f,[this].concat(o))),r=ti),r.add(e),function(t,e,r){(e=Ko(e))in t?Object.defineProperty(t,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[e]=true}(Yo(t),"_isBannerSupported"),function(t,e,r){Jo(t,e),e.set(t,{writable:!0,value:void 0})}(Yo(t),$o),t}return r=p,(n=[{key:"platformId",get:function(){return t.VK}},{key:"platformLanguage",get:function(){var t=new URL(window.location.href);if(t.searchParams.has("language")){var e=t.searchParams.get("language"),r=0;try{r=parseInt(e,10)}catch(t){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Wo(Zo(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var t=new URL(window.location.href);return t.searchParams.has("hash")?t.searchParams.get("hash"):Wo(Zo(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(Xo(this,$o)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return Wo(Zo(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Xo(this,$o)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r,n,o=this._getPromiseDecorator(_.INITIALIZE);if(!o){o=this._createPromiseDecorator(_.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(e=this,r=$o,n=i.searchParams.get("platform"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,Qo(e,r,"set"),n)),W("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Z("vkBridge").then((function(){t._platformSdk=window.vkBridge,t._platformSdk.send("VKWebAppInit").then((function(){t._platformSdk.send("VKWebAppGetUserInfo").then((function(e){e&&(t._playerId=e.id,t._playerName="".concat(e.first_name," ").concat(e.last_name),e.photo_100&&t._playerPhotos.push(e.photo_100),e.photo_200&&t._playerPhotos.push(e.photo_200),e.photo_max_orig&&t._playerPhotos.push(e.photo_max_orig))})).finally((function(){t._isInitialized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Wo(Zo(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Wo(Zo(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(t)){var o=[];return i.forEach((function(t){var e=n.keys.findIndex((function(e){return e.key===t}));if(e<0)o.push(null);else if(""!==n.keys[e].value){var i=n.keys[e].value;if(r)try{i=JSON.parse(n.keys[e].value)}catch(t){}o.push(i)}else o.push(null)})),void e(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(t){}e(a)}else e(null)})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?o(t.error_data.error_reason):o()}))})):Wo(Zo(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a={key:t[i],value:e[i]};"string"!=typeof e[i]&&(a.value=JSON.stringify(e[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:t,value:e};return"string"!=typeof e&&(s.value=JSON.stringify(e)),new Promise((function(t,e){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){t()})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?e(t.error_data.error_reason):e()}))}))}return Wo(Zo(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.setDataToStorage(t[n],"",e));return Promise.all(r)}return this.setDataToStorage(t,"",e)}return Wo(Zo(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:t}).then((function(t){t.result?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(e){e.result&&t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(e){e.result&&t._setInterstitialState(i.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(e){t._setInterstitialState(e.result?i.CLOSED:i.FAILED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result&&t._setRewardedState(a.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return qo(this,ti,ei).call(this,_.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(t){if(!t||!t.groupId)return Promise.reject();var e=t.groupId;return"string"==typeof e&&(e=parseInt(e,10),Number.isNaN(e))?Promise.reject():qo(this,ti,ei).call(this,_.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:e}).then((function(){window.open("https://vk.com/public".concat(e))}))}},{key:"share",value:function(t){var e={};return t&&t.link&&(e.link=t.link),qo(this,ti,ei).call(this,_.SHARE,"VKWebAppShare",e,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?qo(this,ti,ei).call(this,_.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return qo(this,ti,ei).call(this,_.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(t){return qo(this,ti,ei).call(this,_.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:t})}}])&&Vo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Fo);function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function oi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oi(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=si(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ai(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,si(n.key),n)}}function si(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ni(e)?e:String(e)}function ci(){return ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ci.apply(this,arguments)}function ui(t,e){return ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ui(t,e)}function li(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fi(t){return fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fi(t)}function pi(t,e,r){hi(t,e),e.set(t,r)}function hi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function di(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function yi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,vi(t,e,"set"),r),r}function mi(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,vi(t,e,"get"))}function vi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var _i=new WeakMap,gi=new WeakMap,Si=new WeakMap,bi=new WeakMap,Ei=new WeakSet;function wi(){var t=this;return new Promise((function(e){var r=!1;t._options&&t._options.useSignedData&&(r=t._options.useSignedData),t._platformSdk.getPlayer({signed:r}).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized=e.isAuthorized(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var n=e.getName();""!==n&&(t._playerName=n),t._playerPhotos=[];var o=e.getPhoto("small"),i=e.getPhoto("medium"),a=e.getPhoto("large");return o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),a&&t._playerPhotos.push(a),t._playerExtra={payingStatus:e.getPayingStatus()},r&&(t._playerExtra.signature=e.signature),yi(t,gi,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){e()}))}))}const Pi=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fi(o);if(c){var r=fi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ni(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return li(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return hi(e=li(t=f.call.apply(f,[this].concat(o))),r=Ei),r.add(e),pi(li(t),_i,{writable:!0,value:!1}),pi(li(t),gi,{writable:!0,value:null}),pi(li(t),Si,{writable:!0,value:null}),pi(li(t),bi,{writable:!0,value:null}),t}return r=p,(n=[{key:"platformId",get:function(){return t.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():ci(fi(p.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():ci(fi(p.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return ci(fi(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return mi(this,_i)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("/sdk.js").then((function(){Z("YaGames","init").then((function(){window.YaGames.init().then((function(e){var r;t._platformSdk=e,yi(t,bi,di(t,Ei,wi).call(t));var n=null===(r=t._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.28.0-preview.1"}),o=t._platformSdk.shortcut.canShowPrompt().then((function(e){yi(t,_i,e.canShow)})),i=new Promise((function(t){setTimeout(t,1e3)})),a=Promise.race([o,i]),c=t._platformSdk.getPayments().then((function(e){yi(t,Si,e)}));t._isBannerSupported=!0;var u=t._platformSdk.adv.getBannerAdvStatus().then((function(e){e.stickyAdvIsShowing&&t._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:var e;return null===(e=this._platformSdk.features.LoadingAPI)||void 0===e||e.ready(),Promise.resolve();case h.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case h.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return ci(fi(p.prototype),"sendMessage",this).call(this,t)}}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var t=this;return new Promise((function(e,r){t._platformSdk.features.GamesAPI.getAllGames().then((function(t){var r=t.games;e(r)})).catch(r)}))}},{key:"getGameById",value:function(t){var e=this;return null!=t&&t.gameId?new Promise((function(r,n){e._platformSdk.features.GamesAPI.getGameByID(null==t?void 0:t.gameId).then((function(t){var e=t.game,n=t.isAvailable;r(ii(ii({},e),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var t=this,e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(yi(this,bi,di(this,Ei,wi).call(this)),mi(this,bi).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){yi(t,bi,di(t,Ei,wi).call(t)),mi(t,bi).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ci(fi(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ci(fi(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?mi(this,bi).then((function(){return new Promise((function(e){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var i=void 0===n._platformStorageCachedData[t[o]]?null:n._platformStorageCachedData[t[o]];r.push(i)}e(r)}else e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}))})):Promise.reject():ci(fi(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?mi(this,bi).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?ii({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;mi(n,gi).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))}))})):Promise.reject():ci(fi(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?mi(this,bi).then((function(){return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?ii({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];mi(r,gi).setData(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}))})):Promise.reject():ci(fi(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.adv.hideBannerAdv().then((function(e){e.stickyAdvIsShowing||t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){t._setInterstitialState(i.OPENED)},onClose:function(e){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)},onError:function(t){console.error(t)}}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(t){t(!1)}))}},{key:"addToHomeScreen",value:function(){var t=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(e){"accepted"!==e.outcome?t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN):t._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN)})).catch((function(e){t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN,e)}))),e.promise}},{key:"rate",value:function(){var t=this,e=this._getPromiseDecorator(_.RATE);return e||(e=this._createPromiseDecorator(_.RATE),this._platformSdk.feedback.canReview().then((function(e){e.value?t._platformSdk.feedback.requestReview().then((function(e){e.feedbackSent?t._resolvePromiseDecorator(_.RATE):t._rejectPromiseDecorator(_.RATE)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)})):t._rejectPromiseDecorator(_.RATE,e.reason)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(t,e).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(t,n).then((function(t){var r;r=t&&t.entries.length>0?t.entries.map((function(t){return{id:t.player.uniqueID,name:t.player.publicName,score:t.score,rank:t.rank,photo:t.player.getAvatarSrc("large")}})):[],e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this;if(!mi(this,Si))return Promise.reject();var r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),mi(this,Si).purchase(r).then((function(r){var n=ii({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this;if(!mi(this,Si))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),mi(this,Si).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!mi(this,Si))return Promise.reject();var e=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),mi(this,Si).getCatalog().then((function(r){var n=e.map((function(t){var e,n=r.find((function(e){return e.id===t.id}));return{id:t.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(e=n.getPriceCurrencyImage)||void 0===e?void 0:e.call(n,"medium")}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!mi(this,Si))return Promise.reject();var e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),mi(this,Si).getPurchases().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=ii({id:r.find((function(e){return e.id===t.productID})).id},t.purchaseData);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"getRemoteConfig",value:function(t){var e=this;if(!this._platformSdk)return Promise.reject();var r=t;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(t){e._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,t)})).catch((function(t){e._rejectPromiseDecorator(_.GET_REMOTE_CONFIG,t)}))),n.promise}},{key:"clipboardWrite",value:function(t){var e=this,r=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(_.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(t).then((function(){e._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)})).catch((function(t){e._rejectPromiseDecorator(_.CLIPBOARD_WRITE,t)}))),r.promise}}])&&ai(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Fo);function Ai(t){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(t)}function Oi(){Oi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ai(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ai(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Ti(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ki(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ti(i,n,o,a,s,"next",t)}function s(t){Ti(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Di(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Di(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Li(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Di(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Li(n.key),n)}}function Li(t){var e=function(t,e){if("object"!=Ai(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ai(e)?e:String(e)}function ji(){return ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ji.apply(this,arguments)}function Ni(t,e){return Ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ni(t,e)}function Ci(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gi(t){return Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gi(t)}function xi(t,e){Mi(t,e),e.add(t)}function Bi(t,e,r){Mi(t,e),e.set(t,r)}function Mi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hi(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Fi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Vi(t,e,"set"),r),r}function Ui(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Vi(t,e,"get"))}function Vi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Wi="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",zi="https://store.xsolla.com/api/v2/project/",Yi=new WeakMap,Zi=new WeakMap,Ji=new WeakMap,Ki=new WeakSet,qi=new WeakSet,Xi=new WeakSet,Qi=new WeakSet;function $i(){var t=this;return Ui(this,Zi)?new Promise((function(e,r){t._platformSdk.user.getUser().then((function(n){if(!n)return t._playerApplyGuestData(),void r();t._isPlayerAuthorized=!0,n.username&&(t._playerName=n.username),n.profilePictureUrl&&(t._playerPhotos=[n.profilePictureUrl]),t._playerExtra=n,t._options.useUserToken?t._platformSdk.user.getUserToken().then((function(e){t._playerExtra.jwt=e})).finally((function(){e()})):e()})).catch((function(e){t._playerApplyGuestData(),r(e)}))})):(this._playerApplyGuestData(),Promise.reject())}function ta(){return ea.apply(this,arguments)}function ea(){return(ea=ki(Oi().mark((function t(){return Oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.XPayStationWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,W(Wi);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ra(){return na.apply(this,arguments)}function na(){return(na=ki(Oi().mark((function t(){var e;return Oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._platformSdk.user.getXsollaUserToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function oa(t,e,r){return ia.apply(this,arguments)}function ia(){return(ia=ki(Oi().mark((function t(e,r,n){var o;return Oi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(zi,"/").concat(e,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=t.sent).ok){t.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return t.abrupt("return",o.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const aa=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ni(t,e)}(d,e);var r,n,o,f,p=(o=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gi(o);if(f){var r=Gi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ai(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ci(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return xi(Ci(t=p.call.apply(p,[this].concat(r))),Qi),xi(Ci(t),Xi),xi(Ci(t),qi),xi(Ci(t),Ki),Bi(Ci(t),Yi,{writable:!0,value:!1}),Bi(Ci(t),Zi,{writable:!0,value:!1}),Bi(Ci(t),Ji,{writable:!0,value:{adStarted:function(){Ui(Ci(t),Yi)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED)},adFinished:function(){Ui(Ci(t),Yi)?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setInterstitialState(i.CLOSED)},adError:function(){Ui(Ci(t),Yi)?t._setRewardedState(a.FAILED):t._setInterstitialState(i.FAILED)}}}),t}return r=d,(n=[{key:"platformId",get:function(){return t.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Ui(this,Zi)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():ji(Gi(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return Ui(this,Zi)}},{key:"isPaymentsSupported",get:function(){return!0===Ui(this,Zi)}},{key:"deviceType",get:function(){if(Ui(this,Zi)){var t=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(t))return t}return ji(Gi(d.prototype),"deviceType",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Z("CrazyGames","SDK","init").then((function(){t._platformSdk=window.CrazyGames.SDK,t._defaultStorageType=u.PLATFORM_INTERNAL,t._isBannerSupported=!0,t._platformSdk.init().then((function(){Fi(t,Zi,t._platformSdk.user.isUserAccountAvailable);var e=Hi(t,Ki,$i).call(t);t.options.xsollaProjectId&&Hi(t,qi,ta).call(t),Promise.all([e]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(!Ui(this,Zi))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Hi(t,Ki,$i).call(t).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case h.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case h.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return ji(Gi(d.prototype),"sendMessage",this).call(this,t)}}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ji(Gi(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ji(Gi(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){if(Array.isArray(t)){var o=[];return t.forEach((function(t){var e=n._platformSdk.data.getItem(t);if(r)try{e=JSON.parse(e)}catch(t){}o.push(e)})),void e(o)}var i=n._platformSdk.data.getItem(t);if(r)try{i=JSON.parse(i)}catch(t){}e(i)})):ji(Gi(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(t)){for(var o=0;o<t.length;o++){var i=e[o];"string"!=typeof e[o]&&(i=JSON.stringify(e[o])),n._platformSdk.data.setItem(t[o],i)}r()}else{var a=e;"string"!=typeof e&&(a=JSON.stringify(e)),n._platformSdk.data.setItem(t,a),r()}})):ji(Gi(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?Array.isArray(t)?(t.forEach((function(t){return r._platformSdk.data.removeItem(t)})),Promise.resolve()):(this._platformSdk.data.removeItem(t),Promise.resolve()):ji(Gi(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Y(t)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){Fi(this,Yi,!1),this._platformSdk.ad.requestAd("midgame",Ui(this,Ji))}},{key:"showRewarded",value:function(){Fi(this,Yi,!0),this._platformSdk.ad.requestAd("rewarded",Ui(this,Ji))}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ad.hasAdblock().then((function(t){e(t)}))}))}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),Hi(this,qi,ta).call(this).then((function(){return Hi(e,Xi,ra).call(e)})).then((function(t){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:t,sandbox:e.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var c=s.order_id||s.invoice;if(!c)return;Hi(e,Qi,oa).call(e,e.options.xsollaProjectId,c,t).then((function(t){e._platformSdk.analytics.trackOrder("xsolla",t);var o=Ii({id:r.id,sku:n,orderId:c},t);e._paymentsPurchases.push(o),i||(i=!0,e._resolvePromiseDecorator(_.PURCHASE,o))})).catch((function(t){i||e._rejectPromiseDecorator(_.PURCHASE,t)}))}}catch(t){i||e._rejectPromiseDecorator(_.PURCHASE,t)}})),o.on("close",(function(){i||e._rejectPromiseDecorator(_.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Hi(this,Xi,ra).call(this).then((function(e){return fetch("".concat(zi,"/").concat(t.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla catalog HTTP ".concat(t.status));return t.json()})).then((function(r){var n=new Map((r.items||[]).map((function(t){return[t.sku,t]}))),o=e.map((function(t){var e,r,o,i,a,s,c,u,l,f,p=t.platformProductId||t.id,h=n.get(p);return{id:t.id,name:null!==(e=null!==(r=null==h?void 0:h.name)&&void 0!==r?r:t.name)&&void 0!==e?e:t.id,description:null!==(o=null!==(i=null==h?void 0:h.description)&&void 0!==i?i:t.description)&&void 0!==o?o:"",price:null!==(a=null==h||null===(s=h.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==h||null===(u=h.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==h||null===(f=h.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(_.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(_.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})}catch(t){this._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Hi(this,Xi,ra).call(this).then((function(e){return fetch("".concat(zi,"/").concat(t.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla inventory HTTP ".concat(t.status));return t.json()})).then((function(e){var r=t._paymentsGetProductsPlatformData()||[];t._paymentsPurchases=(e.items||[]).map((function(t){var e=r.find((function(e){return e.id===t.sku}));return e?Ii({id:e.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}])&&Ri(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Fo);function sa(t){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(t)}function ca(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ua(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ca(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=fa(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ca(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function la(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fa(n.key),n)}}function fa(t){var e=function(t,e){if("object"!=sa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sa(e)?e:String(e)}function pa(){return pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ya(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pa.apply(this,arguments)}function ha(t,e){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ha(t,e)}function da(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ya(t){return ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ya(t)}var ma=new WeakSet;function va(){var t=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(e){t._platformSdk.getUsers([t._playerId],(function(r){if(r&&1===r.length){var n=r[0];t._playerName=n.full_name,""!==n.avatar&&(t._playerPhotos=[n.avatar])}e()}))}))}const _a=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ha(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ya(o);if(s){var r=ya(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return da(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=da(t=c.call.apply(c,[this].concat(o))),r=ma),r.add(e),t}return r=l,(n=[{key:"platformId",get:function(){return t.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){t._platformSdk=new window.AgRuSdk,t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(e,r){"rewarded"===e.type?null===r?e.status?t._setRewardedState(a.OPENED):(e.reward&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED):null===r?e.status?t._setInterstitialState(i.OPENED):t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)}));var e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,ma,va).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._resolvePromiseDecorator(_.INITIALIZE)}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,r)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||pa(ya(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:pa(ya(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,r){if(n._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===n._platformStorageCachedData[t[i]]?null:n._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(t)){for(var a=[],s=0;s<t.length;s++){var c=void 0===n._platformStorageCachedData[t[s]]?null:n._platformStorageCachedData[t[s]];a.push(c)}return void e(a)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else r(i)})):r()})):pa(ya(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?ua({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.setSaveData(i,(function(t,e){null===e&&(n._platformStorageCachedData=i,r()),o(e)}))}else o()})):pa(ya(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?ua({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.setSaveData(o,(function(t,i){null===i&&(r._platformStorageCachedData=o,e()),n(i)}))}else n()})):pa(ya(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&la(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function ga(t){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(t)}function Sa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ba(n.key),n)}}function ba(t){var e=function(t,e){if("object"!=ga(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ga(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ga(e)?e:String(e)}function Ea(t,e){return Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ea(t,e)}function wa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pa(t){return Pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pa(t)}function Aa(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ta(t,e,"set"),r),r}function Oa(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ta(t,e,"get"))}function Ta(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ka=new WeakMap;const Da=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ea(t,e)}(p,e);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pa(o);if(l){var r=Pa(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wa(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=wa(t=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=ka),r.set(e,n),t}return r=p,(n=[{key:"platformId",get:function(){return t.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var e=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(t){switch(t.name){case"SDK_READY":e._platformSdk=window.gdsdk,e._isInitialized=!0,e.showInterstitial(),e._resolvePromiseDecorator(_.INITIALIZE);break;case"SDK_GAME_START":Oa(e,ka)?(e._setRewardedState(a.CLOSED),e._platformSdk.preloadAd("rewarded")):e._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Oa(e,ka)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":e._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,W("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return t.promise}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Y(t)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var t=this;Aa(this,ka,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){t._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var t=this;Aa(this,ka,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){t._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&Sa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Fo);function Ia(t){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(t)}function Ra(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ha(n.key),n)}}function La(){return La="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ca(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},La.apply(this,arguments)}function ja(t,e){return ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ja(t,e)}function Na(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ca(t){return Ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ca(t)}function Ga(t,e){Ba(t,e),e.add(t)}function xa(t,e,r){Ba(t,e),e.set(t,r)}function Ba(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ma(t,e,r){return(e=Ha(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ha(t){var e=function(t,e){if("object"!=Ia(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ia(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ia(e)?e:String(e)}function Fa(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Ua(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Va(t,e,"get"))}function Va(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Wa="AUTHORIZED",za={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Ya=new WeakMap,Za=new WeakMap,Ja=new WeakMap,Ka=new WeakMap,qa=new WeakSet,Xa=new WeakSet,Qa=new WeakSet,$a=new WeakSet,ts=new WeakSet,es=new WeakSet,rs=new WeakSet,ns=new WeakSet,os=new WeakSet,is=new WeakSet,as=new WeakSet,ss=new WeakSet,cs=new WeakSet,us=new WeakSet,ls=new WeakSet,fs=new WeakSet;function ps(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(t){return{method:"users.hasAppPermission",ext_perm:t}}}}function hs(){var t=this;return{userProfileCallback:function(e,r,n){return Fa(t,qa,ys).call(t,e,r,n)},hasValueAccessCallback:function(e,r,n){return Fa(t,Qa,vs).call(t,r,n)}}}function ds(){var t=this;return{showPermissions:function(){return Fa(t,$a,_s).call(t)},loadAd:function(e){return Fa(t,ts,gs).call(t,e)},showLoadedAd:function(e,r){return Fa(t,es,Ss).call(t,r)},showAd:function(e,r){return Fa(t,rs,bs).call(t,r)},requestBannerAds:function(e,r){return Fa(t,ns,Es).call(t,e,r)},showBannerAds:function(e,r){return Fa(t,is,Ps).call(t,r)},hideBannerAds:function(e,r){return Fa(t,os,ws).call(t,r)},setBannerFormat:function(e){return Fa(t,as,As).call(t,e)},showInvite:function(e){return Fa(t,ss,Os).call(t,e)},showRatingDialog:function(e,r){return Fa(t,cs,Ts).call(t,e,r)},joinGroup:function(e,r){return Fa(t,us,ks).call(t,e,r)},showLoginSuggestion:function(e,r){return Fa(t,Xa,ms).call(t,e,r)},postMediatopic:function(e,r){return Fa(t,ls,Ds).call(t,e,r)},isAdBlockEnabled:function(e,r){return Fa(t,fs,Is).call(t,e,r)}}}function ys(t,e){"ok"===t&&(this._playerId=e.uid,this._playerName=e.name,this._playerPhotos=[e.pic50x50,e.pic128x128,e.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(Ua(this,Za).hasAppPermission(za.VALUABLE_ACCESS),Ua(this,Ja).hasValueAccessCallback)}function ms(t,e){if("error"===t)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function vs(t){if(this._hasValuableAccessPermission=!!t,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(_.INITIALIZE);else{var e=Object.values(za).map((function(t){return'"'.concat(t,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(e,"]"))}}function _s(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(Ua(this,Za).hasAppPermission(za.VALUABLE_ACCESS),Ua(this,Ja).hasValueAccessCallback)}function gs(t){"error"===t?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Ss(t){switch(t){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function bs(t){switch(t){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Es(t,e){if("error"!==t)switch(e){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",Ua(this,Ya));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function ws(t){t?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Ps(t){t||this._setBannerState(s.FAILED)}function As(t){"error"===t?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Os(t){"error"===t?this._rejectPromiseDecorator(_.INVITE_FRIENDS):this._resolvePromiseDecorator(_.INVITE_FRIENDS)}function Ts(t,e){"error"===t?this._rejectPromiseDecorator(_.RATE,e):this._resolvePromiseDecorator(_.RATE)}function ks(t,e){"error"===t?this._rejectPromiseDecorator(_.JOIN_COMMUNITY,e):this._resolvePromiseDecorator(_.JOIN_COMMUNITY)}function Ds(t,e){"error"===t?this._rejectPromiseDecorator(_.CREATE_POST,e):this._resolvePromiseDecorator(_.CREATE_POST)}function Is(t,e){"ok"===t?this._resolvePromiseDecorator(_.ADBLOCK_DETECT,"true"===e):this._rejectPromiseDecorator(_.ADBLOCK_DETECT)}const Rs=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ja(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ca(o);if(s){var r=Ca(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ia(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Na(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Ga(Na(t=c.call.apply(c,[this].concat(r))),fs),Ga(Na(t),ls),Ga(Na(t),us),Ga(Na(t),cs),Ga(Na(t),ss),Ga(Na(t),as),Ga(Na(t),is),Ga(Na(t),os),Ga(Na(t),ns),Ga(Na(t),rs),Ga(Na(t),es),Ga(Na(t),ts),Ga(Na(t),$a),Ga(Na(t),Qa),Ga(Na(t),Xa),Ga(Na(t),qa),xa(Na(t),Ka,{get:ds,set:void 0}),xa(Na(t),Ja,{get:hs,set:void 0}),xa(Na(t),Za,{get:ps,set:void 0}),Ma(Na(t),"_hasValuableAccessPermission",!1),Ma(Na(t),"_hasValuableAccessPermissionShowed",!1),Ma(Na(t),"_platformBannerOptions",{}),xa(Na(t),Ya,{writable:!0,value:null}),t}return r=l,(n=[{key:"platformId",get:function(){return t.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("//api.ok.ru/js/fapi5.js").then((function(){Z("FAPI").then((function(){t._platformSdk=window.FAPI,window.API_callback=function(e,r,n){return Ua(t,Ka)[e](r,n)};var e=t._platformSdk.Util.getRequestParameters()||{};e.api_server&&e.apiconnection?t._platformSdk.init(e.api_server,e.apiconnection,(function(){var e,r=null===(e=t._platformSdk)||void 0===e?void 0:e.saved_state;t._isPlayerAuthorized=!r||r===Wa,t._isPlayerAuthorized?t._platformSdk.Client.call(Ua(t,Za).userProfile,Ua(t,Ja).userProfileCallback):(t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE))}),(function(){t._rejectPromiseDecorator(_.INITIALIZE)})):t._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)}))}))),e.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(Wa)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||La(Ca(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:La(Ca(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(e,o){var i=Array.isArray(t)?t:[t],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(t)){var u=[];return i.forEach((function(t){if(""!==c[t]&&void 0!==c[t]){var e=c[t];if(r)try{e=JSON.parse(c[t])}catch(t){}u.push(e)}else u.push(null)})),void e(u)}if(""===c[t]||void 0===c[t])return void e(null);var l=c[t];if(r)try{l=JSON.parse(c[t])}catch(t){}e(l)}else o(s)}))})):Promise.reject(g.STORAGE_NOT_AVAILABLE):La(Ca(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var o=Array.isArray(t)?t:[t],i=Array.isArray(t)?e:[e],a=[],s=function(){var t=o[c],e=i[c];"string"!=typeof e&&(e=JSON.stringify(e));var r={method:"storage.set",key:t,value:e},s=new Promise((function(t,e){n._platformSdk.Client.call(r,(function(r,n){n?t():e()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return La(Ca(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var n=Array.isArray(t)?t:[t],o=[],i=function(){var t={method:"storage.set",key:n[a]},e=new Promise((function(e,n){r._platformSdk.Client.call(t,(function(t,r){r?e():n()}))}));o.push(e)},a=0;a<n.length;a++)i();return Promise.all(o)}return La(Ca(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(t){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(t){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(t){var e,r;r=t,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e=this,Va(e,Ya,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var t=this._getPromiseDecorator(_.ADBLOCK_DETECT);return t||(t=this._createPromiseDecorator(_.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),t.promise}},{key:"inviteFriends",value:function(t){var e=(t||{}).text;if(!t||"string"!=typeof e)return Promise.reject();var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),e.length>120?this._rejectPromiseDecorator(_.INVITE_FRIENDS,g.INVITE_FRIENDS_MESSAGE_LENGTH_ERROR):this._platformSdk.UI.showInvite(e)),r.promise}},{key:"rate",value:function(){var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._platformSdk.UI.showRatingDialog()),t.promise}},{key:"createPost",value:function(t){if(!t||null==t||!t.media)return Promise.reject();var e,r=this._getPromiseDecorator(_.CREATE_POST);return r||(r=this._createPromiseDecorator(_.CREATE_POST),this._platformSdk.UI.postMediatopic(t,null!==(e=t.status)&&void 0!==e&&e)),r.promise}},{key:"joinCommunity",value:function(t){if(!t||null==t||!t.groupId)return Promise.reject();var e,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(t.groupId,null!==(e=t.enableMessages)&&void 0!==e&&e)),r.promise}}])&&Ra(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function Ls(t){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(t)}function js(){js=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ls(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ls(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Ns(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Cs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cs(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Bs(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bs(n.key),n)}}function Bs(t){var e=function(t,e){if("object"!=Ls(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ls(e)?e:String(e)}function Ms(){return Ms="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Us(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ms.apply(this,arguments)}function Hs(t,e){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hs(t,e)}function Fs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Us(t){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Us(t)}function Vs(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Ws(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var zs=new WeakSet,Ys=new WeakSet;function Zs(){var t=this;return new Promise((function(e){t._platformSdk.userService.getUser().then((function(e){return e.isAuthorized?(t._isPlayerAuthorized=!0,t._playerId=e.id,t._playerName=e.name,t._playerPhotos=e.photos,t._playerExtra=e,t._defaultStorageType=u.PLATFORM_INTERNAL,Ws(t,Ys,Js).call(t,[])):(t._playerApplyGuestData(),Promise.resolve())})).catch((function(){t._playerApplyGuestData()})).finally((function(){e()}))}))}function Js(t){return Ks.apply(this,arguments)}function Ks(){var t;return t=js().mark((function t(e){var r,n=arguments;return js().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(n.length>1&&void 0!==n[1])||n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)})),Ks=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ns(i,n,o,a,s,"next",t)}function s(t){Ns(i,n,o,a,s,"throw",t)}a(void 0)}))},Ks.apply(this,arguments)}const qs=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hs(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Us(o);if(s){var r=Us(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ls(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fs(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Vs(Fs(t=c.call.apply(c,[this].concat(r))),Ys),Vs(Fs(t),zs),t}return r=l,(n=[{key:"platformId",get:function(){return t.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||Ms(Us(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://developer.playgama.com/sdk/v1.js").then((function(){Z("PLAYGAMA_SDK").then((function(){t._platformSdk=window.PLAYGAMA_SDK,t._platformSdk.advService.subscribeToAdStateChanges((function(e,r){if("interstitial"===e)switch(r){case"open":t._setInterstitialState(i.OPENED);break;case"empty":case"error":t._setInterstitialState(i.FAILED);break;case"close":t._setInterstitialState(i.CLOSED)}else if("rewarded"===e)switch(r){case"open":t._setRewardedState(a.OPENED);break;case"empty":case"error":t._setRewardedState(a.FAILED);break;case"rewarded":t._setRewardedState(a.REWARDED);break;case"close":t._setRewardedState(a.CLOSED)}})),Ws(t,zs,Zs).call(t).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameService.gameReady(),Promise.resolve()):Ms(Us(l.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ms(Us(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ms(Us(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?Ws(this,Ys,Js).call(this,t,r):Promise.reject():Ms(Us(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Gs({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]="string"!=typeof e[i]?JSON.stringify(e[i]):e[i];else o[t]="string"!=typeof e?JSON.stringify(e):e;return this._platformSdk.storageApi.setItems(o),Ms(Us(l.prototype),"setDataToStorage",this).call(this,t,e,r);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;switch(e){case u.PLATFORM_INTERNAL:return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?Gs({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(t)?t:[t]),Ms(Us(l.prototype),"deleteDataFromStorage",this).call(this,t,e);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"showInterstitial",value:function(){this._platformSdk.advService.showInterstitial()}},{key:"showRewarded",value:function(){this._platformSdk.advService.showRewarded()}},{key:"authorizePlayer",value:function(t){var e=this,r=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Ws(this,zs,Zs).call(this,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){Ws(e,zs,Zs).call(e,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),r.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(e){if("PAID"===e.status){var n=Gs({id:t},e);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(_.PURCHASE,n)}else r._rejectPromiseDecorator(_.PURCHASE,e.error)})).catch((function(t){r._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));return Promise.resolve(e)}}])&&xs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function Xs(t){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(t)}function Qs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ic(n.key),n)}}function tc(){return tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},tc.apply(this,arguments)}function ec(t,e){return ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ec(t,e)}function rc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nc(t){return nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nc(t)}function oc(t,e,r){return(e=ic(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ic(t){var e=function(t,e){if("object"!=Xs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xs(e)?e:String(e)}function ac(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function sc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,uc(t,e,"set"),r),r}function cc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,uc(t,e,"get"))}function uc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var lc=new WeakMap,fc=new WeakMap;const pc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ec(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nc(o);if(s){var r=nc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Xs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ac(rc(t=c.call.apply(c,[this].concat(r))),lc,{writable:!0,value:void 0}),ac(rc(t),fc,{writable:!0,value:void 0}),oc(rc(t),"_defaultStorageType",u.PLATFORM_INTERNAL),oc(rc(t),"_isPlayerAuthorized",!0),t}return r=l,n=[{key:"platformId",get:function(){return t.PLAYDECK}},{key:"platformLanguage",get:function(){return cc(this,lc)?cc(this,lc):tc(nc(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.addEventListener("message",(function e(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;t._playerId=i.telegramId,t._playerPhotos=[i.avatar],t._playerName=i.username,sc(t,lc,i.locale),sc(t,fc,i.params),window.removeEventListener("message",e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}}})),tt({playdeck:{method:"getUserProfile"}},"*")),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_OVER:return tt({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case h.GAME_READY:return tt({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return tc(nc(l.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":t._setInterstitialState(i.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setInterstitialState(i.FAILED),window.removeEventListener("message",e)}})),tt({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setRewardedState(a.OPENED);break;case"rewardedAd":t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"skipAd":t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setRewardedState(a.FAILED),window.removeEventListener("message",e)}})),tt({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||tc(nc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||tc(nc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?new Promise((function(e){var r={},n=Array.isArray(t)?t:[t];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(t)?t.map((function(t){return r[t]})):r[t];e(c)}}})),n.forEach((function(t){return tt({playdeck:{method:"getData",key:t}},"*")}))})):tc(nc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(t)?t:[t],o=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));n.forEach((function(t,e){return tt({playdeck:{method:"setData",key:t,value:o[e]}},"*")})),r()})):tc(nc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return tt({playdeck:{method:"setData",key:t,value:""}},"*")})),e()})):tc(nc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(){var t=this,e=this._getPromiseDecorator(_.SHARE);return e||(e=this._createPromiseDecorator(_.SHARE),window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",e),t._resolvePromiseDecorator(_.SHARE))})),tt({playdeck:{method:"customShare",value:cc(this,fc)}},"*")),e.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),window.addEventListener("message",(function t(e){var r=e.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(tt({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",t))})),window.addEventListener("message",(function e(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",e);var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qs(Object(r),!0).forEach((function(e){oc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:t},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(_.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",e),r._rejectPromiseDecorator(_.PURCHASE,i.value))})),tt({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Stars"),priceCurrencyCode:"Stars",priceValue:t.amount}}));return Promise.resolve(e)}}],n&&$s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function hc(t){return hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(t)}function dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bc(n.key),n)}}function yc(){return yc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_c(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},yc.apply(this,arguments)}function mc(t,e){return mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mc(t,e)}function vc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _c(t){return _c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_c(t)}function gc(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Sc(t,e,r){return(e=bc(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bc(t){var e=function(t,e){if("object"!=hc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hc(e)?e:String(e)}function Ec(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Pc(t,e,"set"),r),r}function wc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Pc(t,e,"get"))}function Pc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ac=new WeakMap,Oc=new WeakMap,Tc=new WeakMap,kc=new WeakMap;const Dc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mc(t,e)}(f,e);var r,n,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_c(o);if(s){var r=_c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===hc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vc(t)}(this,t)});function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Sc(vc(t=c.call.apply(c,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),Sc(vc(t),"_isPlayerAuthorized",!0),gc(vc(t),Ac,{writable:!0,value:void 0}),gc(vc(t),Oc,{writable:!0,value:void 0}),gc(vc(t),Tc,{writable:!0,value:{onStart:function(){return t._setRewardedState(a.OPENED)},onSkip:function(){return t._setRewardedState(a.CLOSED)},onReward:function(){return t._setRewardedState(a.REWARDED)},onError:function(){return t._setRewardedState(a.FAILED)}}}),gc(vc(t),kc,{writable:!0,value:{onStart:function(){return t._setInterstitialState(i.OPENED)},onSkip:function(){return t._setInterstitialState(i.CLOSED)},onError:function(){return t._setInterstitialState(i.FAILED)}}}),t}return r=f,(n=[{key:"platformId",get:function(){return t.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:yc(_c(f.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!wc(this,Oc)}},{key:"isRewardedSupported",get:function(){return!!wc(this,Oc)}},{key:"deviceType",get:function(){switch(wc(this,Ac)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return yc(_c(f.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://telegram.org/js/telegram-web-app.js").then((function(){t._platformSdk=window.Telegram.WebApp;var e=t._platformSdk.initDataUnsafe.user;t._playerId=e.id,t._playerName=[e.first_name,e.last_name].filter(Boolean).join(" "),t._playerPhotos=[e.photo_url],Ec(t,Ac,t._platformSdk.platform),t._isInitialized=!0,t._options&&t._options.adsgramBlockId?W("https://sad.adsgram.ai/js/sad.min.js").then((function(){Ec(t,Oc,window.Adsgram.init({blockId:t._options.adsgramBlockId}))})).finally((function(){t._resolvePromiseDecorator(_.INITIALIZE)})):t._resolvePromiseDecorator(_.INITIALIZE)}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):yc(_c(f.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||yc(_c(f.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||yc(_c(f.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Array.isArray(t)?n._platformSdk.CloudStorage.getItems(t,(function(n,i){if(n)o(n);else{var a=[];t.forEach((function(t){var e=i[t];if(r&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}a.push(e)})),e(a)}})):n._platformSdk.CloudStorage.getItem(t,(function(t,n){t&&o(t);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(t){}e(i)}))})):yc(_c(f.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(t)?t:[t],i=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));o.forEach((function(t,e){return n._platformSdk.CloudStorage.setItem(t,i[e])})),r()})):yc(_c(f.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return r._platformSdk.CloudStorage.removeItem(t)})),e()})):yc(_c(f.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;wc(this,Oc)?(wc(this,Oc).addEventListener("onStart",wc(this,kc).onStart),wc(this,Oc).addEventListener("onSkip",wc(this,kc).onSkip),wc(this,Oc).addEventListener("onError",wc(this,kc).onError),wc(this,Oc).addEventListener("onBannerNotFound",wc(this,kc).onError),wc(this,Oc).show().finally((function(){wc(t,Oc).removeEventListener("onStart",wc(t,kc).onStart),wc(t,Oc).removeEventListener("onSkip",wc(t,kc).onSkip),wc(t,Oc).removeEventListener("onError",wc(t,kc).onError),wc(t,Oc).removeEventListener("onBannerNotFound",wc(t,kc).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;wc(this,Oc)?(wc(this,Oc).addEventListener("onStart",wc(this,Tc).onStart),wc(this,Oc).addEventListener("onSkip",wc(this,Tc).onSkip),wc(this,Oc).addEventListener("onReward",wc(this,Tc).onReward),wc(this,Oc).addEventListener("onError",wc(this,Tc).onError),wc(this,Oc).addEventListener("onBannerNotFound",wc(this,Tc).onError),wc(this,Oc).show().finally((function(){wc(t,Oc).addEventListener("onStart",wc(t,Tc).onStart),wc(t,Oc).addEventListener("onSkip",wc(t,Tc).onSkip),wc(t,Oc).addEventListener("onReward",wc(t,Tc).onReward),wc(t,Oc).addEventListener("onError",wc(t,Tc).onError),wc(t,Oc).addEventListener("onBannerNotFound",wc(t,Tc).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var t=this,e=this._getPromiseDecorator(_.CLIPBOARD_READ);return e||(e=this._createPromiseDecorator(_.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(e){e?t._resolvePromiseDecorator(_.CLIPBOARD_READ,e):t._rejectPromiseDecorator(_.CLIPBOARD_READ)}))),e.promise}}])&&dc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(Fo);var Ic=["player"];function Rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rc(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Cc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jc(t){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(t)}function Nc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cc(n.key),n)}}function Cc(t){var e=function(t,e){if("object"!=jc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jc(e)?e:String(e)}function Gc(){return Gc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Gc.apply(this,arguments)}function xc(t,e){return xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xc(t,e)}function Bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mc(t){return Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mc(t)}function Hc(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Fc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Uc="userData",Vc="6129580795478709",Wc=new WeakSet,zc=new WeakSet;function Yc(){var t=this;return new Promise((function(e,r){t._platformStorageCachedData?e(t._platformStorageCachedData):t._platformSdk.api("user_data/retrieve","POST",{key:Uc},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(t){}t._platformStorageCachedData=o,e(o)}))}))}function Zc(t){if("ok"===t.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var e=t.authResponse.details,r=e.pid,n=e.locale,o=e.nickname,i=e.first_name,a=e.last_name,s=e.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(t){return!!t})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const Jc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mc(o);if(s){var r=Mc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Hc(Bc(t=c.call.apply(c,[this].concat(r))),zc),Hc(Bc(t),Wc),t}return r=l,(n=[{key:"platformId",get:function(){return t.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.gameId?W("https://cdn.y8.com/api/sdk.js").then((function(){Z("ID").then((function(){t._platformSdk=window.ID,t._platformSdk.Event.subscribe("id.init",(function(){z({adSenseId:t._options.channelId?"ca-pub-".concat(Vc):t._options.adsenseId,channelId:t._options.channelId,hostId:"ca-host-pub-".concat(Vc)}).then((function(e){t._showAd=e})),t._platformSdk.getLoginStatus((function(e){Fc(t,zc,Zc).call(t,e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))})),t._platformSdk.init({appId:t._options.gameId})}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.login((function(n){Fc(t,zc,Zc).call(t,n),"ok"===n.status?(t._platformStorageCachedData=null,e()):r()}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Gc(Mc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Gc(Mc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Fc(n,Wc,Yc).call(n).then((function(n){var o=(Array.isArray(t)?t:[t]).map((function(t){var e=n[t];return r||"object"!==jc(e)||null===e?null!=e?e:null:JSON.stringify(e)}));e(o)})).catch(o)})):Gc(Mc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){Fc(n,Wc,Yc).call(n).then((function(i){var a=Lc({},i);if(Array.isArray(t))for(var s=0;s<t.length;s++)a[t[s]]=e[s];else a[t]=e;n._platformSdk.api("user_data/submit","POST",{key:Uc,value:JSON.stringify(a)},(function(t){"ok"===t.status?(n._platformStorageCachedData=a,r()):o(t)}))})).catch(o)})):Gc(Mc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){Fc(r,Wc,Yc).call(r).then((function(o){var i=Lc({},o);if(Array.isArray(t))for(var a=0;a<t.length;a++)delete i[t[a]];else delete i[t];r._platformSdk.api("user_data/submit","POST",{key:Uc,value:JSON.stringify(i)},(function(t){"ok"===t.status?(r._platformStorageCachedData=i,e()):n(t)}))})).catch(n)})):Gc(Mc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){t._setInterstitialState(i.OPENED)},afterAd:function(){t.interstitialState!==i.FAILED&&t._setInterstitialState(i.CLOSED)},adBreakDone:function(e){"viewed"!==e.breakStatus&&t._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){t._setRewardedState(a.OPENED)},afterAd:function(){t.rewardedState!==a.FAILED&&t._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){t._setRewardedState(a.FAILED)},adViewed:function(){t._setRewardedState(a.REWARDED)},adBreakDone:function(e){"frequencyCapped"!==e.breakStatus&&"other"!==e.breakStatus||t._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={table:t,points:e};this._platformSdk.GameAPI.Leaderboards.save(o,(function(t){var e=t.success,n=t.errormessage;e?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={table:t,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(t){var r=t.scores,n=t.success,o=t.errormessage;if(n){var i=r.map((function(t){return{id:t.playerid,name:t.playername,score:t.points,rank:t.rank,photo:null}}));e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,i)}else e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(t){var e=this;return this._isPlayerAuthorized&&t.achievement&&t.achievementkey?new Promise((function(r){e._platformSdk.GameAPI.Achievements.save(t,(function(t){r(t)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.GameAPI.Achievements.listCustom(t,(function(t){t.success?r(t.achievements.map((function(t){var e=t.player;return Lc(Lc({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,Ic)),{},{playerid:e.playerid,playername:e.playername,lastupdated:e.lastupdated,date:e.date,rdate:e.rdate})}))):n(new Error(t.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(t){return this._platformSdk.GameAPI.Achievements.list(t),Promise.resolve()}}])&&Nc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function Kc(t){return Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(t)}function qc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xc(n.key),n)}}function Xc(t){var e=function(t,e){if("object"!=Kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kc(e)?e:String(e)}function Qc(){return Qc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Qc.apply(this,arguments)}function $c(t,e){return $c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$c(t,e)}function tu(t){return tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(t)}const eu=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$c(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tu(o);if(s){var r=tu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?W("https://lagged.com/api/rev-share/lagged.js").then((function(){Z("LaggedAPI").then((function(){t._platformSdk=window.LaggedAPI,t._platformSdk.init(t._options.devId,t._options.publisherId),t._platformSdk.User.get((function(e){var r,n=null!==(r=null==e?void 0:e.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(t._playerId=o,t._playerName=i,t._playerPhotos.push(a),t._isPlayerAuthorized=!0),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),e.promise}},{key:"isStorageSupported",value:function(t){return t!==u.PLATFORM_INTERNAL&&Qc(tu(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t!==u.PLATFORM_INTERNAL&&Qc(tu(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){t._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(e,r){e?r():t._setRewardedState(a.FAILED)}),(function(e){e?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={score:e,board:t};this._platformSdk.Scores.save(o,(function(t){t.success?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(t){var e=this;return t.achievement?new Promise((function(r,n){e._platformSdk.Achievements.save(Array.isArray(t.achievement)?t.achievement:[t.achievement],(function(t){t.success?r(t):n(t.errormsg)}))})):Promise.reject()}}])&&qc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function ru(){ru=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==au(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(au(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function nu(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ou(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(r),!0).forEach((function(e){yu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ou(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function au(t){return au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(t)}function su(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mu(n.key),n)}}function uu(){return uu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},uu.apply(this,arguments)}function lu(t,e){return lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lu(t,e)}function fu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pu(t){return pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pu(t)}function hu(t,e){du(t,e),e.add(t)}function du(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yu(t,e,r){return(e=mu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mu(t){var e=function(t,e){if("object"!=au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==au(e)?e:String(e)}function vu(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,_u(t,e,"set"),r),r}function _u(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function gu(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Su=new WeakMap,bu=new WeakSet,Eu=new WeakSet,wu=new WeakSet,Pu=new WeakSet;function Au(){var t=this;t._platformSdk.overlayViews.setCustomEventHandler((function(e){if("leaderboard"===e)vu(t,Su,!0);else if("close"===e){if(function(t,e){return e.get?e.get.call(t):e.value}(r=t,_u(r,Su,"get")))return void vu(t,Su,!1);t._overlay&&(document.body.removeChild(document.getElementById(t._overlay.iframeElement.id)),t._overlay.dismissAsync(),t._overlay=null)}var r}))}function Ou(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[t])return this._preloadedInterstitialPromises[t];var r=null;return this._preloadedInterstitialPromises[t]=this._platformSdk.getInterstitialAdAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedInterstitialPromises[t]=null,Promise.reject()})),this._preloadedInterstitialPromises[t]}function Tu(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[t])return this._preloadedRewardedPromises[t];var r=null;return this._preloadedRewardedPromises[t]=this._platformSdk.getRewardedVideoAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedRewardedPromises[t]=null,Promise.reject()})),this._preloadedRewardedPromises[t]}function ku(){return Du.apply(this,arguments)}function Du(){var t;return t=ru().mark((function t(){return ru().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",Promise.resolve());case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(0),"INVALID_OPERATION"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=13;break}t.next=14;break;case 13:throw new Error(t.t0);case 14:return t.prev=15,t.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!t.sent){t.next=21;break}return t.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:t.next=28;break;case 23:if(t.prev=23,t.t1=t.catch(15),"INVALID_OPERATION"!==(null===t.t1||void 0===t.t1?void 0:t.t1.code)){t.next=27;break}return t.abrupt("return",Promise.resolve());case 27:throw new Error(t.t1);case 28:return t.abrupt("return",Promise.resolve());case 29:case"end":return t.stop()}}),t,this,[[0,8],[15,23]])})),Du=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nu(i,n,o,a,s,"next",t)}function s(t){nu(i,n,o,a,s,"throw",t)}a(void 0)}))},Du.apply(this,arguments)}const Iu=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lu(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pu(o);if(c){var r=pu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fu(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return hu(fu(t=f.call.apply(f,[this].concat(i))),Pu),hu(fu(t),wu),hu(fu(t),Eu),hu(fu(t),bu),yu(fu(t),"_contextId",null),yu(fu(t),"_supportedApis",[]),yu(fu(t),"_preloadedInterstitialPromises",{}),yu(fu(t),"_preloadedRewardedPromises",{}),yu(fu(t),"_defaultStorageType",u.PLATFORM_INTERNAL),yu(fu(t),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},du(e=fu(t),r=Su),r.set(e,n),t}return r=p,n=[{key:"platformId",get:function(){return t.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||uu(pu(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return uu(pu(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return v}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return Z("FBInstant")})).then((function(){return t._platformSdk=window.FBInstant,t._platformSdk.initializeAsync()})).then((function(){return t._isPlayerAuthorized=!0,t._playerId=t._platformSdk.player.getID(),t._contextId=t._platformSdk.context.getID(),t._platformLanguage=t._platformSdk.getLocale(),"string"==typeof t._platformLanguage&&(t._platformLanguage=t._platformLanguage.substring(0,2).toLowerCase()),t._supportedApis=t._platformSdk.getSupportedAPIs(),gu(t,bu,Au).call(t),Promise.allSettled([t._platformSdk.community.canFollowOfficialPageAsync(),t._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(e){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return su(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?su(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;t._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){return t._rejectPromiseDecorator(_.INITIALIZE,e)}))),e.promise}},{key:"sendMessage",value:function(t){var e=this;return t===h.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return gu(e,Pu,ku).call(e)}),0),new Promise((function(t){e._platformSdk.startGameAsync().then(t)}))):uu(pu(p.prototype),"sendMessage",this).call(this,t)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):uu(pu(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:uu(pu(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.player.getDataAsync(i).then((function(t){var n=i.map((function(e){var n=t[e];return r||"object"!==au(n)||null===n?null!=n?n:null:JSON.stringify(n)}));e(n)})).catch(o)})):uu(pu(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):uu(pu(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null;else o[t]=null;r._platformSdk.player.setDataAsync(o).then(e).catch(n)})):uu(pu(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t,e){var r=this;this._platformSdk.loadBannerAdAsync(e,t).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideBannerAdAsync().then((function(){t._setBannerState(s.HIDDEN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(t){gu(this,Eu,Ou).call(this,t)}},{key:"showInterstitial",value:function(t){var e=this;gu(this,Eu,Ou).call(this,t).then((function(t){return e._setInterstitialState(i.OPENED),t.showAsync()})).then((function(){e._setInterstitialState(i.CLOSED),gu(e,Eu,Ou).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!1)}))}},{key:"preloadRewarded",value:function(t){gu(this,wu,Tu).call(this,t)}},{key:"showRewarded",value:function(t){var e=this;gu(this,wu,Tu).call(this,t).then((function(t){return e._setRewardedState(a.OPENED),t.showAsync()})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),gu(e,wu,Tu).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!0)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.globalLeaderboards.setScoreAsync(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="9999",t.id="loading-overlay";var e=document.createElement("div");return e.style.fontSize="24px",e.style.color="#fff",e.innerText="Loading...",t.appendChild(e),t}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(t,20).then((function(t){var r=t.map((function(t){return{score:t.getScore(),sessionID:t.getPlayer().getSessionID()}})),o=e._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(t){t.showAsync(),e._overlay=t,n.remove(),e._resolvePromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(t,r){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(t){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=iu({id:t},r);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=e.map((function(t){var e=r.find((function(e){return e.productID===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceAmount}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=iu({id:r.find((function(e){return e.id===t.productID})).id},t);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.image||!e.text)return Promise.reject();if(!J(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.inviteAsync(e).then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),r.promise}},{key:"joinCommunity",value:function(t){var e=this,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),t&&!0===t.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)}))),r.promise}},{key:"share",value:function(t){var e=this;if(!t.image||!t.text)return Promise.reject();if(!J(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.shareAsync(iu({intent:"REQUEST"},t)).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}],n&&cu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Fo);function Ru(t){return Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(t)}function Lu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ju(n.key),n)}}function ju(t){var e=function(t,e){if("object"!=Ru(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ru(e)?e:String(e)}var Nu,Cu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"send",value:function(t){tt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*")}},{key:"addListener",value:function(t){window.addEventListener("message",t)}},{key:"removeListener",value:function(t){window.removeEventListener("message",t)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Lu(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gu(){Gu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Fu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fu(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function xu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bu(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Mu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mu(Object(r),!0).forEach((function(e){Ku(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fu(t){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(t)}function Uu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qu(n.key),n)}}function Vu(t,e){return Vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vu(t,e)}function Wu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zu(t,e){Ju(t,e),e.add(t)}function Yu(){return Yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Yu.apply(this,arguments)}function Zu(t){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zu(t)}function Ju(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ku(t,e,r){return(e=qu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qu(t){var e=function(t,e){if("object"!=Fu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fu(e)?e:String(e)}function Xu(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}function Qu(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var $u="banner",tl="bridge",el={AUTHORIZED_ONLY:"authorized_only",ALWAYS:"always",NEVER:"never"},rl={IS_STORAGE_AVAILABLE:"is_storage_available",IS_STORAGE_SUPPORTED:"is_storage_supported",GET_DATA_FROM_STORAGE:"get_data_from_storage",SET_DATA_TO_STORAGE:"set_data_to_storage",DELETE_DATA_FROM_STORAGE:"delete_data_from_storage",GET_SERVER_TIME:"get_server_time",CHECK_ADBLOCK:"check_adblock",CLIPBOARD_READ:"clipboard_read",LIVENESS_PING:"ping",UNLOCK_ACHIEVEMENT:"unlock_achievement",GET_ACHIEVEMENTS:"get_achievements",SHOW_ACHIEVEMENTS_NATIVE_POPUP:"show_achievements_native_popup",GET_PERFORMANCE_RESOURCES:"get_performance_resources",GET_LANGUAGE:"get_language",GET_PLAYER:"get_player",AUDIO_STATE:"audio_state",PAUSE_STATE:"pause_state"},nl="isLocalStorageSupported",ol="isPlatformInternalStorageSupported",il="isBannerSupported",al=new WeakMap,sl=new WeakSet,cl=new WeakSet,ul=new WeakSet,ll=new WeakSet,fl=new WeakSet,pl=new WeakSet,hl=new WeakSet,dl=new WeakSet,yl=new WeakSet,ml=new WeakSet,vl=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vu(t,e)}(f,r);var o,i,a,c,l=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zu(a);if(c){var r=Zu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wu(t)}(this,t)});function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return zu(Wu(t=l.call.apply(l,[this].concat(i))),ml),zu(Wu(t),yl),zu(Wu(t),dl),zu(Wu(t),hl),zu(Wu(t),pl),zu(Wu(t),fl),zu(Wu(t),ll),zu(Wu(t),ul),zu(Wu(t),cl),zu(Wu(t),sl),Ku(Wu(t),"_supportedFeatures",[]),Ku(Wu(t),"_leaderboardsType",null),e=Wu(t),r=al,n={writable:!0,value:new Cu},Ju(e,r),r.set(e,n),t}return o=f,(i=[{key:"platformId",get:function(){return t.QA_TOOL}},{key:"platformLanguage",get:function(){return Qu(this,fl,El).call(this,{type:e.PLATFORM,action:rl.GET_LANGUAGE,options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(il)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var t;return null!==(t=this._leaderboardsType)&&void 0!==t?t:d}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),this.on(n.AUDIO_STATE_CHANGED,(function(r){Qu(t,fl,El).call(t,{type:e.PLATFORM,action:rl.AUDIO_STATE,options:{isEnabled:r}})})),this.on(n.PAUSE_STATE_CHANGED,(function(r){Qu(t,fl,El).call(t,{type:e.PLATFORM,action:rl.PAUSE_STATE,options:{isPaused:r}})})),Xu(this,al).addListener((function(r){var n=r.data;if(null!=n&&n.type&&(null==n?void 0:n.source)!==tl)if(n.type===e.PLATFORM){if(n.action===_.INITIALIZE)Qu(t,hl,Pl).call(t).then((function(){Qu(t,sl,_l).call(t,n)}));else if(n.action===rl.AUDIO_STATE)Qu(t,cl,gl).call(t,n);else if(n.action===rl.PAUSE_STATE)Qu(t,ul,Sl).call(t,n);else if(n.action===rl.GET_PERFORMANCE_RESOURCES){var o,i=Xu(t,al).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Qu(t,ll,bl).call(t,i,a)}}else n.type===e.ADVERTISEMENT&&Qu(t,dl,Ol).call(t,n)})),Qu(this,fl,El).call(this,{type:e.PLATFORM,action:_.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(t){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),Qu(this,pl,wl).call(this,e.PLAYER,_.AUTHORIZE_PLAYER,{options:t}).then((function(t){var e=t.auth;"success"===e.status?Qu(r,hl,Pl).call(r).then((function(){r._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):r._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e.error)}))),n.promise}},{key:"sendMessage",value:function(t){return[h.GAME_READY,h.IN_GAME_LOADING_STARTED,h.IN_GAME_LOADING_STOPPED,h.GAMEPLAY_STARTED,h.GAMEPLAY_STOPPED,h.PLAYER_GOT_ACHIEVEMENT,h.GAME_OVER].includes(t)?(Qu(this,fl,El).call(this,{type:e.PLATFORM,action:t}),Promise.resolve()):Yu(Zu(f.prototype),"sendMessage",this).call(this,t)}},{key:"getServerTime",value:function(){return Qu(this,pl,wl).call(this,e.PLATFORM,rl.GET_SERVER_TIME,{options:{}},{timeout:5e3}).then((function(t){var e=t.time;if(!e)throw new Error("Invalid server time");return e})).catch((function(){throw new Error("Server time request timeout")}))}},{key:"isStorageSupported",value:function(t){return Qu(this,fl,El).call(this,{type:e.STORAGE,action:rl.IS_STORAGE_SUPPORTED,options:{storageType:t}}),!(t!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(ol))||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(nl))}},{key:"isStorageAvailable",value:function(t){return Qu(this,fl,El).call(this,{type:e.STORAGE,action:rl.IS_STORAGE_AVAILABLE,options:{storageType:t}}),(t===u.PLATFORM_INTERNAL&&this._supportedFeatures.includes(ol)&&Qu(this,yl,Tl).call(this)||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(nl)))&&Yu(Zu(f.prototype),"isStorageAvailable",this).call(this,u.LOCAL_STORAGE)}},{key:"getDataFromStorage",value:function(t,r,n){return this.isStorageSupported(r)?Qu(this,pl,wl).call(this,e.STORAGE,rl.GET_DATA_FROM_STORAGE,{options:{key:t,storageType:r,tryParseJson:n}}).then((function(e){var r=e.storage;return q(t,r,n)})):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,r,n){return Qu(this,fl,El).call(this,{type:e.STORAGE,action:rl.SET_DATA_TO_STORAGE,options:{key:t,value:r,storageType:n}}),this.isStorageSupported(n)?n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE?Promise.resolve():Yu(Zu(f.prototype),"setDataToStorage",this).call(this,t,r,n):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,r){return Qu(this,fl,El).call(this,{type:e.STORAGE,action:rl.DELETE_DATA_FROM_STORAGE,options:{key:t,storageType:r}}),this.isStorageSupported(r)?r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE?Promise.resolve():Yu(Zu(f.prototype),"deleteDataFromStorage",this).call(this,t,r):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showInterstitial",value:function(t){this.isInterstitialSupported&&Qu(this,fl,El).call(this,{type:e.ADVERTISEMENT,action:"interstitial",options:{placement:t}})}},{key:"showRewarded",value:function(t){this.isRewardedSupported&&Qu(this,fl,El).call(this,{type:e.ADVERTISEMENT,action:"reward",options:{placement:t}})}},{key:"showBanner",value:function(t,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),Qu(this,fl,El).call(this,{type:e.ADVERTISEMENT,action:s.SHOWN,options:{type:$u,position:t,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),Qu(this,fl,El).call(this,{type:e.ADVERTISEMENT,action:s.HIDDEN,options:{type:$u}}))}},{key:"checkAdBlock",value:function(){return Qu(this,fl,El).call(this,{type:rl.CHECK_ADBLOCK,action:_.ADBLOCK_DETECT}),Yu(Zu(f.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var t=this._getPromiseDecorator(_.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(_.INVITE_FRIENDS),this._resolvePromiseDecorator(_.INVITE_FRIENDS),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.INVITE_FRIENDS})),t.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._resolvePromiseDecorator(_.JOIN_COMMUNITY),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.JOIN_COMMUNITY})),t.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var t=this._getPromiseDecorator(_.SHARE);return t||(t=this._createPromiseDecorator(_.SHARE),this._resolvePromiseDecorator(_.SHARE),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.SHARE})),t.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var t=this._getPromiseDecorator(_.CREATE_POST);return t||(t=this._createPromiseDecorator(_.CREATE_POST),this._resolvePromiseDecorator(_.CREATE_POST),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.CREATE_POST})),t.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.ADD_TO_HOME_SCREEN})),t.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_FAVORITES);return t||(t=this._createPromiseDecorator(_.ADD_TO_FAVORITES),this._resolvePromiseDecorator(_.ADD_TO_FAVORITES),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.ADD_TO_FAVORITES})),t.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._resolvePromiseDecorator(_.RATE),Qu(this,fl,El).call(this,{type:e.SOCIAL,action:_.RATE})),t.promise}},{key:"paymentsPurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),Qu(this,pl,wl).call(this,e.PAYMENTS,_.PURCHASE,{options:{product:n}}).then((function(e){var n=e.purchase;if(n&&"object"===Fu(n))if(null!=n&&n.status){var o=Hu({id:t},n.purchaseData);r._paymentsPurchases.push(o),r._resolvePromiseDecorator(_.PURCHASE,o)}else r._rejectPromiseDecorator(_.PURCHASE,(null==n?void 0:n.error)||new Error("Unknown purchase error"));else r._rejectPromiseDecorator(_.PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsConsumePurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(_.CONSUME_PURCHASE);return o||(o=this._createPromiseDecorator(_.CONSUME_PURCHASE),Qu(this,pl,wl).call(this,e.PAYMENTS,_.CONSUME_PURCHASE,{options:{product:this._paymentsPurchases[n]}}).then((function(e){var o=e.purchase;if(o&&"object"===Fu(o))if(null!=o&&o.status){var i=Hu({id:t},o);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(_.CONSUME_PURCHASE,i)}else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,(null==o?void 0:o.error)||new Error("Unknown consume purchase error"));else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);if(!r){r=this._createPromiseDecorator(_.GET_CATALOG);var n=this._paymentsGetProductsPlatformData();Qu(this,pl,wl).call(this,e.PAYMENTS,_.GET_CATALOG,{options:{products:n}}).then((function(){var e=n.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));t._resolvePromiseDecorator(_.GET_CATALOG,e)}))}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_PURCHASES);return r||(r=this._createPromiseDecorator(_.GET_PURCHASES),Qu(this,pl,wl).call(this,e.PAYMENTS,_.GET_PURCHASES,{options:{products:this._paymentsGetProductsPlatformData()}}).then((function(e){var r=e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){return Hu({id:n.find((function(e){return e.id===t.id})).id},t.purchaseData)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)}))),r.promise}},{key:"getRemoteConfig",value:function(){var t=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),Qu(this,pl,wl).call(this,e.REMOTE_CONFIG,_.GET_REMOTE_CONFIG).then((function(e){var r=e.result;t._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,r)}))),r.promise}},{key:"clipboardWrite",value:function(t){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return n||(n=this._createPromiseDecorator(_.CLIPBOARD_WRITE),Qu(this,pl,wl).call(this,e.CLIPBOARD,_.CLIPBOARD_WRITE,{options:{text:t}}).then((function(){r._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)}))),n.promise}},{key:"clipboardRead",value:function(){var t=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(rl.CLIPBOARD_READ);return r||(r=this._createPromiseDecorator(rl.CLIPBOARD_READ),Qu(this,pl,wl).call(this,e.CLIPBOARD,rl.CLIPBOARD_READ,{options:{}}).then((function(e){var r=e.text;t._resolvePromiseDecorator(rl.CLIPBOARD_READ,r)}))),r.promise}},{key:"leaderboardsSetScore",value:function(t,r){if(this.leaderboardsType===d)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={id:t,score:r};Qu(this,fl,El).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var r=this;if(this.leaderboardsType!==y)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),Qu(this,pl,wl).call(this,e.LEADERBOARDS,_.LEADERBOARDS_GET_ENTRIES,{options:{id:t}},{timeout:5e3}).then((function(t){var e=t.entries;r._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,e)})).catch((function(){r._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES)}))),n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){return this.leaderboardsType!==v?Promise.reject(new Error("Leaderboards are not available")):(Qu(this,fl,El).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SHOW_NATIVE_POPUP,options:{id:t}}),Promise.resolve(_.LEADERBOARDS_SHOW_NATIVE_POPUP))}},{key:"unlockAchievement",value:function(t){return this.isAchievementsSupported?Qu(this,pl,wl).call(this,e.ACHIEVEMENTS,rl.UNLOCK_ACHIEVEMENT,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"getAchievementsList",value:function(t){return this.isGetAchievementsListSupported?Qu(this,pl,wl).call(this,e.ACHIEVEMENTS,rl.GET_ACHIEVEMENTS,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?(Qu(this,fl,El).call(this,{type:e.ACHIEVEMENTS,action:rl.SHOW_ACHIEVEMENTS_NATIVE_POPUP}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(t){return Hu({id:t.id},t.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));return r?Hu({id:r.id},r.playgama):null}}])&&Uu(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),f}(Fo);function _l(t){var e,r,n,o,i;this._supportedFeatures=t.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(il);var a=t.config,s=void 0===a?{}:a;this._deviceType=null!==(e=s.deviceType)&&void 0!==e?e:Yu(Zu(Nu.prototype),"deviceType",this),this._platformLanguage=s.platformLanguage?s.platformLanguage.toLowerCase():Yu(Zu(Nu.prototype),"platformLanguage",this),this._platformTld=null!==(r=s.platformTld)&&void 0!==r?r:Yu(Zu(Nu.prototype),"platformTld",this),this._platformPayload=null!==(n=s.platformPayload)&&void 0!==n?n:Yu(Zu(Nu.prototype),"platformPayload",this),this._leaderboardsType=null!==(o=s.leaderboardsType)&&void 0!==o?o:d,this._internalStoragePolicy=null!==(i=s.internalStoragePolicy)&&void 0!==i?i:el.AUTHORIZED_ONLY,this._paymentsPurchases=t.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE),Qu(this,ml,kl).call(this),Qu(this,fl,El).call(this,{type:"liveness",action:rl.LIVENESS_PING,options:{version:"1.28.0-preview.1"}})}function gl(t){this._setAudioState(t.options.isEnabled)}function Sl(t){this._setPauseState(t.options.isPaused)}function bl(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(t){var e={};return i.forEach((function(r){r in t&&(e[r]=t[r])})),e}));return Qu(this,fl,El).call(this,{type:e.PLATFORM,action:rl.GET_PERFORMANCE_RESOURCES,id:t,options:{resources:a}}),Promise.resolve(o)}function El(t){Xu(this,al).send(Hu({source:tl},t))}function wl(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Xu(this,al).generateMessageId(),a=Hu({timeout:0},o);return new Promise((function(s,c){var u=function n(o){var a=o.data;(null==a?void 0:a.type)===t&&(null==a?void 0:a.action)===e&&(null==a?void 0:a.id)===i&&(null==a?void 0:a.source)!==tl&&(Xu(r,al).removeListener(n),s(a))};Xu(r,al).addListener(u),Qu(r,fl,El).call(r,Hu({type:t,action:e,id:i,options:o},n)),a.timeout>0&&setTimeout((function(){c(new Error("Request timeout")),Xu(r,al).removeListener(u)}),a.timeout)}))}function Pl(){return Al.apply(this,arguments)}function Al(){var t;return t=Gu().mark((function t(){var r=this;return Gu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Qu(this,pl,wl).call(this,e.PLAYER,rl.GET_PLAYER).then((function(t){var e,n=t.player;null!=n&&n.isAuthorized?(r._playerId=n.userId,r._isPlayerAuthorized=n.isAuthorized,r._playerName=n.name,Array.isArray(n.photos)&&(r._playerPhotos=function(t){if(Array.isArray(t))return xu(t)}(e=n.photos)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return xu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xu(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=n,Qu(r,ml,kl).call(r)):r._playerApplyGuestData()})).catch((function(){r._playerApplyGuestData()})));case 1:case"end":return t.stop()}}),t,this)})),Al=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bu(i,n,o,a,s,"next",t)}function s(t){Bu(i,n,o,a,s,"throw",t)}a(void 0)}))},Al.apply(this,arguments)}function Ol(t){var e=t.action,r=t.payload;if("interstitial"===e){if(!this.isInterstitialSupported)return;switch(r.status){case"start":this._setInterstitialState(i.LOADING);break;case"open":this._setInterstitialState(i.OPENED);break;case"failed":this._setInterstitialState(i.FAILED);break;case"close":this._setInterstitialState(i.CLOSED)}}else if("reward"===e){if(!this.isRewardedSupported)return;switch(r.status){case"start":this._setRewardedState(a.LOADING);break;case"open":this._setRewardedState(a.OPENED);break;case"rewarded":this._setRewardedState(a.REWARDED);break;case"close":this._setRewardedState(a.CLOSED);break;case"failed":this._setRewardedState(a.FAILED)}}}function Tl(){return this._internalStoragePolicy===el.AUTHORIZED_ONLY&&this._isPlayerAuthorized||this._internalStoragePolicy===el.ALWAYS}function kl(){Qu(this,yl,Tl).call(this)?this._defaultStorageType=u.PLATFORM_INTERNAL:this._defaultStorageType=u.LOCAL_STORAGE}Nu=vl;const Dl=vl;function Il(t){return Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(t)}function Rl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ll(n.key),n)}}function Ll(t){var e=function(t,e){if("object"!=Il(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Il(e)?e:String(e)}function jl(){return jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},jl.apply(this,arguments)}function Nl(t,e){return Nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nl(t,e)}function Cl(t){return Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cl(t)}const Gl=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nl(t,e)}(u,e);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cl(o);if(s){var r=Cl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Il(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return t.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Z("PokiSDK","init").then((function(){t._platformSdk=window.PokiSDK,t._platformSdk.init().then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return jl(Cl(u.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this,e=!1;this._platformSdk.commercialBreak((function(){e=!0,t._setInterstitialState(i.OPENED)})).then((function(){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)})).catch((function(e){t._setInterstitialState(i.FAILED,e)}))}},{key:"showRewarded",value:function(){var t=this,e=!1;this._platformSdk.rewardedBreak((function(){e=!0,t._setRewardedState(a.OPENED)})).then((function(r){e?(r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(e){t._setRewardedState(a.FAILED,e)}))}}])&&Rl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Fo);function xl(t){return xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(t)}function Bl(){Bl=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==xl(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(xl(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Ml(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Hl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ml(i,n,o,a,s,"next",t)}function s(t){Ml(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Fl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ul(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fl(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Wl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wl(n.key),n)}}function Wl(t){var e=function(t,e){if("object"!=xl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xl(e)?e:String(e)}function zl(){return zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zl.apply(this,arguments)}function Yl(t,e){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yl(t,e)}function Zl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jl(t){return Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jl(t)}function Kl(t,e){Xl(t,e),e.add(t)}function ql(t,e,r){Xl(t,e),e.set(t,r)}function Xl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ql(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ef(t,e,"set"),r),r}function $l(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function tf(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ef(t,e,"get"))}function ef(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var rf=new WeakMap,nf=new WeakMap,of=new WeakSet,af=new WeakSet,sf=new WeakSet,cf=new WeakSet;function uf(){var t=this;return tf(this,rf)?new Promise((function(e){tf(t,rf).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!1).then((function(){return e()}));case"ready":t._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){t._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!1).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setInterstitialState(i.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!1)}function lf(){var t=this;return tf(this,rf)?new Promise((function(e){tf(t,rf).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!0).then((function(){return e()}));case"ready":t._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){t._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){t._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!0).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setRewardedState(a.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!0)}function ff(t){t?(this._isPlayerAuthorized=!0,this._playerId=t.playerId,this._playerName=t.playerDisplayName,this._playerExtra=t,Ql(this,nf,"personal"===t.userAccountType.toLowerCase())):this._playerApplyGuestData()}function pf(t){return hf.apply(this,arguments)}function hf(){return hf=Hl(Bl().mark((function t(e){var r,n=arguments;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSave.getDataAsync({gameId:this._options.gameId});case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)}))),hf.apply(this,arguments)}const df=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yl(t,e)}(d,e);var r,n,o,c,l,f,p,h=(f=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jl(f);if(p){var r=Jl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zl(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Kl(Zl(t=h.call.apply(h,[this].concat(r))),cf),Kl(Zl(t),sf),Kl(Zl(t),af),Kl(Zl(t),of),ql(Zl(t),rf,{writable:!0,value:null}),ql(Zl(t),nf,{writable:!0,value:!1}),t}return r=d,n=[{key:"platformId",get:function(){return t.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return tf(this,nf)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;e=this._createPromiseDecorator(_.INITIALIZE),W("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.21.min.js").then((function(){return Z("$msstart")})).then((function(){t._platformSdk=window.$msstart,t._platformSdk.getSignedInUserAsync().then((function(e){$l(t,sf,ff).call(t,e)})).catch((function(){$l(t,sf,ff).call(t,null)})).finally((function(){t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&W("https://playgama.com/ads/msn.v0.1.js").then((function(){return Z("pgAds")})).then((function(){window.pgAds.init(n).then((function(){Ql(t,rf,window.pgAds);var e=t._options.gameId;tf(t,rf).updateTargeting({gameId:e})}))}))}return e.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.signInAsync().then((function(r){$l(t,sf,ff).call(t,r),e()})).catch((function(e){$l(t,sf,ff).call(t,null),r(e)}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||zl(Jl(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:zl(Jl(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?$l(this,cf,pf).call(this,t,r):Promise.reject():zl(Jl(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Ul({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSave.saveDataAsync({data:i,gameId:n._options.gameId}).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject():zl(Jl(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null,delete r._platformStorageCachedData[t[i]];else o[t]=null,delete r._platformStorageCachedData[t];r.platformSdk.cloudSave.saveDataAsync({data:o,gameId:r._options.gameId}).then((function(){e()})).catch((function(t){n(t)}))})):Promise.reject():zl(Jl(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.shareAsync(t).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;return new Promise((function(t,n){r._platformSdk.submitGameResultsAsync(e).then(t).catch(n)}))}},{key:"showBanner",value:function(t){var e,r=this;e="top"===t?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([e]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideDisplayAdsAsync().then((function(){t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.loadAdsAsync(!1).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setInterstitialState(i.OPENED),e.showAdsCompletedAsync})).then((function(){return t._setInterstitialState(i.CLOSED)})).catch((function(){return $l(t,of,uf).call(t)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.loadAdsAsync(!0).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setRewardedState(a.OPENED),e.showAdsCompletedAsync})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return $l(t,af,lf).call(t)}))}},{key:"paymentsPurchase",value:(l=Hl(Bl().mark((function t(e){var r,n,o,i;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._paymentsGetProductPlatformData(e)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.PURCHASE)){t.next=23;break}if(n=this._createPromiseDecorator(_.PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.purchaseAsync({productId:r.platformProductId});case 12:if("IAP_PURCHASE_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:i=Ul(Ul({id:e},o.receipt),{},{receiptSignature:o.receiptSignature}),this._paymentsPurchases.push(i),this._resolvePromiseDecorator(_.PURCHASE,i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),this._rejectPromiseDecorator(_.PURCHASE,t.t0);case 23:return t.abrupt("return",n.promise);case 24:case"end":return t.stop()}}),t,this,[[6,20]])}))),function(t){return l.apply(this,arguments)})},{key:"paymentsConsumePurchase",value:(c=Hl(Bl().mark((function t(e){var r,n,o,i;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this._paymentsPurchases.findIndex((function(t){return t.id===e})))<0)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.CONSUME_PURCHASE)){t.next=24;break}if(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].productId});case 12:if("IAP_CONSUME_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:this._paymentsPurchases.splice(r,1),delete(i=Ul(Ul({id:e},o.consumptionReceipt),{},{consumptionSignature:o.consumptionSignature})).productId,this._resolvePromiseDecorator(_.CONSUME_PURCHASE,i),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),this._rejectPromiseDecorator(_.CONSUME_PURCHASE,t.t0);case 24:return t.abrupt("return",n.promise);case 25:case"end":return t.stop()}}),t,this,[[6,21]])}))),function(t){return c.apply(this,arguments)})},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=e.map((function(t){var e=r.find((function(e){return e.productId===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,publisherName:e.publisherName,inAppOfferToken:e.inAppOfferToken,isConsumable:e.isConsumable,price:"".concat(e.price.listPrice," ").concat(e.price.currencyCode," "),priceCurrencyCode:e.price.currencyCode,priceValue:e.price.listPrice}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)}else t._rejectPromiseDecorator(_.GET_CATALOG,r.description)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:(o=Hl(Bl().mark((function t(){var e,r,n;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._getPromiseDecorator(_.GET_PURCHASES)){t.next=20;break}if(e=this._createPromiseDecorator(_.GET_PURCHASES),t.prev=3,this._isPlayerAuthorized){t.next=7;break}return t.next=7,this.authorizePlayer();case 7:return t.next=9,this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId});case 9:if("IAP_GET_ALL_PURCHASES_FAILURE"!==(r=t.sent).code){t.next=12;break}throw new Error(r.description);case 12:n=this._paymentsGetProductsPlatformData(),this._paymentsPurchases=r.receipts.map((function(t){return Ul(Ul({id:n.find((function(e){return e.platformProductId===t.productId})).id},t),{},{receiptSignature:r.receiptSignature})})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),this._rejectPromiseDecorator(_.GET_PURCHASES,t.t0);case 20:return t.abrupt("return",e.promise);case 21:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return o.apply(this,arguments)})}],n&&Vl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Fo);function yf(t){return yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(t)}function mf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mf(Object(r),!0).forEach((function(e){Pf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Af(n.key),n)}}function gf(){return gf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ef(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},gf.apply(this,arguments)}function Sf(t,e){return Sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sf(t,e)}function bf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ef(t){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ef(t)}function wf(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Pf(t,e,r){return(e=Af(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Af(t){var e=function(t,e){if("object"!=yf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yf(e)?e:String(e)}function Of(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Tf=new WeakSet,kf=new WeakSet,Df=new WeakSet,If=new WeakSet,Rf=new WeakSet,Lf=new WeakSet,jf=new WeakSet,Nf=new WeakSet,Cf=new WeakSet,Gf=new WeakSet,xf=new WeakSet,Bf=new WeakSet,Mf=new WeakSet;function Hf(t,e){var r;r=JSON.stringify({action:t,data:e}),window.system&&window.system[V](r)}function Ff(){if(window.system){var t=this;window.system.onmessage=function(e){try{var r=JSON.parse(e),n=r.action,o=r.data;n===_.INITIALIZE?Of(t,Df,Uf).call(t,o):n===_.AUTHORIZE_PLAYER?Of(t,If,Vf).call(t,o):n===_.SET_INTERSTITIAL_STATE?Of(t,Rf,Wf).call(t,o):n===_.SET_REWARDED_STATE?Of(t,Lf,zf).call(t,o):n===_.GET_CATALOG?Of(t,jf,Yf).call(t,o):n===_.PURCHASE?Of(t,Nf,Zf).call(t,o):n===_.CONSUME_PURCHASE?Of(t,Cf,Jf).call(t,o):n===_.GET_PURCHASES?Of(t,Gf,Kf).call(t,o):n===_.GET_STORAGE_DATA?Of(t,xf,qf).call(t,o):n===_.SET_STORAGE_DATA?Of(t,Bf,Xf).call(t,o):n===_.DELETE_STORAGE_DATA&&Of(t,Mf,Qf).call(t,o)}catch(t){console.error("Error parsing Huawei message:",t)}}}}function Uf(t){t.success?(this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE,t)):this._rejectPromiseDecorator(_.INITIALIZE,new Error(t))}function Vf(t){if(!t.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,new Error(t));this._playerId=t.playerId,this._playerName=t.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function Wf(t){Object.values(i).includes(t.state)&&this._setInterstitialState(t.state,t.state===i.FAILED?new Error(t):void 0)}function zf(t){Object.values(a).includes(t.state)&&this._setRewardedState(t.state,t.state===a.FAILED?new Error(t):void 0)}function Yf(t){if(t.success){var e=this._paymentsGetProductsPlatformData().map((function(e){var r=t.data.find((function(t){return t.productId===e.id}));return{id:e.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(_.GET_CATALOG,e)}else this._rejectPromiseDecorator(_.GET_CATALOG,new Error(t))}function Zf(t){if(t.success){var e=t.data,r=vf({id:t.id},e);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(_.PURCHASE,r)}else this._rejectPromiseDecorator(_.PURCHASE,new Error(t))}function Jf(t){if(t.success){var e=this._paymentsPurchases.findIndex((function(e){return e.purchaseToken===t.purchaseToken}));e>=0&&this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,t)}else this._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error(t))}function Kf(t){if(t.success){var e=this._paymentsGetProductsPlatformData();this._paymentsPurchases=t.data.map((function(t){var r=JSON.parse(t),n=vf({id:e.find((function(t){return t.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(_.GET_PURCHASES,new Error(t))}function qf(t){t.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.GET_STORAGE_DATA,new Error(t))}function Xf(t){t.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.SET_STORAGE_DATA,new Error(t))}function Qf(t){t.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA,new Error(t))}const $f=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sf(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ef(o);if(i){var r=Ef(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bf(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return wf(bf(t=a.call.apply(a,[this].concat(r))),Mf),wf(bf(t),Bf),wf(bf(t),xf),wf(bf(t),Gf),wf(bf(t),Cf),wf(bf(t),Nf),wf(bf(t),jf),wf(bf(t),Lf),wf(bf(t),Rf),wf(bf(t),If),wf(bf(t),Df),wf(bf(t),kf),wf(bf(t),Tf),Pf(bf(t),"_defaultStorageType",u.PLATFORM_INTERNAL),t}return r=s,(n=[{key:"platformId",get:function(){return t.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);return t||(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,Of(this,kf,Ff).call(this),Of(this,Tf,Hf).call(this,_.INITIALIZE,this._appId)):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),t.promise}},{key:"authorizePlayer",value:function(){var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),Of(this,Tf,Hf).call(this,_.AUTHORIZE_PLAYER)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||gf(Ef(s.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||gf(Ef(s.prototype),"isStorageAvailable",this).call(this,t)}},{key:"setDataToStorage",value:function(t,e,r){if(r!==u.PLATFORM_INTERNAL)return gf(Ef(s.prototype),"setDataToStorage",this).call(this,t,e,r);var n=this._getPromiseDecorator(_.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.SET_STORAGE_DATA),Of(this,Tf,Hf).call(this,_.SET_STORAGE_DATA,{key:t,value:e})),n.promise}},{key:"getDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return gf(Ef(s.prototype),"getDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.GET_STORAGE_DATA),Of(this,Tf,Hf).call(this,_.GET_STORAGE_DATA,t)),r.promise}},{key:"deleteDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return gf(Ef(s.prototype),"deleteDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),Of(this,Tf,Hf).call(this,_.DELETE_STORAGE_DATA,t)),r.promise}},{key:"showInterstitial",value:function(t){Of(this,Tf,Hf).call(this,_.SHOW_INTERSTITIAL,t)}},{key:"showRewarded",value:function(t){Of(this,Tf,Hf).call(this,_.SHOW_REWARDED,t)}},{key:"paymentsPurchase",value:function(t){if(!this._paymentsGetProductPlatformData(t))return Promise.reject();var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),Of(this,Tf,Hf).call(this,_.PURCHASE,t)),e.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject();var r=this._getPromiseDecorator(_.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(_.CONSUME_PURCHASE),Of(this,Tf,Hf).call(this,_.CONSUME_PURCHASE,this._paymentsPurchases[e].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=this._getPromiseDecorator(_.GET_CATALOG);return e||(e=this._createPromiseDecorator(_.GET_CATALOG),Of(this,Tf,Hf).call(this,_.GET_CATALOG,t.map((function(t){return t.id})))),e.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),Of(this,Tf,Hf).call(this,_.GET_PURCHASES)),t.promise}}])&&_f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Fo);function tp(t){return tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(t)}function ep(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ep(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=sp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function np(){np=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==tp(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(tp(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function op(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ip(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){op(i,n,o,a,s,"next",t)}function s(t){op(i,n,o,a,s,"throw",t)}a(void 0)}))}}function ap(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sp(n.key),n)}}function sp(t){var e=function(t,e){if("object"!=tp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tp(e)?e:String(e)}function cp(){return cp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},cp.apply(this,arguments)}function up(t,e){return up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},up(t,e)}function lp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fp(t)}var pp=new WeakSet;function hp(){var t=this,e={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=e[r];n&&(t._setRewardedState(n),n===a.REWARDED&&t._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(e){var n=r[e];n&&t._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(e){var r=n[e];r&&t._setBannerState(r)}))}const dp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&up(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fp(a);if(s){var r=fp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===tp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lp(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=lp(t=c.call.apply(c,[this].concat(o))),r=pp),r.add(e),t}return r=l,n=[{key:"platformId",get:function(){return t.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;switch(e=this._createPromiseDecorator(_.INITIALIZE),new URLSearchParams(window.location.search).get("target")){case"prod":default:r="https://app.bitquest.games/bqsdk.min.js";break;case"stage":r="https://app-stage.bitquest.games/bqsdk.min.js";break;case"bank":r="https://app-global.memebeat.io/bqsdk.min.js"}W(r).then((function(){Z("bq").then((function(){t._platformSdk=window.bq,t._platformSdk.initialize().then((function(){t._platformSdk.platform.sendMessage("game_ready");var e=t._platformSdk.player,r=e.id,n=void 0===r?null:r,o=e.name,i=void 0===o?"":o;t._playerId=n,t._playerName=i,t._isPlayerAuthorized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._playerExtra=e,function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,pp,hp).call(t),t.showPreRoll(),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))}return e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||cp(fp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||cp(fp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return n._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return this._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return cp(fp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=ip(np().mark((function t(e,r,n){return np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return t.next=3,this._platformSdk.storage.set(e,r,"platform_internal");case 3:return t.abrupt("return");case 4:return t.next=6,cp(fp(l.prototype),"setDataToStorage",this).call(this,e,r,n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=ip(np().mark((function t(e,r){var n;return np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=13;break}if(!Array.isArray(e)){t.next=10;break}n=0;case 3:if(!(n<e.length)){t.next=9;break}return t.next=6,this._platformSdk.storage.delete(e[n],"platform_internal");case 6:n++,t.next=3;break;case 9:return t.abrupt("return");case 10:return t.next=12,this._platformSdk.storage.delete(e,"platform_internal");case 12:return t.abrupt("return");case 13:return t.next=15,cp(fp(l.prototype),"deleteDataFromStorage",this).call(this,e,r);case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._getPromiseDecorator(_.PURCHASE);return r||(r=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payment.purchase(t).then((function(r){var n=rp({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var t,e=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(t=this._platformSdk)||void 0===t||!t.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(_.GET_CATALOG);return n||(n=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(t){if(!Array.isArray(t))throw new Error("Catalog response is not an array");var n=r.map((function(e){var r=t.find((function(t){return t.purchaseId===e.id}));return r?{id:e.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);e._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(_.GET_CATALOG,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(t).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(e){var r=null==e?void 0:e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){var e=n.find((function(e){return e.id===t.purchaseId}));if(!e)return null;var r=rp({id:e.id},t);return delete r.purchaseId,r})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.leaderboard.setScore(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(t).then((function(t){var r=Array.isArray(t)?t:t.entries||t.data||[];e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))),r.promise}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.platform.getServerTime())}))}}],n&&ap(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function yp(t){return yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(t)}function mp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bp(n.key),n)}}function vp(t,e){return vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vp(t,e)}function _p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(t)}function Sp(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function bp(t){var e=function(t,e){if("object"!=yp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yp(e)?e:String(e)}function Ep(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var wp=new WeakSet,Pp=new WeakSet,Ap=new WeakSet;function Op(){var t=this;this._platformSdk.ads.on("rewarded:start",(function(){t._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(e){e||t._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)}))}function Tp(){var t=this;this._platformSdk.ads.on("fullscreen:start",(function(){t._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){t._setInterstitialState(i.CLOSED)}))}function kp(){var t=this;this._platformSdk.ads.on("sticky:render",(function(){t._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){t._setBannerState(s.HIDDEN)}))}const Dp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vp(t,e)}(c,e);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gp(o);if(i){var r=gp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _p(t)}(this,t)});function c(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Sp(_p(t=s.call.apply(s,[this].concat(o))),Ap),Sp(_p(t),Pp),Sp(_p(t),wp),e=_p(t),!0,(r=bp(r="_isBannerSupported"))in e?Object.defineProperty(e,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[r]=true,t}return r=c,(n=[{key:"platformId",get:function(){return t.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);W(r).then((function(){Z("GamePush").then((function(){var e;t._platformSdk=window.GamePush;var r=null===(e=t._platformSdk)||void 0===e?void 0:e.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;t._isPlayerAuthorized=!0,t._playerId=o,t._playerName=a,c&&t._playerPhotos.push(c)}else t._playerApplyGuestData();t._isInitialized=!0,Ep(t,Pp,Tp).call(t),Ep(t,wp,Op).call(t),Ep(t,Ap,kp).call(t),t._resolvePromiseDecorator(_.INITIALIZE)}))}))}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return e.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.ads.showRewardedVideo().catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ads.isAdblockEnabled().then((function(t){e(t)}))}))}}])&&mp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fo);function Ip(t){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(t)}function Rp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rp(Object(r),!0).forEach((function(e){xp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bp(n.key),n)}}function Np(t,e){return Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Np(t,e)}function Cp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gp(t){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gp(t)}function xp(t,e,r){return(e=Bp(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bp(t){var e=function(t,e){if("object"!=Ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ip(e)?e:String(e)}var Mp="https://discord.com/api/v10";const Hp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Np(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gp(o);if(i){var r=Gp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Cp(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return xp(Cp(t=a.call.apply(a,[this].concat(r))),"_appId",null),xp(Cp(t),"_accessToken",null),t}return r=s,(n=[{key:"platformId",get:function(){return t.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.appId?(this._appId=this._options.appId,W("/cdn/discord/discord-v2.0.0.min.js").then((function(){Z("discord","DiscordSDK").then((function(){return t._platformSdk=new window.discord.DiscordSDK(t._appId),t._platformSdk.ready()})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))):this._rejectPromiseDecorator(_.INITIALIZE,g.DISCORD_GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(t){var e=this,r=(null==t?void 0:t.scope)||["identify"],n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(t){var r=t.code;return fetch("".concat("/api","/discord/auth-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,appId:e._appId})})})).then((function(t){return t.json()})).then((function(t){return e._accessToken=t.accessToken,e._playerExtra={token:t.token,accessToken:e._accessToken,channelId:e._platformSdk.channelId},e._platformSdk.commands.authenticate({access_token:e._accessToken})})).then((function(t){if(null===t)throw e._playerApplyGuestData(),new Error("Authorization failed");return fetch("".concat(Mp,"/users/@me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e._accessToken),"Content-Type":"application/json"}})})).then((function(t){return t.json()})).then((function(t){e._playerId=t.id,e._playerName=t.username,t.avatar&&e._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png")),e._playerExtra=Lp(Lp({},e._playerExtra),t),e._isPlayerAuthorized=!0,e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})).catch((function(t){e._playerApplyGuestData(),e._accessToken=null,e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),n.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);if(!r)return Promise.reject();var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=Lp({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),fetch("".concat(Mp,"/applications/").concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=e.map((function(t){var e,r,o=n.find((function(e){return e.id===t.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(e=o.price)||void 0===e||null===(e=e.currency)||void 0===e?void 0:e.toUpperCase(),s="".concat(i," ").concat(a);return{id:t.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.entitlements.map((function(t){return Lp({id:r.find((function(e){return e.id===t.id})).id},t)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=this._getPromiseDecorator(_.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),e.promise}},{key:"share",value:function(t){var e=this;if(!t.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:t.mediaUrl}).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}])&&jp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Fo);function Fp(t){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(t)}function Up(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Up(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=zp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Up(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zp(n.key),n)}}function zp(t){var e=function(t,e){if("object"!=Fp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fp(e)?e:String(e)}function Yp(){return Yp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Yp.apply(this,arguments)}function Zp(t,e){return Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zp(t,e)}function Jp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kp(t){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kp(t)}function qp(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Xp(t,e,"get"))}function Xp(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Qp=new WeakMap;const $p=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zp(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kp(o);if(s){var r=Kp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jp(t)}(this,t)});function l(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=Jp(t=c.call.apply(c,[this].concat(i))),n={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=Qp),r.set(e,n),t}return r=l,(n=[{key:"platformId",get:function(){return t.YOUTUBE}},{key:"platformLanguage",get:function(){return qp(this,Qp)?qp(this,Qp):Yp(Kp(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),Z("ytgame").then((function(){t._platformSdk=window.ytgame,t._defaultStorageType=u.PLATFORM_INTERNAL;var e=t._platformSdk.system.getLanguage().then((function(e){var r,n,o;r=t,n=Qp,o=e.length>2?e.slice(0,2):e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r,Xp(r,n,"set"),o)}));t._platformStorageCachedData={};var r=t._platformSdk.game.loadData().then((function(e){"string"==typeof e&&""!==e&&(t._platformStorageCachedData=JSON.parse(e))}));t._platformSdk.system.onAudioEnabledChange((function(e){t._setAudioState(e)})),t._platformSdk.system.onPause((function(){t._setPauseState(!0)})),t._platformSdk.system.onResume((function(){t._setPauseState(!1)})),Promise.all([e,r]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE),t._platformSdk.game.firstFrameReady()}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Yp(Kp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Yp(Kp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(t)){for(var i=[],a=0;a<t.length;a++){var s=void 0===n._platformStorageCachedData[t[a]]?null:n._platformStorageCachedData[t[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(t){}i.push(s)}e(i)}else{var c=void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(t){}e(c)}})).catch((function(){o()}))})):Yp(Kp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Vp({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Yp(Kp(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o=null!==r._platformStorageCachedData?Vp({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))})):Yp(Kp(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Yp(Kp(l.prototype),"sendMessage",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var i="string"==typeof e?parseInt(e,10):e;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){n._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return o.promise}}])&&Wp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function th(t){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(t)}var eh=["gamer_id","gamer_name","gamer_avatar_url"];function rh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ch(n.key),n)}}function nh(t,e){return nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nh(t,e)}function oh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ih(t){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ih(t)}function ah(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function sh(t,e,r){return(e=ch(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ch(t){var e=function(t,e){if("object"!=th(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=th(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==th(e)?e:String(e)}function uh(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var lh=new WeakSet,fh=new WeakSet;function ph(){var t=this,e=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadInterstitialPromise=null,n(new Error(t))}})}))),this._preloadInterstitialPromise}function hh(){var t=this,e=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadRewardedPromise=null,n(new Error(t))}})}))),this._preloadRewardedPromise}const dh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nh(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ih(o);if(c){var r=ih(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oh(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ah(oh(t=u.call.apply(u,[this].concat(r))),fh),ah(oh(t),lh),sh(oh(t),"_preloadInterstitialPromise",null),sh(oh(t),"_preloadRewardedPromise",null),sh(oh(t),"_isBannerAvailable",!1),t}return r=l,(n=[{key:"platformId",get:function(){return t.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.onSdkReady=function(){if(t._platformSdk=window.JioGames,t._platformSdk.playerInfo){var e=t._platformSdk.playerInfo,r=e.gamer_id,n=e.gamer_name,o=e.gamer_avatar_url,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,eh);t.playerId=r||null,t.playerName=n||null,o&&t.playerPhotos.push(o),t.playerExtra=i,t._isPlayerAuthorized=!0}t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)},window.onBannerReady=function(){t._isBannerAvailable=!0},W("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,JSON.stringify(e))}))),e.promise}},{key:"preloadInterstitial",value:function(){uh(this,lh,ph).call(this)}},{key:"showInterstitial",value:function(){var t=this;uh(this,lh,ph).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Interstitial,{onAdClosed:function(){t._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setInterstitialState(i.FAILED)}}),t._setInterstitialState(i.OPENED),t._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){uh(this,fh,hh).call(this)}},{key:"showRewarded",value:function(){var t=this;uh(this,fh,hh).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Rewarded,{onAdClosed:function(e){e&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setRewardedState(a.FAILED)}}),t._setRewardedState(a.OPENED),t._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(t){var e,r=this;this._isBannerAvailable?null===(e=window.JGBanner)||void 0===e||e.loadBanner().then((function(){var e,n;r._setBannerState(s.SHOWN),null===(e=window.JGBanner)||void 0===e||e.showBanner(t||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(t){console.error(t),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var t;null===(t=window.JGBanner)||void 0===t||t.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(t,e,r){if(!r)return Promise.reject();var n="string"==typeof e?parseInt(e,10):e;return this._platformSdk.postScore(n),Promise.resolve()}}])&&rh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function yh(t){return yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(t)}function mh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mh(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=gh(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gh(n.key),n)}}function gh(t){var e=function(t,e){if("object"!=yh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yh(e)?e:String(e)}function Sh(){return Sh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Eh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Sh.apply(this,arguments)}function bh(t,e){return bh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bh(t,e)}function Eh(t){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(t)}const wh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bh(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Eh(o);if(s){var r=Eh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===yh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||Sh(Eh(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){Z("PortalSDK").then((function(){t._platformSdk=window.PortalSDK,t._platformSdk.initialize().then((function(){t._platformSdk.initializeOverlay(),t._defaultStorageType=u.PLATFORM_INTERNAL,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Sh(Eh(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Sh(Eh(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return Promise.resolve(n._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Sh(Eh(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t,r){return Promise.resolve(n._platformSdk.setValue(t,e[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(t,e))}return Sh(Eh(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var n=t.map((function(t){return Promise.resolve(r._platformSdk.removeValue(t))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(t))}return Sh(Eh(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.requestAd().then((function(){t._setInterstitialState(i.OPENED),t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.requestRewardAd().then((function(e){e?(t._setRewardedState(a.OPENED),t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):Sh(Eh(l.prototype),"sendMessage",this).call(this,t)}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t),n=this._getPromiseDecorator(_.PURCHASE);if(!n){n=this._createPromiseDecorator(_.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(t){var r=t.find((function(t){return t&&t.id===o}));if(!r)throw new Error("Shop item not found in catalog");return e._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=vh({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e||!Array.isArray(e)||0===e.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=e.map((function(t){var e=t.id,n=r.find((function(t){return t&&t.id===e}));return n?{id:t.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=t.id,n=r.find((function(t){return t.id===e}));return n?vh({id:n.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}])&&_h(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function Ph(t){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(t)}function Ah(){Ah=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ph(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ph(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Oh(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Th(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Oh(i,n,o,a,s,"next",t)}function s(t){Oh(i,n,o,a,s,"throw",t)}a(void 0)}))}}function kh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dh(n.key),n)}}function Dh(t){var e=function(t,e){if("object"!=Ph(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ph(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ph(e)?e:String(e)}function Ih(){return Ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ih.apply(this,arguments)}function Rh(t,e){return Rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rh(t,e)}function Lh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jh(t){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(t)}function Nh(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Ch(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Gh=new WeakSet,xh=new WeakSet,Bh=new WeakSet,Mh=new WeakSet,Hh=new WeakSet,Fh=new WeakSet,Uh=new WeakSet,Vh=new WeakSet,Wh=new WeakSet,zh=new WeakSet;function Yh(t){tt({type:t,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},"*")}function Zh(t){this._isPlayerAuthorized=t.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=t.playerId,this._playerName=t.playerName,t.playerPhoto&&this._playerPhotos.push(t.playerPhoto),this._defaultStorageType=u.PLATFORM_INTERNAL),this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE)}function Jh(t){var e,r;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,null!==(r=t.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(_.GET_STORAGE_DATA)}function Kh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA):this._rejectPromiseDecorator(_.SET_STORAGE_DATA)}function qh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA)}function Xh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.PURCHASE,t.data):this._rejectPromiseDecorator(_.PURCHASE,t.data)}function Qh(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_CATALOG,t.data):this._rejectPromiseDecorator(_.GET_CATALOG,t.data)}function $h(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_PURCHASES,t.data):this._rejectPromiseDecorator(_.GET_PURCHASES,t.data)}function td(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.CREATE_POST):this._rejectPromiseDecorator(_.CREATE_POST)}function ed(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.JOIN_COMMUNITY):this._rejectPromiseDecorator(_.JOIN_COMMUNITY)}const rd=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rh(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jh(a);if(s){var r=jh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lh(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Nh(Lh(t=c.call.apply(c,[this].concat(r))),zh),Nh(Lh(t),Wh),Nh(Lh(t),Vh),Nh(Lh(t),Uh),Nh(Lh(t),Fh),Nh(Lh(t),Hh),Nh(Lh(t),Mh),Nh(Lh(t),Bh),Nh(Lh(t),xh),Nh(Lh(t),Gh),t}return r=l,n=[{key:"platformId",get:function(){return t.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(window.addEventListener("message",(function(e){if("devvit-message"===e.data.type){var r=e.data.data.message;r.type===_.INITIALIZE?Ch(t,xh,Zh).call(t,r):r.type===_.GET_STORAGE_DATA?Ch(t,Bh,Jh).call(t,r):r.type===_.SET_STORAGE_DATA?Ch(t,Mh,Kh).call(t,r):r.type===_.DELETE_STORAGE_DATA?Ch(t,Hh,qh).call(t,r):r.type===_.GET_CATALOG?Ch(t,Uh,Qh).call(t,r):r.type===_.PURCHASE?Ch(t,Fh,Xh).call(t,r):r.type===_.GET_PURCHASES?Ch(t,Vh,$h).call(t,r):r.type===_.CREATE_POST?Ch(t,Wh,td).call(t,r):r.type===_.JOIN_COMMUNITY&&Ch(t,zh,ed).call(t)}})),e=this._createPromiseDecorator(_.INITIALIZE),Ch(this,Gh,Yh).call(this,_.INITIALIZE)),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ih(jh(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ih(jh(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(_.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.GET_STORAGE_DATA),Ch(this,Gh,Yh).call(this,_.GET_STORAGE_DATA,{key:t})),n.promise}return Ih(jh(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=Th(Ah().mark((function t(e,r,n){var o;return Ah().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return(o=this._getPromiseDecorator(_.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(_.SET_STORAGE_DATA),Ch(this,Gh,Yh).call(this,_.SET_STORAGE_DATA,{key:e,value:r})),t.abrupt("return",o.promise);case 4:return t.abrupt("return",Ih(jh(l.prototype),"setDataToStorage",this).call(this,e,r,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Th(Ah().mark((function t(e,r){var n;return Ah().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=4;break}return(n=this._getPromiseDecorator(_.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),Ch(this,Gh,Yh).call(this,_.DELETE_STORAGE_DATA,{key:e})),t.abrupt("return",n.promise);case 4:return t.abrupt("return",Ih(jh(l.prototype),"deleteDataFromStorage",this).call(this,e,r));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(t){var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),Ch(this,Gh,Yh).call(this,_.PURCHASE,{id:t})),e.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var t=this._getPromiseDecorator(_.GET_CATALOG);return t||(t=this._createPromiseDecorator(_.GET_CATALOG),Ch(this,Gh,Yh).call(this,_.GET_CATALOG)),t.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),Ch(this,Gh,Yh).call(this,_.GET_PURCHASES)),t.promise}},{key:"createPost",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getPromiseDecorator(_.CREATE_POST);return e||(e=this._createPromiseDecorator(_.CREATE_POST),Ch(this,Gh,Yh).call(this,_.CREATE_POST,{options:t})),e.promise}},{key:"joinCommunity",value:function(){var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),Ch(this,Gh,Yh).call(this,_.JOIN_COMMUNITY)),t.promise}}],n&&kh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function nd(t){return nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(t)}function od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,id(n.key),n)}}function id(t){var e=function(t,e){if("object"!=nd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nd(e)?e:String(e)}function ad(){return ad="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ud(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ad.apply(this,arguments)}function sd(t,e){return sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sd(t,e)}function cd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ud(t)}function ld(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fd(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,pd(t,e,"get"))}function pd(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var hd=new WeakSet,dd=new WeakMap;function yd(t){var e=document.createElement("ins");return e.style.display="block",e.classList.add("adsbygoogle"),e.setAttribute("data-ad-client",this._options.adSenseId),e.setAttribute("data-ad-slot",t),e.setAttribute("data-ad-format","auto"),e.setAttribute("data-container-id",c),e.setAttribute("data-full-width-responsive","true"),this._options.testMode&&e.setAttribute("data-adtest","on"),e}const md=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sd(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ud(o);if(c){var r=ud(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cd(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return ld(e=cd(t=u.call.apply(u,[this].concat(o))),r=hd),r.add(e),function(t,e,r){ld(t,e),e.set(t,{writable:!0,value:function(){}})}(cd(t),dd),t}return r=l,(n=[{key:"platformId",get:function(){return t.XIAOMI}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();try{window.funmax&&window.funmax.loadStart&&window.funmax.loadStart()}catch(t){console.error(t)}var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.adSenseId?z({adSenseId:this._options.adSenseId,testMode:!!this._options.testMode}).then((function(e){var r,n;n=e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=t,pd(r,dd,"set"),n),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?new Promise((function(t){try{window.funmax&&window.funmax.loadReady&&window.funmax.loadReady()}catch(t){console.error(t)}t()})):ad(ud(l.prototype),"sendMessage",this).call(this,t)}},{key:"showBanner",value:function(t,e){if(!this._bannerContainer){this._bannerPlacement=e,this._bannerContainer=Y(t);var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,hd,yd).call(this,e);this._bannerContainer.appendChild(r),this._setBannerState(s.SHOWN)}}},{key:"hideBanner",value:function(){var t;null===(t=this._bannerContainer)||void 0===t||t.remove(),this._bannerContainer=null,this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(t){var e=this;fd(this,dd)?fd(this,dd).call(this,{type:"start",name:t,beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(t){var e=this;fd(this,dd)?fd(this,dd).call(this,{type:"reward",name:t,beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}}])&&od(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fo);function vd(t){return vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(t)}function _d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_d(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=bd(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bd(n.key),n)}}function bd(t){var e=function(t,e){if("object"!=vd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vd(e)?e:String(e)}function Ed(t,e){Pd(t,e),e.add(t)}function wd(t,e,r){Pd(t,e),e.set(t,r)}function Pd(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ad(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,kd(t,e,"set"),r),r}function Od(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Td(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,kd(t,e,"get"))}function kd(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Dd=new WeakMap,Id=new WeakMap,Rd=new WeakMap,Ld=new WeakMap,jd=new WeakMap,Nd=new WeakSet,Cd=new WeakSet,Gd=new WeakSet,xd=new WeakSet;function Bd(e){var r,n=t.MOCK,o=new URL(window.location.href);if(e.forciblySetPlatformId)n=Od(this,Cd,Md).call(this,e.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=Od(this,Cd,Md).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=t.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=t.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=t.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=t.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=t.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=t.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=t.PLAYDECK:o.hash.includes("tgWebAppData")?n=t.TELEGRAM:o.hostname.includes("y8")?n=t.Y8:o.hostname.includes("fbsbx")?n=t.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=t.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=t.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=t.BITQUEST:o.hostname.includes("eponesh.")?n=t.GAMEPUSH:o.hostname.includes("discordsays.com")?n=t.DISCORD:o.hostname.includes("usercontent.goog")?n=t.YOUTUBE:o.hostname.includes("portalapp.")?n=t.PORTAL:o.hostname.includes("devvit.")&&(n=t.REDDIT)}var a=e;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=X(a,a.platforms[n])),delete a.platforms,n){case t.VK:Ad(this,Rd,new ri(a));break;case t.YANDEX:Ad(this,Rd,new Pi(a));break;case t.CRAZY_GAMES:Ad(this,Rd,new aa(a));break;case t.ABSOLUTE_GAMES:Ad(this,Rd,new _a(a));break;case t.GAME_DISTRIBUTION:Ad(this,Rd,new Da(a));break;case t.OK:Ad(this,Rd,new Rs(a));break;case t.PLAYGAMA:Ad(this,Rd,new qs(a));break;case t.PLAYDECK:Ad(this,Rd,new pc(a));break;case t.TELEGRAM:Ad(this,Rd,new Dc(a));break;case t.Y8:Ad(this,Rd,new Jc(a));break;case t.LAGGED:Ad(this,Rd,new eu(a));break;case t.FACEBOOK:Ad(this,Rd,new Iu(a));break;case t.POKI:Ad(this,Rd,new Gl(a));break;case t.QA_TOOL:Ad(this,Rd,new Dl(a));break;case t.MSN:Ad(this,Rd,new df(a));break;case t.HUAWEI:Ad(this,Rd,new $f(a));break;case t.BITQUEST:Ad(this,Rd,new dp(a));break;case t.GAMEPUSH:Ad(this,Rd,new Dp(a));break;case t.DISCORD:Ad(this,Rd,new Hp(a));break;case t.YOUTUBE:Ad(this,Rd,new $p(a));break;case t.JIO_GAMES:Ad(this,Rd,new dh(a));break;case t.PORTAL:Ad(this,Rd,new wh(a));break;case t.REDDIT:Ad(this,Rd,new rd(a));break;case t.XIAOMI:Ad(this,Rd,new md(a));break;default:Ad(this,Rd,new Fo(a))}}function Md(e){for(var r=Object.values(t),n=0;n<r.length;n++)if(e===r[n])return e;return t.MOCK}function Hd(t){return Td(this,Dd)||console.error(g.SDK_NOT_INITIALIZED),Td(this,Ld)[t]}function Fd(t){var e,r=Td(this,Rd),n=r.options,o=r.platformId;return(null===(e=n.saas)||void 0===e?void 0:e[t])&&Array.isArray(n.saas[t].platforms)&&n.saas[t].platforms.includes(o)}const Ud=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),Ed(this,xd),Ed(this,Gd),Ed(this,Cd),Ed(this,Nd),wd(this,Dd,{writable:!0,value:!1}),wd(this,Id,{writable:!0,value:null}),wd(this,Rd,{writable:!0,value:null}),wd(this,Ld,{writable:!0,value:{}}),wd(this,jd,{writable:!0,value:"javascript"})}var c,p;return c=r,(p=[{key:"version",get:function(){return"1.28.0-preview.1"}},{key:"isInitialized",get:function(){return Td(this,Dd)}},{key:"options",get:function(){return Td(this,Rd).options}},{key:"platform",get:function(){return Od(this,Gd,Hd).call(this,e.PLATFORM)}},{key:"player",get:function(){return Od(this,Gd,Hd).call(this,e.PLAYER)}},{key:"game",get:function(){return Od(this,Gd,Hd).call(this,e.GAME)}},{key:"storage",get:function(){return Od(this,Gd,Hd).call(this,e.STORAGE)}},{key:"advertisement",get:function(){return Od(this,Gd,Hd).call(this,e.ADVERTISEMENT)}},{key:"social",get:function(){return Od(this,Gd,Hd).call(this,e.SOCIAL)}},{key:"device",get:function(){return Od(this,Gd,Hd).call(this,e.DEVICE)}},{key:"leaderboard",get:function(){return Od(this,Gd,Hd).call(this,e.LEADERBOARDS)}},{key:"leaderboards",get:function(){return Od(this,Gd,Hd).call(this,e.LEADERBOARDS)}},{key:"payments",get:function(){return Od(this,Gd,Hd).call(this,e.PAYMENTS)}},{key:"achievements",get:function(){return Od(this,Gd,Hd).call(this,e.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return Od(this,Gd,Hd).call(this,e.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return Od(this,Gd,Hd).call(this,e.CLIPBOARD)}},{key:"analytics",get:function(){return Od(this,Gd,Hd).call(this,e.ANALYTICS)}},{key:"engine",get:function(){return Td(this,jd)},set:function(t){Ad(this,jd,t)}},{key:"PLATFORM_ID",get:function(){return t}},{key:"PLATFORM_MESSAGE",get:function(){return h}},{key:"MODULE_NAME",get:function(){return e}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"DEVICE_ORIENTATION",get:function(){return f}},{key:"initialize",value:function(t){var r=this;if(Td(this,Dd))return Promise.resolve();if(!Td(this,Id)){Ad(this,Id,new I);var n,o=performance.now(),i="./playgama-bridge-config.json";t&&t.configFilePath&&(i=t.configFilePath),fetch(i).then((function(t){return t.json()})).then((function(t){n=gd({},t)})).catch((function(e){console.error("Config parsing error.",e),n=gd({},t)})).finally((function(){Od(r,Nd,Bd).call(r,n),Td(r,Rd).engine=r.engine,Td(r,Ld)[e.PLATFORM]=new Qt(Td(r,Rd)),Td(r,Ld)[e.PLAYER]=new oe(Td(r,Rd)),Td(r,Ld)[e.GAME]=new he(Td(r,Rd)),Td(r,Ld)[e.STORAGE]=new ge(Td(r,Rd)),Td(r,Ld)[e.ADVERTISEMENT]=new Ir(Td(r,Rd)),Td(r,Ld)[e.SOCIAL]=new Gr(Td(r,Rd)),Td(r,Ld)[e.DEVICE]=new dn(Td(r,Rd)),Td(r,Ld)[e.LEADERBOARDS]=Od(r,xd,Fd).call(r,e.LEADERBOARDS)?new zn(Td(r,Rd)):new wn(Td(r,Rd)),Td(r,Ld)[e.PAYMENTS]=new Xn(Td(r,Rd)),Td(r,Ld)[e.REMOTE_CONFIG]=new no(Td(r,Rd)),Td(r,Ld)[e.CLIPBOARD]=new uo(Td(r,Rd)),Td(r,Ld)[e.ACHIEVEMENTS]=new mo(Td(r,Rd)),Td(r,Ld)[e.ANALYTICS]=Mt.initialize(Td(r,Rd)),Td(r,Rd).initialize().then((function(){var t,n;Ad(r,Dd,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white");var i=((performance.now()-o)/1e3).toFixed(2);if(Mt.send("".concat(e.CORE,"_initialization_completed"),e.CORE,{time_s:i}),Td(r,Id)&&(Td(r,Id).resolve(),Ad(r,Id,null)),null!==(t=Td(r,Rd).options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.preloadOnStart){var a=Td(r,Rd).options.advertisement.interstitial.preloadOnStart;Td(r,Ld)[e.ADVERTISEMENT].preloadInterstitial(a)}if(null!==(n=Td(r,Rd).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var s=Td(r,Rd).options.advertisement.rewarded.preloadOnStart;Td(r,Ld)[e.ADVERTISEMENT].preloadRewarded(s)}})).catch((function(t){var r=((performance.now()-o)/1e3).toFixed(2),n=(null==t?void 0:t.message)||String(t);Mt.send("".concat(e.CORE,"_initialization_failed"),e.CORE,{error:n,time_s:r}),console.error("PlaygamaBridge initialization failed:",t)})).finally((function(){setTimeout((function(){return Td(r,Ld)[e.GAME].setLoadingProgress(100,!0)}),700)}))}))}return Td(this,Id).promise}}])&&Sd(c.prototype,p),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge||window.playgamaBridge||(window.bridge=new Ud,window.playgamaBridge=window.bridge)})()})();
