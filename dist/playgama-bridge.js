(()=>{var t={258:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return a(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,a(r,t).push(n),r;function n(){i.call(r,t,n),e.apply(this,arguments)}},off:i,emit:function(t,e){var r=this,n=a(r,t,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(t){t.call(r)}));else if(2===o)n.forEach((function(t){t.call(r,e)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,i)}))}return!!n.length}};function o(t){for(var e in n)t[e]=n[e];return t}function i(t,e){var n,o=this;if(arguments.length){if(e){if(n=a(o,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return i.call(o,t);o[r][t]=n}}else if((n=o[r])&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(t,e,n){if(!n||t[r]){var o=t[r]||(t[r]={});return o[e]||(o[e]=[])}}o(e.prototype),e.mixin=o}((function t(){if(!(this instanceof t))return new t}))}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",MICROSOFT_STORE:"microsoft_store",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit",XIAOMI:"xiaomi"},e={CORE:"core",PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements",ANALYTICS:"analytics"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed",ORIENTATION_STATE_CHANGED:"orientation_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},l={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},f={PORTRAIT:"portrait",LANDSCAPE:"landscape"},p="bridge-orientation-overlay",h={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},d="not_available",y="in_game",m="native",v="native_popup",_={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},g={SDK_NOT_INITIALIZED:{message:"Before using the SDK you must initialize it"},STORAGE_NOT_SUPPORTED:{message:"Storage not supported"},STORAGE_NOT_AVAILABLE:{message:"Storage not available"},GAME_PARAMS_NOT_FOUND:{message:"Game params are not found"},INVITE_FRIENDS_MESSAGE_LENGTH_ERROR:{message:"Message is too long"}};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E(n.key),n)}}function E(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:String(e)}function w(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function P(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,O(t,e,"set"),r),r}function A(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,O(t,e,"get"))}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var T=new WeakMap,k=new WeakMap,I=new WeakMap;const D=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,T,{writable:!0,value:void 0}),w(this,k,{writable:!0,value:void 0}),w(this,I,{writable:!0,value:void 0}),P(this,T,new Promise((function(t,r){P(e,k,t),P(e,I,r)})))}var e,r;return e=t,(r=[{key:"promise",get:function(){return A(this,T)}},{key:"resolve",value:function(t){A(this,k).call(this,t)}},{key:"reject",value:function(t){A(this,I).call(this,t)}}])&&b(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var R=r(258),L=r.n(R);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function C(t,e,r){return e&&N(t.prototype,e),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:String(e)}const x=C((function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=void 0,(n=G(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=e})),M=JSON.parse('{"i8":"1.28.0-preview.2"}');function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==B(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var V=["post","Message"].join(""),W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var o=document.createElement("script");o.src=t;for(var i=0;i<Object.keys(e).length;i++){var a=Object.keys(e)[i],s=e[a];o.setAttribute(a,s)}o.addEventListener("load",r),o.addEventListener("error",(function(){return n(new Error("Failed to load: ".concat(t)))})),document.head.appendChild(o)}))},z=function(t){var e=t.adSenseId,r=t.channelId,n=t.hostId,o=t.interstitialPlacementId,i=t.rewardedPlacementId,a=t.adFrequencyHint,s=void 0===a?"180s":a,c=t.testMode,u=void 0!==c&&c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(t){var a=document.createElement("script");a.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",a.setAttribute("data-ad-client",e),r?a.setAttribute("data-ad-channel",r):n&&a.setAttribute("data-ad-host",n),o&&a.setAttribute("data-admob-interstitial-slot",o),i&&a.setAttribute("data-admob-rewarded-slot",i),u&&a.setAttribute("data-adbreak-test","on"),a.setAttribute("data-ad-frequency-hint",s),a.setAttribute("crossorigin","anonymous"),a.addEventListener("load",(function(){window.adsbygoogle=window.adsbygoogle||[],window.adsbygoogle.push(U({preloadAdBreaks:"on",sound:"on",onReady:function(){}},l)),t((function(t){return window.adsbygoogle.push(t)}))})),document.head.appendChild(a)}))};function Z(t){var e=document.createElement("div");return e.id=c,e.style.position="absolute",document.body.appendChild(e),"top"===t?(e.style.top="0px",e.style.height="90px",e.style.width="100%"):(e.style.bottom="0px",e.style.height="90px",e.style.width="100%"),e}var Y=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length<=0?Promise.resolve():new Promise((function(t){var r=setInterval((function(){for(var n=window,o=0;o<e.length;o++){var i=n[e[o]];if(!i)return;n=i}t(),clearInterval(r)}),100)}))},J=function(t){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(t)},K=function(t,e){return void 0===t[e]?null:t[e]};function q(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))return t.reduce((function(t,n,o){if(t[o]=K(e,n),r)try{t[o]=JSON.parse(t[o])}catch(t){}return t}),new Array(t.length));var n=K(e,t);if(r&&"string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}function X(t,e){for(var r=U({},t),n=Object.keys(e),o=0;o<n.length;o++){var i=n[o];i in t&&e[i]instanceof Object&&t[i]instanceof Object?r[i]=X(t[i],e[i]):r[i]=e[i]}return r}function Q(t){var e=t.replace(/[^\d.,-]/g,"");return e.includes(".")&&e.includes(",")&&e.indexOf(",")<e.indexOf(".")?parseFloat(e.replace(/,/g,"")):e.includes(".")&&e.includes(",")&&e.indexOf(",")>e.indexOf(".")?parseFloat(e.replace(/\./g,"").replace(",",".")):e.includes(",")&&-1!==e.lastIndexOf(",")&&e.lastIndexOf(",")===e.length-4?parseInt(e.replace(/,/,""),10):e.includes(",")&&-1!==e.lastIndexOf(",")&&e.lastIndexOf(",")!==e.length-3?parseFloat(e.replace(",",".")):e.includes(".")&&-1!==e.lastIndexOf(".")&&e.lastIndexOf(".")===e.length-4?parseInt(e.replace(/\./,""),10):e.includes(".")?parseFloat(e):parseInt(e,10)}function $(){var t=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),e=Date.now().toString(36);return"".concat(t).concat(e)}function tt(){var t,e="bridge_player_guest_id";try{t=localStorage.getItem(e)}catch(t){}if(!t){t=$();try{localStorage.setItem(e,t)}catch(t){}}return{id:t,name:"Guest ".concat(t)}}function et(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent[V](t,e)}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,it(n.key),n)}}function it(t){var e=function(t,e){if("object"!=rt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rt(e)?e:String(e)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}function ut(t,e){ft(t,e),e.add(t)}function lt(t,e,r){ft(t,e),e.set(t,r)}function ft(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,yt(t,e,"get"))}function ht(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function dt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,yt(t,e,"set"),r),r}function yt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var mt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,St=new WeakMap,bt=new WeakMap,Et=new WeakMap,wt=new WeakMap,Pt=new WeakSet,At=new WeakSet,Ot=new WeakSet,Tt=new WeakSet,kt=new WeakSet,It=new WeakSet,Dt=new WeakSet,Rt=new WeakSet;function Lt(){return"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():$()}function jt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{event_name:t,module:e,bridge_version:M.i8,platform_id:this._platformBridge.platformId,game_id:pt(this,gt),player_id:this._platformBridge.playerId,player_guest_id:pt(this,St),session_id:pt(this,bt),timestamp:(new Date).toISOString(),data:r}}function Nt(){var e,r=this;if(0!==pt(this,mt).length){var n=function(t){if(Array.isArray(t))return nt(t)}(e=pt(this,mt))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();dt(this,mt,[]),dt(this,vt,null);var o="https://playgama.com/api/events/v2/bridge/analytics";this._platformBridge.platformId===t.DISCORD&&(o="/playgama/api/events/v2/bridge/analytics"),fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:n})}).then((function(t){if(!t.ok)throw new Error("Network response was not ok: ".concat(t.status));dt(r,Et,0)})).catch((function(){dt(r,Et,pt(r,Et)+1),pt(r,Et)>=2&&ht(r,Tt,Ct).call(r)}))}}function Ct(){dt(this,wt,!0),dt(this,mt,[]),pt(this,vt)&&(clearTimeout(pt(this,vt)),dt(this,vt,null)),pt(this,_t)&&(clearInterval(pt(this,_t)),dt(this,_t,null))}function Gt(){var e,r=this._platformBridge.options;switch(this._platformBridge.platformId){case t.GAME_DISTRIBUTION:case t.Y8:e=r.gameId;break;case t.HUAWEI:e=r.appId;break;case t.MSN:e=r.gameId;break;case t.DISCORD:e=r.appId;break;case t.GAMEPUSH:e=r.projectId;break;default:e=null}return e||(e=ht(this,It,xt).call(this,window.location.href)),e}function xt(e){try{var r=new URL(e).pathname.split("/").filter(Boolean);switch(this._platformBridge.platformId){case t.YANDEX:var n=r.indexOf("app"),o=-1!==n?r[n+1]:null;if(o)return o;break;case t.LAGGED:var i=r.indexOf("g"),a=-1!==i?r[i+1]:null;if(a)return ht(this,Dt,Mt).call(this,a);break;case t.CRAZY_GAMES:var s=r.indexOf("game"),c=-1!==s?r[s+1]:null;if(c)return ht(this,Dt,Mt).call(this,c);break;case t.PLAYGAMA:var u=r.indexOf("game"),l=-1!==u?r[u+1]:null;if(l)return ht(this,Dt,Mt).call(this,l);var f=r[0];if("string"==typeof f&&/^[a-z0-9]{10,}$/i.test(f))return f}}catch(t){return null}return null}function Mt(t){return"string"!=typeof t||0===t.length?"":t.replace(/-/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))}function Bt(){var t=this;pt(this,_t)||dt(this,_t,setInterval((function(){t.send("".concat(e.CORE,"_ping"),e.CORE)}),15e3))}const Ht=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ct(o);if(i){var r=ct(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return st(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),ut(st(t=a.call(this)),Rt),ut(st(t),Dt),ut(st(t),It),ut(st(t),kt),ut(st(t),Tt),ut(st(t),Ot),ut(st(t),At),ut(st(t),Pt),lt(st(t),mt,{writable:!0,value:[]}),lt(st(t),vt,{writable:!0,value:null}),lt(st(t),_t,{writable:!0,value:null}),lt(st(t),gt,{writable:!0,value:null}),lt(st(t),St,{writable:!0,value:null}),lt(st(t),bt,{writable:!0,value:null}),lt(st(t),Et,{writable:!0,value:0}),lt(st(t),wt,{writable:!0,value:!1}),dt(st(t),bt,ht(st(t),Pt,Lt).call(st(t))),t}return r=s,n=[{key:"initialize",value:function(t){var r;this._platformBridge=t,!1===(null===(r=this._platformBridge.options)||void 0===r?void 0:r.sendAnalyticsEvents)&&dt(this,wt,!0);var n=window.location.href;(n.startsWith("file://")||n.includes("localhost")||n.includes("127.0.0.1"))&&dt(this,wt,!0),dt(this,gt,ht(this,kt,Gt).call(this)),dt(this,St,tt().id);var o=ht(this,At,jt).call(this,"".concat(e.CORE,"_initialization_started"),e.CORE);return pt(this,mt).push(o),ht(this,Rt,Bt).call(this),this}},{key:"send",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!pt(this,wt)){var o=ht(this,At,jt).call(this,t,e,n);pt(this,mt).push(o),pt(this,vt)&&clearTimeout(pt(this,vt)),dt(this,vt,setTimeout((function(){ht(r,Ot,Nt).call(r)}),3e3))}}}],n&&ot(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(x));function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vt(n.key),n)}}function Vt(t){var e=function(t,e){if("object"!=Ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ft(e)?e:String(e)}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zt(t){return Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zt(t)}function Yt(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function Jt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Kt(t,e,"get"))}function Kt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var qt=new WeakMap,Xt=new WeakMap,Qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(c,t);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zt(i);if(a){var r=Zt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Yt(zt(e=s.call(this,t)),qt,{writable:!0,value:!1}),Yt(zt(e),Xt,{writable:!0,value:performance.now()}),e._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(t){return e.emit(n.AUDIO_STATE_CHANGED,t)})),e._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(t){return e.emit(n.PAUSE_STATE_CHANGED,t)})),e}return r=c,(o=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(t){var r,n,o={};if(t===h.GAME_READY){if(Jt(this,qt))return Promise.reject();n=!0,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=this,Kt(r,qt,"set"),n),o={time_s:((performance.now()-Jt(this,Xt))/1e3).toFixed(2)};var i=document.getElementById("loading-overlay");i&&i.remove()}return Ht.send("".concat(e.PLATFORM,"_message_").concat(t),e.PLATFORM,o),this._platformBridge.sendMessage(t)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getGameById(e)}return this._platformBridge.getGameById(t)}}])&&Ut(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(x);L().mixin(Qt.prototype);const $t=Qt;function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,re(n.key),n)}}function re(t){var e=function(t,e){if("object"!=te(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:String(e)}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oe(t)}const ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=oe(n);if(o){var r=oe(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.authorize(e)}return this._platformBridge.authorizePlayer(t)}}])&&ee(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pe(n.key),n)}}function ce(t,e){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ce(t,e)}function ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function le(t){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},le(t)}function fe(t,e,r){return(e=pe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pe(t){var e=function(t,e){if("object"!=ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:String(e)}var he=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ce(t,e)}(c,e);var r,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=le(i);if(a){var r=le(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ue(t)}(this,t)});function c(e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),fe(ue(r=s.call(this,e)),"_currentLoadingProgress",null),fe(ue(r),"_loadingProcessCompleted",!1),r._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(t){return r.emit(n.VISIBILITY_STATE_CHANGED,t)})),r._platformBridge.options.disableLoadingLogo||function(t){var e=document.createElement("style");e.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(e);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===t?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),h=document.createElementNS(f.namespaceURI,"mask");h.setAttribute("id","logo-mask");var d=document.createElementNS(f.namespaceURI,"rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width","100%"),d.setAttribute("height","100%"),d.setAttribute("fill","black"),h.appendChild(d),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("fill","white"),h.appendChild(e)})),p.appendChild(h);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(t){var e=t.offset,r=t.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",e),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(t){var e=document.createElementNS(f.namespaceURI,"path");e.setAttribute("d",t),e.setAttribute("stroke",n.strokeColor),e.setAttribute("stroke-width","3"),f.appendChild(e)})),r.appendChild(f)}(r._platformBridge.platformId!==t.YANDEX&&r._platformBridge.options.showFullLoadingLogo),r}return r=c,o=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||e&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=t;var a=Math.max(0,Math.min(100,t)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],o&&se(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(x);L().mixin(he.prototype);const de=he;function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ve(n.key),n)}}function ve(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ye(e)?e:String(e)}function _e(t,e){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_e(t,e)}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}const Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_e(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ge(n);if(o){var r=ge(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageSupported(t)}},{key:"isAvailable",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.isSupported(e)}return this._platformBridge.isStorageAvailable(t)}},{key:"get",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e[this._platformBridge.platformId];if(n)return this.get(t,n,r)}var o=e;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?Array.isArray(t)&&0===t.length?Promise.resolve([]):this._platformBridge.getDataFromStorage(t,o,r):Promise.reject()}},{key:"set",value:function(t,e,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(t,e,n)}var o=r;if(o||(o=this.defaultType),!this._platformBridge.isStorageAvailable(o))return Promise.reject();if(Array.isArray(t)){if(!Array.isArray(e))return Promise.reject(new Error("Value must be an array when key is an array"));if(t.length!==e.length)return Promise.reject(new Error("Key and value arrays must have the same length"));if(0===t.length)return Promise.resolve()}return this._platformBridge.setDataToStorage(t,e,o)}},{key:"delete",value:function(t,e){if(e){var r=e[this._platformBridge.platformId];if(r)return this.delete(t,r)}var n=e;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?Array.isArray(t)&&0===t.length?Promise.resolve():this._platformBridge.deleteDataFromStorage(t,n):Promise.reject()}}],r&&me(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,we(n.key),n)}}function we(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:String(e)}function Pe(t,e){Oe(t,e),e.add(t)}function Ae(t,e,r){Oe(t,e),e.set(t,r)}function Oe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Te(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ke(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,De(t,e,"set"),r),r}function Ie(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,De(t,e,"get"))}function De(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Re="started",Le=new WeakMap,je=new WeakMap,Ne=new WeakMap,Ce=new WeakMap,Ge=new WeakSet,xe=new WeakSet,Me=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,xe),Pe(this,Ge),Ae(this,Le,{writable:!0,value:0}),Ae(this,je,{writable:!0,value:0}),Ae(this,Ne,{writable:!0,value:"created"}),Ae(this,Ce,{writable:!0,value:0}),ke(this,Le,e)}var e,r;return e=t,(r=[{key:"state",get:function(){return Ie(this,Ne)}},{key:"start",value:function(){var t=this;Ie(this,Ne)!==Re&&(ke(this,je,Ie(this,Le)),Te(this,Ge,Be).call(this,Re),ke(this,Ce,setInterval((function(){ke(t,je,Ie(t,je)-1),t.emit("time_left_changed",Ie(t,je)),Ie(t,je)<=0&&(Te(t,xe,He).call(t),Te(t,Ge,Be).call(t,"completed"))}),1e3)))}},{key:"stop",value:function(){Te(this,xe,He).call(this),Ie(this,Ne)===Re&&Te(this,Ge,Be).call(this,"stopped")}}])&&Ee(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Be(t){ke(this,Ne,t),this.emit("state_changed",Ie(this,Ne))}function He(){clearInterval(Ie(this,Ce)),ke(this,je,0)}L().mixin(Me.prototype);const Fe=Me;function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,We(n.key),n)}}function We(t){var e=function(t,e){if("object"!=Ue(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ue(e)?e:String(e)}function ze(t,e){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ze(t,e)}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(t){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ye(t)}function Je(t,e){qe(t,e),e.add(t)}function Ke(t,e,r){qe(t,e),e.set(t,r)}function qe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xe(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,tr(t,e,"set"),r),r}function Qe(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function $e(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,tr(t,e,"get"))}function tr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var er=new WeakMap,rr=new WeakMap,nr=new WeakMap,or=new WeakMap,ir=new WeakMap,ar=new WeakMap,sr=new WeakMap,cr=new WeakMap,ur=new WeakMap,lr=new WeakSet,fr=new WeakSet,pr=new WeakSet,hr=new WeakSet,dr=new WeakSet,yr=new WeakSet,mr=new WeakSet,vr=new WeakSet,_r=new WeakSet,gr=new WeakSet,Sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(l,t);var e,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ye(o);if(c){var r=Ye(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ze(t)}(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),Je(Ze(e=u.call(this,t)),gr),Je(Ze(e),_r),Je(Ze(e),vr),Je(Ze(e),mr),Je(Ze(e),yr),Je(Ze(e),dr),Je(Ze(e),hr),Je(Ze(e),pr),Je(Ze(e),fr),Je(Ze(e),lr),Ke(Ze(e),er,{writable:!0,value:s.HIDDEN}),Ke(Ze(e),rr,{writable:!0,value:null}),Ke(Ze(e),nr,{writable:!0,value:null}),Ke(Ze(e),or,{writable:!0,value:i.CLOSED}),Ke(Ze(e),ir,{writable:!0,value:null}),Ke(Ze(e),ar,{writable:!0,value:void 0}),Ke(Ze(e),sr,{writable:!0,value:60}),Ke(Ze(e),cr,{writable:!0,value:a.CLOSED}),Ke(Ze(e),ur,{writable:!0,value:null}),e._platformBridge.on(n.BANNER_STATE_CHANGED,(function(t){return Qe(Ze(e),mr,Tr).call(Ze(e),t)})),e._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(t){t===i.CLOSED&&Qe(Ze(e),dr,Ar).call(Ze(e)),Qe(Ze(e),vr,kr).call(Ze(e),t)})),e._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(t){return Qe(Ze(e),_r,Ir).call(Ze(e),t)})),Qe(Ze(e),pr,wr).call(Ze(e)),e}return e=l,r=[{key:"isBannerSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return $e(this,er)}},{key:"isInterstitialSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return $e(this,or)}},{key:"isRewardedSupported",get:function(){var t;return!0!==(null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return $e(this,ur)}},{key:"rewardedState",get:function(){return $e(this,cr)}},{key:"minimumDelayBetweenInterstitial",get:function(){return $e(this,sr)}},{key:"setMinimumDelayBetweenInterstitial",value:function(t){if(null===Qe(this,fr,Er).call(this,Qe(this,hr,Pr).call(this))){var e=Qe(this,fr,Er).call(this,t);null!==e&&Qe(this,lr,br).call(this,e)}}},{key:"showBanner",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN){Xe(this,rr,e);var n,o=r;if(o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback),Xe(this,nr,o),Qe(this,mr,Tr).call(this,s.LOADING),this.isBannerSupported){var i=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.placements,a=Qe(this,gr,Dr).call(this,o,i);this._platformBridge.showBanner(e,a)}else Qe(this,mr,Tr).call(this,s.FAILED)}}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,i=Qe(this,gr,Dr).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Qe(this,yr,Or).call(this)){var r,n=e;if(n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback),Xe(this,ir,n),Qe(this,vr,kr).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&$e(this,ar)&&$e(this,ar).state===Re)Qe(this,vr,kr).call(this,i.FAILED);else{var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.interstitial)||void 0===t?void 0:t.placements,a=Qe(this,gr,Dr).call(this,n,o);this._platformBridge.showInterstitial(a)}else Qe(this,vr,kr).call(this,i.FAILED)}}},{key:"preloadRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=e;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,i=Qe(this,gr,Dr).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Qe(this,yr,Or).call(this)){var r;Xe(this,ur,e),$e(this,ur)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&Xe(this,ur,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t||null===(t=t.rewarded)||void 0===t?void 0:t.placements,o=Qe(this,gr,Dr).call(this,$e(this,ur),n);Qe(this,_r,Ir).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):Qe(this,_r,Ir).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&Ve(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(x);function br(t){Xe(this,sr,t),$e(this,ar)&&($e(this,ar).stop(),Qe(this,dr,Ar).call(this))}function Er(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseInt(t,10);return Number.isNaN(e)?null:e}return null}function wr(){var t=Qe(this,hr,Pr).call(this);if(void 0!==t){var e=Qe(this,fr,Er).call(this,t);null!==e&&Qe(this,lr,br).call(this,e)}}function Pr(){var t;return null===(t=this._platformBridge.options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.minimumDelayBetweenInterstitial}function Ar(){$e(this,sr)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(Xe(this,ar,new Fe($e(this,sr))),$e(this,ar).start())}function Or(){var t=[i.LOADING,i.OPENED].includes($e(this,or)),e=[a.LOADING,a.OPENED,a.REWARDED].includes($e(this,cr));return t||e}function Tr(t){$e(this,er)!==t&&(Xe(this,er,t),Ht.send("".concat(e.ADVERTISEMENT,"_banner_").concat(t),e.ADVERTISEMENT,{position:$e(this,rr),placement:$e(this,nr)}),this.emit(n.BANNER_STATE_CHANGED,$e(this,er)))}function kr(t){$e(this,or)!==t&&(Xe(this,or,t),Ht.send("".concat(e.ADVERTISEMENT,"_interstitial_").concat(t),e.ADVERTISEMENT,{placement:$e(this,ir)}),this.emit(n.INTERSTITIAL_STATE_CHANGED,$e(this,or)))}function Ir(t){$e(this,cr)!==t&&(Xe(this,cr,t),Ht.send("".concat(e.ADVERTISEMENT,"_rewarded_").concat(t),e.ADVERTISEMENT,{placement:$e(this,ur)}),this.emit(n.REWARDED_STATE_CHANGED,$e(this,cr)))}function Dr(t,e){if(!t)return t;if(!e)return t;var r=e.find((function(e){return e.id===t}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:t}L().mixin(Sr.prototype);const Rr=Sr;function Lr(t){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function Nr(t){var e=function(t,e){if("object"!=Lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lr(e)?e:String(e)}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}function Gr(t){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gr(t)}const xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gr(n);if(o){var r=Gr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.inviteFriends(e)}return this._platformBridge.inviteFriends(t)}},{key:"joinCommunity",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.joinCommunity(e)}return this._platformBridge.joinCommunity(t)}},{key:"share",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.share(e)}return this._platformBridge.share(t)}},{key:"createPost",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.createPost(e)}return this._platformBridge.createPost(t)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&jr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function Mr(t){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(t)}function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hr(n.key),n)}}function Hr(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mr(e)?e:String(e)}function Fr(t,e){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fr(t,e)}function Ur(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vr(t){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vr(t)}function Wr(t,e){Zr(t,e),e.add(t)}function zr(t,e,r){Zr(t,e),e.set(t,r)}function Zr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yr(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,qr(t,e,"set"),r),r}function Jr(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Kr(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,qr(t,e,"get"))}function qr(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Xr=new WeakMap,Qr=new WeakMap,$r=new WeakMap,tn=new WeakMap,en=new WeakSet,rn=new WeakSet,nn=new WeakSet,on=new WeakSet,an=new WeakSet,sn=new WeakSet,cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fr(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vr(n);if(o){var r=Vr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ur(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Wr(Ur(e=i.call(this,t)),sn),Wr(Ur(e),an),Wr(Ur(e),on),Wr(Ur(e),nn),Wr(Ur(e),rn),Wr(Ur(e),en),zr(Ur(e),Xr,{writable:!0,value:null}),zr(Ur(e),Qr,{writable:!0,value:null}),zr(Ur(e),$r,{writable:!0,value:null}),zr(Ur(e),tn,{writable:!0,value:!1}),Jr(Ur(e),en,un).call(Ur(e)),e}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}},{key:"orientation",get:function(){return Kr(this,Xr)}}])&&Br(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function un(){var t,e,r,n=this,o=this._platformBridge.deviceType;if(o===l.MOBILE||o===l.TABLET){var i=null===(t=this._platformBridge.options)||void 0===t?void 0:t.device;Yr(this,tn,null!==(e=null==i?void 0:i.useBuiltInOrientationPopup)&&void 0!==e&&e),Yr(this,$r,null!==(r=null==i?void 0:i.supportedOrientations)&&void 0!==r?r:[f.PORTRAIT,f.LANDSCAPE]),Yr(this,Xr,Jr(this,rn,ln).call(this)),window.screen.orientation?window.screen.orientation.addEventListener("change",(function(){return Jr(n,nn,fn).call(n)})):window.addEventListener("orientationchange",(function(){return Jr(n,nn,fn).call(n)})),window.addEventListener("resize",(function(){return Jr(n,nn,fn).call(n)})),Jr(this,on,pn).call(this)}}function ln(){var t;return null!==(t=window.screen.orientation)&&void 0!==t&&t.type?window.screen.orientation.type.includes("portrait")?f.PORTRAIT:f.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?f.PORTRAIT:f.LANDSCAPE:window.innerHeight>window.innerWidth?f.PORTRAIT:f.LANDSCAPE}function fn(){var t=Jr(this,rn,ln).call(this);t!==Kr(this,Xr)&&(Yr(this,Xr,t),this.emit(n.ORIENTATION_STATE_CHANGED,Kr(this,Xr)),Jr(this,on,pn).call(this))}function pn(){if(Kr(this,tn))if(1===Kr(this,$r).length){var t=Kr(this,$r)[0];Kr(this,Xr)!==t?Jr(this,an,hn).call(this):Jr(this,sn,dn).call(this)}else Jr(this,sn,dn).call(this)}function hn(){Kr(this,Qr)||(Yr(this,Qr,function(){if(!document.getElementById("bridge-orientation-overlay-styles")){var t=document.createElement("style");t.id="bridge-orientation-overlay-styles",t.textContent="\n            #".concat(p," {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.95);\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                z-index: 9999999;\n            }\n\n            #bridge-orientation-icon {\n                width: 80px;\n                height: 80px;\n                animation: bridge-rotate-phone 1.5s ease-in-out infinite;\n            }\n\n            #bridge-orientation-message {\n                color: #fff;\n                font-size: 18px;\n                font-family: Arial, sans-serif;\n                margin-top: 20px;\n                text-align: center;\n            }\n\n            @keyframes bridge-rotate-phone {\n                0%, 100% { transform: rotate(0deg); }\n                50% { transform: rotate(90deg); }\n            }\n        "),document.head.appendChild(t)}var e=document.createElement("div");e.id=p;var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","bridge-orientation-icon"),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.innerHTML='\n        <rect x="5" y="2" width="14" height="20" rx="2" stroke="white" stroke-width="2"/>\n        <line x1="12" y1="18" x2="12" y2="18" stroke="white" stroke-width="2" stroke-linecap="round"/>\n    ';var n=document.createElement("div");return n.id="bridge-orientation-message",n.innerText="Please rotate your device",e.appendChild(r),e.appendChild(n),e}()),document.body.appendChild(Kr(this,Qr)))}function dn(){Kr(this,Qr)&&(Kr(this,Qr).remove(),Yr(this,Qr,null))}L().mixin(cn.prototype);const yn=cn;function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_n(n.key),n)}}function _n(t){var e=function(t,e){if("object"!=mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mn(e)?e:String(e)}function gn(t,e){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gn(t,e)}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}var En=new WeakSet;function wn(t){var e,r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return!1;var n=r.find((function(e){return e.id===t}));return!!n&&!0===n.isMain}const Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gn(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bn(n);if(o){var r=bn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}(this,t)});function a(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Sn(t=i.call.apply(i,[this].concat(o))),r=En),r.add(e),t}return e=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(t,e){var r=this._getPlatformLeaderboardId(t),n=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,En,wn).call(this,t);return this._platformBridge.leaderboardsSetScore(r,e,n)}},{key:"getEntries",value:function(t){var e=this._getPlatformLeaderboardId(t);return this._platformBridge.leaderboardsGetEntries(e)}},{key:"showNativePopup",value:function(t){var e=this._getPlatformLeaderboardId(t);return this._platformBridge.leaderboardsShowNativePopup(e)}},{key:"_getPlatformLeaderboardId",value:function(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:t}}])&&vn(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function On(){On=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==An(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(An(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ln(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function In(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Dn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){In(i,n,o,a,s,"next",t)}function s(t){In(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ln(n.key),n)}}function Ln(t){var e=function(t,e){if("object"!=An(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==An(e)?e:String(e)}function jn(t,e){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jn(t,e)}function Nn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cn(t){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cn(t)}function Gn(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function xn(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Mn(t){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(t)}function Bn(){Bn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Mn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Mn(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Hn(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Fn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hn(i,n,o,a,s,"next",t)}function s(t){Hn(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vn(n.key),n)}}function Vn(t){var e=function(t,e){if("object"!=Mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mn(e)?e:String(e)}function Wn(t,e){return Wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wn(t,e)}function zn(t){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zn(t)}const Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wn(t,e)}(c,t);var e,r,n,o,i,a,s=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zn(i);if(a){var r=zn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=c,r=[{key:"type",get:function(){return y}},{key:"setScore",value:(o=Fn(Bn().mark((function t(e,r){var n;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._getSaasPlatformLeaderboardId(e),t.abrupt("return",this.request.post("leaderboards/".concat(n,"/entries"),{score:r}));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"getEntries",value:(n=Fn(Bn().mark((function t(e){var r;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._getSaasPlatformLeaderboardId(e),t.abrupt("return",this.request.get("leaderboards/".concat(r,"/entries")));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getSaasPlatformLeaderboardId",value:function(t){var e;if(!t)return t;var r=null===(e=this._platformBridge.options)||void 0===e?void 0:e.leaderboards;if(!r)return t;var n=r.find((function(e){return e.id===t}));return n&&n.saas||t}}],r&&Un(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(function(t){var e,r;return e=new WeakSet,r=new WeakSet,function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e)}(l,t);var o,a,s,c,u=(s=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Cn(s);if(c){var r=Cn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===An(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nn(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Gn(Nn(t=u.call.apply(u,[this].concat(o))),r),Gn(Nn(t),e),t}return o=l,(a=[{key:"baseUrl",get:function(){return this._platformBridge.options.saas.baseUrl||"https://playgama.com/api/bridge/v1"}},{key:"xHeaders",get:function(){return{"x-player-id":this._platformBridge.playerId||"","x-platform-id":this._platformBridge.platformId}}},{key:"request",get:function(){return{get:xn(this,e,n).bind(this),post:xn(this,r,i).bind(this)}}}])&&Rn(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),l}(t);function n(t){return o.apply(this,arguments)}function o(){return(o=Dn(On().mark((function t(e){return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(e),{method:"GET",credentials:"include",headers:kn({"Content-Type":"application/json"},this.xHeaders)}).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function i(t,e){return a.apply(this,arguments)}function a(){return(a=Dn(On().mark((function t(e,r){return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",body:JSON.stringify(r),credentials:"include",headers:kn({"Content-Type":"application/json"},this.xHeaders)}).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}}(Pn));function Yn(t){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function Jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kn(n.key),n)}}function Kn(t){var e=function(t,e){if("object"!=Yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yn(e)?e:String(e)}function qn(t,e){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qn(t,e)}function Xn(t){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xn(t)}const Qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qn(t,e)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xn(o);if(i){var r=Xn(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return r=s,(n=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(t,r){return Ht.send("".concat(e.PAYMENTS,"_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsPurchase(t,r).then((function(r){return Ht.send("".concat(e.PAYMENTS,"_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Ht.send("".concat(e.PAYMENTS,"_purchase_failed"),e.PAYMENTS,{id:t}),r}))}},{key:"getPurchases",value:function(){return Ht.send("".concat(e.PAYMENTS,"_get_purchases_started"),e.PAYMENTS),this._platformBridge.paymentsGetPurchases().then((function(t){return Ht.send("".concat(e.PAYMENTS,"_get_purchases_completed"),e.PAYMENTS),t})).catch((function(t){throw Ht.send("".concat(e.PAYMENTS,"_get_purchases_failed"),e.PAYMENTS),t}))}},{key:"getCatalog",value:function(){return Ht.send("".concat(e.PAYMENTS,"_get_catalog_started"),e.PAYMENTS),this._platformBridge.paymentsGetCatalog().then((function(t){return Ht.send("".concat(e.PAYMENTS,"_get_catalog_completed"),e.PAYMENTS),t})).catch((function(t){throw Ht.send("".concat(e.PAYMENTS,"_get_catalog_failed"),e.PAYMENTS),t}))}},{key:"consumePurchase",value:function(t){return Ht.send("".concat(e.PAYMENTS,"_consume_purchase_started"),e.PAYMENTS,{id:t}),this._platformBridge.paymentsConsumePurchase(t).then((function(r){return Ht.send("".concat(e.PAYMENTS,"_consume_purchase_completed"),e.PAYMENTS,{id:t}),r})).catch((function(r){throw Ht.send("".concat(e.PAYMENTS,"_consume_purchase_failed"),e.PAYMENTS,{id:t}),r}))}}])&&Jn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(x);function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eo(n.key),n)}}function eo(t){var e=function(t,e){if("object"!=$n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$n(e)?e:String(e)}function ro(t,e){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ro(t,e)}function no(t){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},no(t)}const oo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=no(n);if(o){var r=no(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.get(e)}return this._platformBridge.getRemoteConfig(t)}}])&&to(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function io(t){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(t)}function ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,so(n.key),n)}}function so(t){var e=function(t,e){if("object"!=io(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==io(e)?e:String(e)}function co(t,e){return co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},co(t,e)}function uo(t){return uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uo(t)}const lo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&co(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=uo(n);if(o){var r=uo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(t){return this._platformBridge.clipboardWrite(t)}}])&&ao(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function fo(t){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(t)}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ho(n.key),n)}}function ho(t){var e=function(t,e){if("object"!=fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fo(e)?e:String(e)}function yo(t,e){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yo(t,e)}function mo(t){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mo(t)}const vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mo(n);if(o){var r=mo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.unlock(e)}return this._platformBridge.unlockAchievement(t)}},{key:"getList",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.getList(e)}return this._platformBridge.getAchievementsList(t)}},{key:"showNativePopup",value:function(t){if(t){var e=t[this._platformBridge.platformId];if(e)return this.showNativePopup(e)}return this._platformBridge.showAchievementsNativePopup(t)}}])&&po(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(x);function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function go(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,So(n.key),n)}}function So(t){var e=function(t,e){if("object"!=_o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_o(e)?e:String(e)}function bo(t,e,r){Eo(t,e),e.set(t,r)}function Eo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Po(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Oo(t,e,"get"))}function Ao(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Oo(t,e,"set"),r),r}function Oo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var To=new WeakMap,ko=new WeakMap,Io=new WeakMap,Do=new WeakSet;function Ro(){var t=Object.values(Po(this,To)).some((function(t){return!0===t}));Po(this,ko)!==t&&(Ao(this,ko,t),Po(this,Io).call(this,Po(this,ko)))}const Lo=function(){function t(e,r){var n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Eo(this,n=Do),n.add(this),bo(this,To,{writable:!0,value:{}}),bo(this,ko,{writable:!0,value:!1}),bo(this,Io,{writable:!0,value:null}),Ao(this,Io,r),e.forEach((function(t){Po(o,To)[t]=!1}))}var e,r;return e=t,(r=[{key:"setState",value:function(t,e){t in Po(this,To)&&"boolean"==typeof e&&Po(this,To)[t]!==e&&(Po(this,To)[t]=e,wo(this,Do,Ro).call(this))}},{key:"getState",value:function(t){return t in Po(this,To)&&Po(this,To)[t]}},{key:"getAggregatedState",value:function(){return Po(this,ko)}},{key:"resetAll",value:function(){var t=this;Object.keys(Po(this,To)).forEach((function(e){Po(t,To)[e]=!1})),wo(this,Do,Ro).call(this)}}])&&go(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jo(t){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jo(t)}function No(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Co(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?No(Object(r),!0).forEach((function(e){xo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):No(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Go(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mo(n.key),n)}}function xo(t,e,r){return(e=Mo(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mo(t){var e=function(t,e){if("object"!=jo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jo(e)?e:String(e)}function Bo(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}var Ho=new WeakMap,Fo=function(){function e(t){var r,i,a,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xo(this,"_isInitialized",!1),xo(this,"_platformSdk",null),xo(this,"_isPlayerAuthorized",!1),xo(this,"_playerId",null),xo(this,"_playerName",null),xo(this,"_playerPhotos",[]),xo(this,"_playerExtra",{}),xo(this,"_visibilityState",null),xo(this,"_localStorage",null),xo(this,"_defaultStorageType",u.LOCAL_STORAGE),xo(this,"_platformStorageCachedData",null),xo(this,"_isBannerSupported",!1),xo(this,"_paymentsPurchases",[]),xo(this,"_pauseStateAggregator",null),xo(this,"_audioStateAggregator",null),a={writable:!0,value:{}},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=Ho),i.set(r,a);try{this._localStorage=window.localStorage}catch(t){}this._visibilityState=document.visibilityState;var c=["interstitial","rewarded","visibility","platform"];this._pauseStateAggregator=new Lo(c,(function(t){return s.emit(n.PAUSE_STATE_CHANGED,t)})),this._audioStateAggregator=new Lo(c,(function(t){return s.emit(n.AUDIO_STATE_CHANGED,!t)})),document.addEventListener("visibilitychange",(function(){s._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){s._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){s._setVisibilityState(o.VISIBLE)})),t&&(this._options=Co({},t))}var r,c;return r=e,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return t.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var t=navigator.language;return"string"==typeof t?t.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!this._audioStateAggregator||!this._audioStateAggregator.getAggregatedState()}},{key:"isPlatformPaused",get:function(){return!!this._pauseStateAggregator&&this._pauseStateAggregator.getAggregatedState()}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var t=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(t))return l.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(t))return l.TABLET}return l.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return d}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(t,e){fetch("https://playgama.com/api/v1/timestamp/now").then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(e){t(1e3*e.timestamp)})).catch((function(){e()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(t){switch(t){case u.LOCAL_STORAGE:return null!==this._localStorage;case u.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(this._getDataFromLocalStorage(t[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(t,r);return Promise.resolve(i)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,e,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var n=0;n<t.length;n++)this._setDataToLocalStorage(t[n],e[n]);return Promise.resolve()}return this._setDataToLocalStorage(t,e),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(t)){for(var r=0;r<t.length;r++)this._deleteDataFromLocalStorage(t[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(t),Promise.resolve()}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}return Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var t=document.createElement("div");t.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",t.style.position="absolute",t.style.left="-9999px",t.style.width="1px",t.style.height="1px",document.body.appendChild(t);var e={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",e).then((function(e){e.redirected?r(e.redirected):window.setTimeout((function(){var e,n=0===t.offsetHeight||"none"===(null===(e=window.getComputedStyle(t))||void 0===e?void 0:e.display);r(n),t.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(t){if(this.isPaymentsSupported){var e={id:t};return this._paymentsPurchases.push(e),Promise.resolve(e)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(t){if(this.isPaymentsSupported){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));return e<0?Promise.reject():(this._paymentsPurchases.splice(e,1),Promise.resolve({id:t}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(t){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(t):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(t,e){var r=this._localStorage.getItem(t);if(e&&"string"==typeof r)try{r=JSON.parse(r)}catch(t){}return r}},{key:"_setDataToLocalStorage",value:function(t,e){this._localStorage.setItem(t,"object"===jo(e)?JSON.stringify(e):e)}},{key:"_deleteDataFromLocalStorage",value:function(t){this._localStorage.removeItem(t)}},{key:"_setVisibilityState",value:function(t){if(this._visibilityState!==t){this._visibilityState=t,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState);var e=t===o.HIDDEN;this._pauseStateAggregator&&this._pauseStateAggregator.setState("visibility",e),this._audioStateAggregator&&this._audioStateAggregator.setState("visibility",e)}}},{key:"_setBannerState",value:function(t){this.emit(n.BANNER_STATE_CHANGED,t)}},{key:"_setInterstitialState",value:function(t){this.emit(n.INTERSTITIAL_STATE_CHANGED,t);var e=t===i.OPENED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("interstitial",e),this._audioStateAggregator&&this._audioStateAggregator.setState("interstitial",e)}},{key:"_setRewardedState",value:function(t){this.emit(n.REWARDED_STATE_CHANGED,t);var e=t===a.OPENED||t===a.REWARDED;this._pauseStateAggregator&&this._pauseStateAggregator.setState("rewarded",e),this._audioStateAggregator&&this._audioStateAggregator.setState("rewarded",e)}},{key:"_setAudioState",value:function(t){this._audioStateAggregator?this._audioStateAggregator.setState("platform",!t):this.emit(n.AUDIO_STATE_CHANGED,t)}},{key:"_setPauseState",value:function(t){this._pauseStateAggregator?this._pauseStateAggregator.setState("platform",t):this.emit(n.PAUSE_STATE_CHANGED,t)}},{key:"_createPromiseDecorator",value:function(t){var e=new D;return Bo(this,Ho)[t]=e,e}},{key:"_getPromiseDecorator",value:function(t){return Bo(this,Ho)[t]}},{key:"_resolvePromiseDecorator",value:function(t,e){Bo(this,Ho)[t]&&(Bo(this,Ho)[t].resolve(e),delete Bo(this,Ho)[t])}},{key:"_rejectPromiseDecorator",value:function(t,e){Bo(this,Ho)[t]&&(Bo(this,Ho)[t].reject(e),delete Bo(this,Ho)[t])}},{key:"_paymentsGetProductsPlatformData",value:function(){var t=this;return this._options.payments?this._options.payments.map((function(e){var r=Co({},e[t.platformId]);return r.platformProductId=r.id,r.id=e.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));if(!r)return null;var n=Co({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(t){return"".concat(t,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(t){var e,r=this;return(null===(e=this._options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.useBuiltInErrorPopup)?function(t){if(!document.getElementById("bridge-info-popup-styles")){var e=document.createElement("style");e.id="bridge-info-popup-styles",e.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(e)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(t){o.onclick=function(){n.style.display="none",r.style.display="none",t()},r.style.display="block",n.style.display="flex"}))}().then((function(){t?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(t?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var t=tt();this._playerId=t.id,this._playerName=t.name}}])&&Go(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),e}();L().mixin(Fo.prototype);const Uo=Fo;function Vo(t){return Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vo(t)}function Wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qo(n.key),n)}}function zo(){return zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zo.apply(this,arguments)}function Zo(t,e){return Zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zo(t,e)}function Yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jo(t){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jo(t)}function Ko(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qo(t){var e=function(t,e){if("object"!=Vo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vo(e)?e:String(e)}function Xo(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Qo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,$o(t,e,"get"))}function $o(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ti=new WeakMap,ei=new WeakSet;function ri(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(t);return i||(i=this._createPromiseDecorator(t),this._platformSdk.send(e,n).then((function(e){e[o]?r._resolvePromiseDecorator(t):r._rejectPromiseDecorator(t)})).catch((function(e){r._rejectPromiseDecorator(t,e)}))),i.promise}const ni=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zo(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jo(o);if(c){var r=Jo(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yo(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Ko(e=Yo(t=f.call.apply(f,[this].concat(o))),r=ei),r.add(e),function(t,e,r){(e=qo(e))in t?Object.defineProperty(t,e,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[e]=true}(Yo(t),"_isBannerSupported"),function(t,e,r){Ko(t,e),e.set(t,{writable:!0,value:void 0})}(Yo(t),ti),t}return r=p,(n=[{key:"platformId",get:function(){return t.VK}},{key:"platformLanguage",get:function(){var t=new URL(window.location.href);if(t.searchParams.has("language")){var e=t.searchParams.get("language"),r=0;try{r=parseInt(e,10)}catch(t){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return zo(Jo(p.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var t=new URL(window.location.href);return t.searchParams.has("hash")?t.searchParams.get("hash"):zo(Jo(p.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(Qo(this,ti)){case"html5_ios":case"html5_android":case"html5_mobile":return l.MOBILE;case"web":return l.DESKTOP;default:return zo(Jo(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Qo(this,ti)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r,n,o=this._getPromiseDecorator(_.INITIALIZE);if(!o){o=this._createPromiseDecorator(_.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(e=this,r=ti,n=i.searchParams.get("platform"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,$o(e,r,"set"),n)),W("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Y("vkBridge").then((function(){t._platformSdk=window.vkBridge,t._platformSdk.send("VKWebAppInit").then((function(){t._platformSdk.send("VKWebAppGetUserInfo").then((function(e){e&&(t._playerId=e.id,t._playerName="".concat(e.first_name," ").concat(e.last_name),e.photo_100&&t._playerPhotos.push(e.photo_100),e.photo_200&&t._playerPhotos.push(e.photo_200),e.photo_max_orig&&t._playerPhotos.push(e.photo_max_orig))})).finally((function(){t._isInitialized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||zo(Jo(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||zo(Jo(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(t)){var o=[];return i.forEach((function(t){var e=n.keys.findIndex((function(e){return e.key===t}));if(e<0)o.push(null);else if(""!==n.keys[e].value){var i=n.keys[e].value;if(r)try{i=JSON.parse(n.keys[e].value)}catch(t){}o.push(i)}else o.push(null)})),void e(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(t){}e(a)}else e(null)})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?o(t.error_data.error_reason):o()}))})):zo(Jo(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a={key:t[i],value:e[i]};"string"!=typeof e[i]&&(a.value=JSON.stringify(e[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:t,value:e};return"string"!=typeof e&&(s.value=JSON.stringify(e)),new Promise((function(t,e){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){t()})).catch((function(t){t&&t.error_data&&t.error_data.error_reason?e(t.error_data.error_reason):e()}))}))}return zo(Jo(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.setDataToStorage(t[n],"",e));return Promise.all(r)}return this.setDataToStorage(t,"",e)}return zo(Jo(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:t}).then((function(t){t.result?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(e){e.result&&t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(e){e.result&&t._setInterstitialState(i.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(e){t._setInterstitialState(e.result?i.CLOSED:i.FAILED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result&&t._setRewardedState(a.OPENED)})).finally((function(){t._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(e){e.result?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return Xo(this,ei,ri).call(this,_.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(t){if(!t||!t.groupId)return Promise.reject();var e=t.groupId;return"string"==typeof e&&(e=parseInt(e,10),Number.isNaN(e))?Promise.reject():Xo(this,ei,ri).call(this,_.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:e}).then((function(){window.open("https://vk.com/public".concat(e))}))}},{key:"share",value:function(t){var e={};return t&&t.link&&(e.link=t.link),Xo(this,ei,ri).call(this,_.SHARE,"VKWebAppShare",e,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?Xo(this,ei,ri).call(this,_.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return Xo(this,ei,ri).call(this,_.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(t){return Xo(this,ei,ri).call(this,_.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:t})}}])&&Wo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Uo);function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function ii(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ai(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ii(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ci(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ci(n.key),n)}}function ci(t){var e=function(t,e){if("object"!=oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oi(e)?e:String(e)}function ui(){return ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ui.apply(this,arguments)}function li(t,e){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},li(t,e)}function fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pi(t){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pi(t)}function hi(t,e,r){di(t,e),e.set(t,r)}function di(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yi(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function mi(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,_i(t,e,"set"),r),r}function vi(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,_i(t,e,"get"))}function _i(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var gi=new WeakMap,Si=new WeakMap,bi=new WeakMap,Ei=new WeakMap,wi=new WeakSet;function Pi(){var t=this;return new Promise((function(e){var r=!1;t._options&&t._options.useSignedData&&(r=t._options.useSignedData),t._platformSdk.getPlayer({signed:r}).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized=e.isAuthorized(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var n=e.getName();""!==n&&(t._playerName=n),t._playerPhotos=[];var o=e.getPhoto("small"),i=e.getPhoto("medium"),a=e.getPhoto("large");return o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),a&&t._playerPhotos.push(a),t._playerExtra={payingStatus:e.getPayingStatus()},r&&(t._playerExtra.signature=e.signature),mi(t,Si,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){e()}))}))}const Ai=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&li(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pi(o);if(c){var r=pi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===oi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fi(t)}(this,t)});function p(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return di(e=fi(t=f.call.apply(f,[this].concat(o))),r=wi),r.add(e),hi(fi(t),gi,{writable:!0,value:!1}),hi(fi(t),Si,{writable:!0,value:null}),hi(fi(t),bi,{writable:!0,value:null}),hi(fi(t),Ei,{writable:!0,value:null}),t}return r=p,(n=[{key:"platformId",get:function(){return t.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():ui(pi(p.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():ui(pi(p.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case l.DESKTOP:return l.DESKTOP;case l.MOBILE:return l.MOBILE;case l.TABLET:return l.TABLET;case l.TV:return l.TV;default:return ui(pi(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return vi(this,gi)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("/sdk.js").then((function(){Y("YaGames","init").then((function(){window.YaGames.init().then((function(e){var r;t._platformSdk=e,mi(t,Ei,yi(t,wi,Pi).call(t));var n=null===(r=t._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.28.0-preview.2"}),o=t._platformSdk.shortcut.canShowPrompt().then((function(e){mi(t,gi,e.canShow)})),i=new Promise((function(t){setTimeout(t,1e3)})),a=Promise.race([o,i]),c=t._platformSdk.getPayments().then((function(e){mi(t,bi,e)}));t._isBannerSupported=!0;var u=t._platformSdk.adv.getBannerAdvStatus().then((function(e){e.stickyAdvIsShowing&&t._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:var e;return null===(e=this._platformSdk.features.LoadingAPI)||void 0===e||e.ready(),Promise.resolve();case h.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case h.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return ui(pi(p.prototype),"sendMessage",this).call(this,t)}}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var t=this;return new Promise((function(e,r){t._platformSdk.features.GamesAPI.getAllGames().then((function(t){var r=t.games;e(r)})).catch(r)}))}},{key:"getGameById",value:function(t){var e=this;return null!=t&&t.gameId?new Promise((function(r,n){e._platformSdk.features.GamesAPI.getGameByID(null==t?void 0:t.gameId).then((function(t){var e=t.game,n=t.isAvailable;r(ai(ai({},e),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var t=this,e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(mi(this,Ei,yi(this,wi,Pi).call(this)),vi(this,Ei).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){mi(t,Ei,yi(t,wi,Pi).call(t)),vi(t,Ei).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ui(pi(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ui(pi(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?vi(this,Ei).then((function(){return new Promise((function(e){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var i=void 0===n._platformStorageCachedData[t[o]]?null:n._platformStorageCachedData[t[o]];r.push(i)}e(r)}else e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}))})):Promise.reject():ui(pi(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?vi(this,Ei).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?ai({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;vi(n,Si).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))}))})):Promise.reject():ui(pi(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?vi(this,Ei).then((function(){return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?ai({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];vi(r,Si).setData(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}))})):Promise.reject():ui(pi(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(){var t=this;this._platformSdk.adv.showBannerAdv().then((function(e){e.stickyAdvIsShowing?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.adv.hideBannerAdv().then((function(e){e.stickyAdvIsShowing||t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){t._setInterstitialState(i.OPENED)},onClose:function(e){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)},onError:function(t){console.error(t)}}})}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){t._setRewardedState(a.OPENED)},onRewarded:function(){t._setRewardedState(a.REWARDED)},onClose:function(){t._setRewardedState(a.CLOSED)},onError:function(){t._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(t){t(!1)}))}},{key:"addToHomeScreen",value:function(){var t=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var e=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(e){"accepted"!==e.outcome?t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN):t._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN)})).catch((function(e){t._rejectPromiseDecorator(_.ADD_TO_HOME_SCREEN,e)}))),e.promise}},{key:"rate",value:function(){var t=this,e=this._getPromiseDecorator(_.RATE);return e||(e=this._createPromiseDecorator(_.RATE),this._platformSdk.feedback.canReview().then((function(e){e.value?t._platformSdk.feedback.requestReview().then((function(e){e.feedbackSent?t._resolvePromiseDecorator(_.RATE):t._rejectPromiseDecorator(_.RATE)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)})):t._rejectPromiseDecorator(_.RATE,e.reason)})).catch((function(e){t._rejectPromiseDecorator(_.RATE,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(t,e).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(t,n).then((function(t){var r;r=t&&t.entries.length>0?t.entries.map((function(t){return{id:t.player.uniqueID,name:t.player.publicName,score:t.score,rank:t.rank,photo:t.player.getAvatarSrc("large")}})):[],e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this;if(!vi(this,bi))return Promise.reject();var r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),vi(this,bi).purchase(r).then((function(r){var n=ai({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this;if(!vi(this,bi))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),vi(this,bi).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!vi(this,bi))return Promise.reject();var e=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),vi(this,bi).getCatalog().then((function(r){var n=e.map((function(t){var e,n=r.find((function(e){return e.id===t.id}));return{id:t.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(e=n.getPriceCurrencyImage)||void 0===e?void 0:e.call(n,"medium")}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!vi(this,bi))return Promise.reject();var e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),vi(this,bi).getPurchases().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=ai({id:r.find((function(e){return e.id===t.productID})).id},t.purchaseData);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"getRemoteConfig",value:function(t){var e=this;if(!this._platformSdk)return Promise.reject();var r=t;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(t){e._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,t)})).catch((function(t){e._rejectPromiseDecorator(_.GET_REMOTE_CONFIG,t)}))),n.promise}},{key:"clipboardWrite",value:function(t){var e=this,r=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(_.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(t).then((function(){e._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)})).catch((function(t){e._rejectPromiseDecorator(_.CLIPBOARD_WRITE,t)}))),r.promise}}])&&si(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Uo);function Oi(t){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(t)}function Ti(){Ti=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Oi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Oi(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ki(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ji(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ki(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Di(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Ri(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Di(i,n,o,a,s,"next",t)}function s(t){Di(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ji(n.key),n)}}function ji(t){var e=function(t,e){if("object"!=Oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oi(e)?e:String(e)}function Ni(){return Ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ni.apply(this,arguments)}function Ci(t,e){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ci(t,e)}function Gi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(t)}function Mi(t,e){Hi(t,e),e.add(t)}function Bi(t,e,r){Hi(t,e),e.set(t,r)}function Hi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fi(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Ui(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Wi(t,e,"set"),r),r}function Vi(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Wi(t,e,"get"))}function Wi(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var zi="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",Zi="https://store.xsolla.com/api/v2/project",Yi=new WeakMap,Ji=new WeakMap,Ki=new WeakMap,qi=new WeakSet,Xi=new WeakSet,Qi=new WeakSet,$i=new WeakSet;function ta(){var t=this;return Vi(this,Ji)?new Promise((function(e,r){t._platformSdk.user.getUser().then((function(n){if(!n)return t._playerApplyGuestData(),void r();t._isPlayerAuthorized=!0,n.username&&(t._playerName=n.username),n.profilePictureUrl&&(t._playerPhotos=[n.profilePictureUrl]),t._playerExtra=n,t._options.useUserToken?t._platformSdk.user.getUserToken().then((function(e){t._playerExtra.jwt=e})).finally((function(){e()})):e()})).catch((function(e){t._playerApplyGuestData(),r(e)}))})):(this._playerApplyGuestData(),Promise.reject())}function ea(){return ra.apply(this,arguments)}function ra(){return(ra=Ri(Ti().mark((function t(){return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.XPayStationWidget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,W(zi);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function na(){return oa.apply(this,arguments)}function oa(){return(oa=Ri(Ti().mark((function t(){var e;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._platformSdk.user.getXsollaUserToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ia(t,e,r){return aa.apply(this,arguments)}function aa(){return(aa=Ri(Ti().mark((function t(e,r,n){var o;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Zi,"/").concat(e,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=t.sent).ok){t.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return t.abrupt("return",o.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const sa=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ci(t,e)}(d,e);var r,n,o,f,p=(o=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xi(o);if(f){var r=xi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Oi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gi(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Mi(Gi(t=p.call.apply(p,[this].concat(r))),$i),Mi(Gi(t),Qi),Mi(Gi(t),Xi),Mi(Gi(t),qi),Bi(Gi(t),Yi,{writable:!0,value:!1}),Bi(Gi(t),Ji,{writable:!0,value:!1}),Bi(Gi(t),Ki,{writable:!0,value:{adStarted:function(){Vi(Gi(t),Yi)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED)},adFinished:function(){Vi(Gi(t),Yi)?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setInterstitialState(i.CLOSED)},adError:function(){Vi(Gi(t),Yi)?t._setRewardedState(a.FAILED):t._setInterstitialState(i.FAILED)}}}),t}return r=d,n=[{key:"platformId",get:function(){return t.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Vi(this,Ji)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Ni(xi(d.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return Vi(this,Ji)}},{key:"isPaymentsSupported",get:function(){return!0===Vi(this,Ji)}},{key:"deviceType",get:function(){if(Vi(this,Ji)){var t=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([l.DESKTOP,l.MOBILE,l.TABLET].includes(t))return t}return Ni(xi(d.prototype),"deviceType",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Y("CrazyGames","SDK","init").then((function(){t._platformSdk=window.CrazyGames.SDK,t._defaultStorageType=u.PLATFORM_INTERNAL,t._isBannerSupported=!0,t._platformSdk.init().then((function(){Ui(t,Ji,t._platformSdk.user.isUserAccountAvailable);var e=Fi(t,qi,ta).call(t);t.options.xsollaProjectId&&Fi(t,Xi,ea).call(t),Promise.all([e]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(!Vi(this,Ji))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Fi(t,qi,ta).call(t).then((function(){t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e)}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case h.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case h.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Ni(xi(d.prototype),"sendMessage",this).call(this,t)}}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Ni(xi(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Ni(xi(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){if(Array.isArray(t)){var o=[];return t.forEach((function(t){var e=n._platformSdk.data.getItem(t);if(r)try{e=JSON.parse(e)}catch(t){}o.push(e)})),void e(o)}var i=n._platformSdk.data.getItem(t);if(r)try{i=JSON.parse(i)}catch(t){}e(i)})):Ni(xi(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(t)){for(var o=0;o<t.length;o++){var i=e[o];"string"!=typeof e[o]&&(i=JSON.stringify(e[o])),n._platformSdk.data.setItem(t[o],i)}r()}else{var a=e;"string"!=typeof e&&(a=JSON.stringify(e)),n._platformSdk.data.setItem(t,a),r()}})):Ni(xi(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?Array.isArray(t)?(t.forEach((function(t){return r._platformSdk.data.removeItem(t)})),Promise.resolve()):(this._platformSdk.data.removeItem(t),Promise.resolve()):Ni(xi(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Z(t)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){Ui(this,Yi,!1),this._platformSdk.ad.requestAd("midgame",Vi(this,Ki))}},{key:"showRewarded",value:function(){Ui(this,Yi,!0),this._platformSdk.ad.requestAd("rewarded",Vi(this,Ki))}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ad.hasAdblock().then((function(t){e(t)}))}))}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),Fi(this,Xi,ea).call(this).then((function(){return Fi(e,Qi,na).call(e)})).then(function(){var t=Ri(Ti().mark((function t(o){var i,a,s,c,u,l;return Ti().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Zi,"/").concat(e.options.xsollaProjectId,"/payment/item/").concat(n),{method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});case 2:if((i=t.sent).ok){t.next=5;break}throw new Error("Xsolla create order HTTP ".concat(i.status));case 5:return t.next=7,i.json();case 7:if(a=t.sent,s=a.token,c=a.order_id,u=window.XPayStationWidget){t.next=13;break}throw new Error("Xsolla Pay Station widget not loaded");case 13:u.init({access_token:s,sandbox:e.options.isSandbox||!1,childWindow:{target:"_blank"}}),l=!1,u.on(u.eventTypes.STATUS,(function(t,i){try{var a=i&&i.paymentInfo||{};a.status&&/done|charged|success/i.test(String(a.status))&&Fi(e,$i,ia).call(e,e.options.xsollaProjectId,c,o).then((function(t){e._platformSdk.analytics.trackOrder("xsolla",t);var o=Ii({id:r.id,sku:n,orderId:c},t);e._paymentsPurchases.push(o),l||(l=!0,e._resolvePromiseDecorator(_.PURCHASE,o))})).catch((function(t){l||e._rejectPromiseDecorator(_.PURCHASE,t)}))}catch(t){l||e._rejectPromiseDecorator(_.PURCHASE,t)}})),u.on("close",(function(){l||e._rejectPromiseDecorator(_.PURCHASE,new Error("Purchase canceled/closed"))})),u.open();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Fi(this,Qi,na).call(this).then((function(e){return fetch("".concat(Zi,"/").concat(t.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla catalog HTTP ".concat(t.status));return t.json()})).then((function(r){var n=new Map((r.items||[]).map((function(t){return[t.sku,t]}))),o=e.map((function(t){var e,r,o,i,a,s,c,u,l,f,p=t.platformProductId||t.id,h=n.get(p);return{id:t.id,name:null!==(e=null!==(r=null==h?void 0:h.name)&&void 0!==r?r:t.name)&&void 0!==e?e:t.id,description:null!==(o=null!==(i=null==h?void 0:h.description)&&void 0!==i?i:t.description)&&void 0!==o?o:"",price:null!==(a=null==h||null===(s=h.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==h||null===(u=h.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==h||null===(f=h.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject(new Error("No such purchase to consume"));var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);if(!n){n=this._createPromiseDecorator(_.CONSUME_PURCHASE);var o=this._paymentsPurchases[r],i=o.sku||o.id;Fi(this,Qi,na).call(this).then((function(t){return fetch("".concat(Zi,"/").concat(e.options.xsollaProjectId,"/user/inventory/item/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({sku:i,quantity:1})})})).then((function(n){if(!n.ok)throw new Error("Xsolla consume HTTP ".concat(n.status));e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))}return n.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Fi(this,Qi,na).call(this).then((function(e){return fetch("".concat(Zi,"/").concat(t.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){if(!t.ok)throw new Error("Xsolla inventory HTTP ".concat(t.status));return t.json()})).then((function(e){var r=t._paymentsGetProductsPlatformData()||[];t._paymentsPurchases=(e.items||[]).map((function(t){var e=r.find((function(e){return e.id===t.sku}));return e?Ii({id:e.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}],n&&Li(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Uo);function ca(t){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(t)}function ua(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function la(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ua(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=pa(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pa(n.key),n)}}function pa(t){var e=function(t,e){if("object"!=ca(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ca(e)?e:String(e)}function ha(){return ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ma(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ha.apply(this,arguments)}function da(t,e){return da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},da(t,e)}function ya(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ma(t){return ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ma(t)}var va=new WeakSet;function _a(){var t=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(e){t._platformSdk.getUsers([t._playerId],(function(r){if(r&&1===r.length){var n=r[0];t._playerName=n.full_name,""!==n.avatar&&(t._playerPhotos=[n.avatar])}e()}))}))}const ga=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&da(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ma(o);if(s){var r=ma(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ya(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=ya(t=c.call.apply(c,[this].concat(o))),r=va),r.add(e),t}return r=l,(n=[{key:"platformId",get:function(){return t.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){t._platformSdk=new window.AgRuSdk,t._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(e,r){"rewarded"===e.type?null===r?e.status?t._setRewardedState(a.OPENED):(e.reward&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED):null===r?e.status?t._setInterstitialState(i.OPENED):t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)}));var e=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,va,_a).call(t);Promise.all([e]).finally((function(){t._isInitialized=!0,t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._resolvePromiseDecorator(_.INITIALIZE)}))}))),e.promise}},{key:"authorizePlayer",value:function(){var t=this;if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(e,r){null===r?t._resolvePromiseDecorator(_.AUTHORIZE_PLAYER):t._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,r)}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ha(ma(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ha(ma(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,r){if(n._platformStorageCachedData){if(Array.isArray(t)){for(var o=[],i=0;i<t.length;i++){var a=void 0===n._platformStorageCachedData[t[i]]?null:n._platformStorageCachedData[t[i]];o.push(a)}return void e(o)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(t)){for(var a=[],s=0;s<t.length;s++){var c=void 0===n._platformStorageCachedData[t[s]]?null:n._platformStorageCachedData[t[s]];a.push(c)}return void e(a)}e(void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t])}else r(i)})):r()})):ha(ma(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?la({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.setSaveData(i,(function(t,e){null===e&&(n._platformStorageCachedData=i,r()),o(e)}))}else o()})):ha(ma(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?la({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.setSaveData(o,(function(t,i){null===i&&(r._platformStorageCachedData=o,e()),n(i)}))}else n()})):ha(ma(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&fa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function Sa(t){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sa(t)}function ba(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ea(n.key),n)}}function Ea(t){var e=function(t,e){if("object"!=Sa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sa(e)?e:String(e)}function wa(t,e){return wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wa(t,e)}function Pa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aa(t){return Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(t)}function Oa(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ka(t,e,"set"),r),r}function Ta(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ka(t,e,"get"))}function ka(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ia=new WeakMap;const Da=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wa(t,e)}(p,e);var r,n,o,l,f=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Aa(o);if(l){var r=Aa(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Sa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pa(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=Pa(t=f.call.apply(f,[this].concat(i))),n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=Ia),r.set(e,n),t}return r=p,(n=[{key:"platformId",get:function(){return t.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var e=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(t){switch(t.name){case"SDK_READY":e._platformSdk=window.gdsdk,e._isInitialized=!0,e.showInterstitial(),e._resolvePromiseDecorator(_.INITIALIZE);break;case"SDK_GAME_START":Ta(e,Ia)?(e._setRewardedState(a.CLOSED),e._platformSdk.preloadAd("rewarded")):e._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Ta(e,Ia)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":e._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,W("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return t.promise}},{key:"showBanner",value:function(t){var e=this,r=document.getElementById(c);r||(r=Z(t)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){e._setBannerState(s.SHOWN)})).catch((function(){e._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var t=document.getElementById(c);t&&(t.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var t=this;Oa(this,Ia,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){t._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var t=this;Oa(this,Ia,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){t._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&ba(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Uo);function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function La(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fa(n.key),n)}}function ja(){return ja="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ga(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ja.apply(this,arguments)}function Na(t,e){return Na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Na(t,e)}function Ca(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ga(t){return Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ga(t)}function xa(t,e){Ba(t,e),e.add(t)}function Ma(t,e,r){Ba(t,e),e.set(t,r)}function Ba(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ha(t,e,r){return(e=Fa(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fa(t){var e=function(t,e){if("object"!=Ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ra(e)?e:String(e)}function Ua(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function Va(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Wa(t,e,"get"))}function Wa(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var za="AUTHORIZED",Za={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Ya=new WeakMap,Ja=new WeakMap,Ka=new WeakMap,qa=new WeakMap,Xa=new WeakSet,Qa=new WeakSet,$a=new WeakSet,ts=new WeakSet,es=new WeakSet,rs=new WeakSet,ns=new WeakSet,os=new WeakSet,is=new WeakSet,as=new WeakSet,ss=new WeakSet,cs=new WeakSet,us=new WeakSet,ls=new WeakSet,fs=new WeakSet,ps=new WeakSet;function hs(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(t){return{method:"users.hasAppPermission",ext_perm:t}}}}function ds(){var t=this;return{userProfileCallback:function(e,r,n){return Ua(t,Xa,ms).call(t,e,r,n)},hasValueAccessCallback:function(e,r,n){return Ua(t,$a,_s).call(t,r,n)}}}function ys(){var t=this;return{showPermissions:function(){return Ua(t,ts,gs).call(t)},loadAd:function(e){return Ua(t,es,Ss).call(t,e)},showLoadedAd:function(e,r){return Ua(t,rs,bs).call(t,r)},showAd:function(e,r){return Ua(t,ns,Es).call(t,r)},requestBannerAds:function(e,r){return Ua(t,os,ws).call(t,e,r)},showBannerAds:function(e,r){return Ua(t,as,As).call(t,r)},hideBannerAds:function(e,r){return Ua(t,is,Ps).call(t,r)},setBannerFormat:function(e){return Ua(t,ss,Os).call(t,e)},showInvite:function(e){return Ua(t,cs,Ts).call(t,e)},showRatingDialog:function(e,r){return Ua(t,us,ks).call(t,e,r)},joinGroup:function(e,r){return Ua(t,ls,Is).call(t,e,r)},showLoginSuggestion:function(e,r){return Ua(t,Qa,vs).call(t,e,r)},postMediatopic:function(e,r){return Ua(t,fs,Ds).call(t,e,r)},isAdBlockEnabled:function(e,r){return Ua(t,ps,Rs).call(t,e,r)}}}function ms(t,e){"ok"===t&&(this._playerId=e.uid,this._playerName=e.name,this._playerPhotos=[e.pic50x50,e.pic128x128,e.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(Va(this,Ja).hasAppPermission(Za.VALUABLE_ACCESS),Va(this,Ka).hasValueAccessCallback)}function vs(t,e){if("error"===t)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function _s(t){if(this._hasValuableAccessPermission=!!t,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(_.INITIALIZE);else{var e=Object.values(Za).map((function(t){return'"'.concat(t,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(e,"]"))}}function gs(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(Va(this,Ja).hasAppPermission(Za.VALUABLE_ACCESS),Va(this,Ka).hasValueAccessCallback)}function Ss(t){"error"===t?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function bs(t){switch(t){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Es(t){switch(t){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function ws(t,e){if("error"!==t)switch(e){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",Va(this,Ya));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Ps(t){t?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function As(t){t||this._setBannerState(s.FAILED)}function Os(t){"error"===t?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Ts(t){"error"===t?this._rejectPromiseDecorator(_.INVITE_FRIENDS):this._resolvePromiseDecorator(_.INVITE_FRIENDS)}function ks(t,e){"error"===t?this._rejectPromiseDecorator(_.RATE,e):this._resolvePromiseDecorator(_.RATE)}function Is(t,e){"error"===t?this._rejectPromiseDecorator(_.JOIN_COMMUNITY,e):this._resolvePromiseDecorator(_.JOIN_COMMUNITY)}function Ds(t,e){"error"===t?this._rejectPromiseDecorator(_.CREATE_POST,e):this._resolvePromiseDecorator(_.CREATE_POST)}function Rs(t,e){"ok"===t?this._resolvePromiseDecorator(_.ADBLOCK_DETECT,"true"===e):this._rejectPromiseDecorator(_.ADBLOCK_DETECT)}const Ls=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Na(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ga(o);if(s){var r=Ga(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ca(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return xa(Ca(t=c.call.apply(c,[this].concat(r))),ps),xa(Ca(t),fs),xa(Ca(t),ls),xa(Ca(t),us),xa(Ca(t),cs),xa(Ca(t),ss),xa(Ca(t),as),xa(Ca(t),is),xa(Ca(t),os),xa(Ca(t),ns),xa(Ca(t),rs),xa(Ca(t),es),xa(Ca(t),ts),xa(Ca(t),$a),xa(Ca(t),Qa),xa(Ca(t),Xa),Ma(Ca(t),qa,{get:ys,set:void 0}),Ma(Ca(t),Ka,{get:ds,set:void 0}),Ma(Ca(t),Ja,{get:hs,set:void 0}),Ha(Ca(t),"_hasValuableAccessPermission",!1),Ha(Ca(t),"_hasValuableAccessPermissionShowed",!1),Ha(Ca(t),"_platformBannerOptions",{}),Ma(Ca(t),Ya,{writable:!0,value:null}),t}return r=l,(n=[{key:"platformId",get:function(){return t.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("//api.ok.ru/js/fapi5.js").then((function(){Y("FAPI").then((function(){t._platformSdk=window.FAPI,window.API_callback=function(e,r,n){return Va(t,qa)[e](r,n)};var e=t._platformSdk.Util.getRequestParameters()||{};e.api_server&&e.apiconnection?t._platformSdk.init(e.api_server,e.apiconnection,(function(){var e,r=null===(e=t._platformSdk)||void 0===e?void 0:e.saved_state;t._isPlayerAuthorized=!r||r===za,t._isPlayerAuthorized?t._platformSdk.Client.call(Va(t,Ja).userProfile,Va(t,Ka).userProfileCallback):(t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE))}),(function(){t._rejectPromiseDecorator(_.INITIALIZE)})):t._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)}))}))),e.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(za)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ja(Ga(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:ja(Ga(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(e,o){var i=Array.isArray(t)?t:[t],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(t)){var u=[];return i.forEach((function(t){if(""!==c[t]&&void 0!==c[t]){var e=c[t];if(r)try{e=JSON.parse(c[t])}catch(t){}u.push(e)}else u.push(null)})),void e(u)}if(""===c[t]||void 0===c[t])return void e(null);var l=c[t];if(r)try{l=JSON.parse(c[t])}catch(t){}e(l)}else o(s)}))})):Promise.reject(g.STORAGE_NOT_AVAILABLE):ja(Ga(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var o=Array.isArray(t)?t:[t],i=Array.isArray(t)?e:[e],a=[],s=function(){var t=o[c],e=i[c];"string"!=typeof e&&(e=JSON.stringify(e));var r={method:"storage.set",key:t,value:e},s=new Promise((function(t,e){n._platformSdk.Client.call(r,(function(r,n){n?t():e()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return ja(Ga(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(g.STORAGE_NOT_AVAILABLE);for(var n=Array.isArray(t)?t:[t],o=[],i=function(){var t={method:"storage.set",key:n[a]},e=new Promise((function(e,n){r._platformSdk.Client.call(t,(function(t,r){r?e():n()}))}));o.push(e)},a=0;a<n.length;a++)i();return Promise.all(o)}return ja(Ga(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(t){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(t){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(t){var e,r;r=t,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e=this,Wa(e,Ya,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var t=this._getPromiseDecorator(_.ADBLOCK_DETECT);return t||(t=this._createPromiseDecorator(_.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),t.promise}},{key:"inviteFriends",value:function(t){var e=(t||{}).text;if(!t||"string"!=typeof e)return Promise.reject();var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),e.length>120?this._rejectPromiseDecorator(_.INVITE_FRIENDS,g.INVITE_FRIENDS_MESSAGE_LENGTH_ERROR):this._platformSdk.UI.showInvite(e)),r.promise}},{key:"rate",value:function(){var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._platformSdk.UI.showRatingDialog()),t.promise}},{key:"createPost",value:function(t){if(!t||null==t||!t.media)return Promise.reject();var e,r=this._getPromiseDecorator(_.CREATE_POST);return r||(r=this._createPromiseDecorator(_.CREATE_POST),this._platformSdk.UI.postMediatopic(t,null!==(e=t.status)&&void 0!==e&&e)),r.promise}},{key:"joinCommunity",value:function(t){if(!t||null==t||!t.groupId)return Promise.reject();var e,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(t.groupId,null!==(e=t.enableMessages)&&void 0!==e&&e)),r.promise}}])&&La(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function js(t){return js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(t)}function Ns(){Ns=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==js(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(js(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Cs(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Bs(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bs(n.key),n)}}function Bs(t){var e=function(t,e){if("object"!=js(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==js(e)?e:String(e)}function Hs(){return Hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Hs.apply(this,arguments)}function Fs(t,e){return Fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fs(t,e)}function Us(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vs(t){return Vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vs(t)}function Ws(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function zs(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Zs=new WeakSet,Ys=new WeakSet;function Js(){var t=this;return new Promise((function(e){t._platformSdk.userService.getUser().then((function(e){return e.isAuthorized?(t._isPlayerAuthorized=!0,t._playerId=e.id,t._playerName=e.name,t._playerPhotos=e.photos,t._playerExtra=e,t._defaultStorageType=u.PLATFORM_INTERNAL,zs(t,Ys,Ks).call(t,[])):(t._playerApplyGuestData(),Promise.resolve())})).catch((function(){t._playerApplyGuestData()})).finally((function(){e()}))}))}function Ks(t){return qs.apply(this,arguments)}function qs(){var t;return t=Ns().mark((function t(e){var r,n=arguments;return Ns().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(n.length>1&&void 0!==n[1])||n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)})),qs=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cs(i,n,o,a,s,"next",t)}function s(t){Cs(i,n,o,a,s,"throw",t)}a(void 0)}))},qs.apply(this,arguments)}const Xs=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fs(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vs(o);if(s){var r=Vs(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===js(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Us(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Ws(Us(t=c.call.apply(c,[this].concat(r))),Ys),Ws(Us(t),Zs),t}return r=l,(n=[{key:"platformId",get:function(){return t.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||Hs(Vs(l.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://developer.playgama.com/sdk/v1.js").then((function(){Y("PLAYGAMA_SDK").then((function(){t._platformSdk=window.PLAYGAMA_SDK,t._platformSdk.advService.subscribeToAdStateChanges((function(e,r){if("interstitial"===e)switch(r){case"open":t._setInterstitialState(i.OPENED);break;case"empty":case"error":t._setInterstitialState(i.FAILED);break;case"close":t._setInterstitialState(i.CLOSED)}else if("rewarded"===e)switch(r){case"open":t._setRewardedState(a.OPENED);break;case"empty":case"error":t._setRewardedState(a.FAILED);break;case"rewarded":t._setRewardedState(a.REWARDED);break;case"close":t._setRewardedState(a.CLOSED)}})),zs(t,Zs,Js).call(t).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameService.gameReady(),Promise.resolve()):Hs(Vs(l.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Hs(Vs(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Hs(Vs(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?zs(this,Ys,Ks).call(this,t,r):Promise.reject():Hs(Vs(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;switch(r){case u.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?xs({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject();case u.LOCAL_STORAGE:var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]="string"!=typeof e[i]?JSON.stringify(e[i]):e[i];else o[t]="string"!=typeof e?JSON.stringify(e):e;return this._platformSdk.storageApi.setItems(o),Hs(Vs(l.prototype),"setDataToStorage",this).call(this,t,e,r);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;switch(e){case u.PLATFORM_INTERNAL:return new Promise((function(e,n){var o=null!==r._platformStorageCachedData?xs({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))}));case u.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(t)?t:[t]),Hs(Vs(l.prototype),"deleteDataFromStorage",this).call(this,t,e);default:return Promise.reject(g.STORAGE_NOT_SUPPORTED)}}},{key:"showInterstitial",value:function(){this._platformSdk.advService.showInterstitial()}},{key:"showRewarded",value:function(){this._platformSdk.advService.showRewarded()}},{key:"authorizePlayer",value:function(t){var e=this,r=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._isPlayerAuthorized?zs(this,Zs,Js).call(this,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){zs(e,Zs,Js).call(e,t).then((function(){e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),r.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(e){if("PAID"===e.status){var n=xs({id:t},e);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(_.PURCHASE,n)}else r._rejectPromiseDecorator(_.PURCHASE,e.error)})).catch((function(t){r._rejectPromiseDecorator(_.PURCHASE,t)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));return Promise.resolve(e)}}])&&Ms(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function Qs(t){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(t)}function $s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ac(n.key),n)}}function ec(){return ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ec.apply(this,arguments)}function rc(t,e){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rc(t,e)}function nc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oc(t){return oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oc(t)}function ic(t,e,r){return(e=ac(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ac(t){var e=function(t,e){if("object"!=Qs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qs(e)?e:String(e)}function sc(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function cc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,lc(t,e,"set"),r),r}function uc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,lc(t,e,"get"))}function lc(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var fc=new WeakMap,pc=new WeakMap;const hc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=oc(o);if(s){var r=oc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return sc(nc(t=c.call.apply(c,[this].concat(r))),fc,{writable:!0,value:void 0}),sc(nc(t),pc,{writable:!0,value:void 0}),ic(nc(t),"_defaultStorageType",u.PLATFORM_INTERNAL),ic(nc(t),"_isPlayerAuthorized",!0),t}return r=l,n=[{key:"platformId",get:function(){return t.PLAYDECK}},{key:"platformLanguage",get:function(){return uc(this,fc)?uc(this,fc):ec(oc(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.addEventListener("message",(function e(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;t._playerId=i.telegramId,t._playerPhotos=[i.avatar],t._playerName=i.username,cc(t,fc,i.locale),cc(t,pc,i.params),window.removeEventListener("message",e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}}})),et({playdeck:{method:"getUserProfile"}},"*")),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_OVER:return et({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case h.GAME_READY:return et({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return ec(oc(l.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":t._setInterstitialState(i.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setInterstitialState(i.FAILED),window.removeEventListener("message",e)}})),et({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var t=this;window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":t._setRewardedState(a.OPENED);break;case"rewardedAd":t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"skipAd":t._setRewardedState(a.CLOSED),window.removeEventListener("message",e);break;case"errAd":case"notFoundAd":t._setRewardedState(a.FAILED),window.removeEventListener("message",e)}})),et({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ec(oc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||ec(oc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?new Promise((function(e){var r={},n=Array.isArray(t)?t:[t];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(t)?t.map((function(t){return r[t]})):r[t];e(c)}}})),n.forEach((function(t){return et({playdeck:{method:"getData",key:t}},"*")}))})):ec(oc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(t)?t:[t],o=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));n.forEach((function(t,e){return et({playdeck:{method:"setData",key:t,value:o[e]}},"*")})),r()})):ec(oc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return et({playdeck:{method:"setData",key:t,value:""}},"*")})),e()})):ec(oc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(){var t=this,e=this._getPromiseDecorator(_.SHARE);return e||(e=this._createPromiseDecorator(_.SHARE),window.addEventListener("message",(function e(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",e),t._resolvePromiseDecorator(_.SHARE))})),et({playdeck:{method:"customShare",value:uc(this,pc)}},"*")),e.promise}},{key:"paymentsPurchase",value:function(t,e){var r=this,n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();e&&e.externalId&&(n.externalId=e.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(t));var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),window.addEventListener("message",(function t(e){var r=e.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(et({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",t))})),window.addEventListener("message",(function e(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",e);var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$s(Object(r),!0).forEach((function(e){ic(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:t},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(_.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",e),r._rejectPromiseDecorator(_.PURCHASE,i.value))})),et({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=t.map((function(t){return{id:t.id,price:"".concat(t.amount," Stars"),priceCurrencyCode:"Stars",priceValue:t.amount}}));return Promise.resolve(e)}}],n&&tc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function dc(t){return dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(t)}function yc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ec(n.key),n)}}function mc(){return mc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mc.apply(this,arguments)}function vc(t,e){return vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vc(t,e)}function _c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gc(t){return gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gc(t)}function Sc(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function bc(t,e,r){return(e=Ec(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ec(t){var e=function(t,e){if("object"!=dc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dc(e)?e:String(e)}function wc(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Ac(t,e,"set"),r),r}function Pc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ac(t,e,"get"))}function Ac(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Oc=new WeakMap,Tc=new WeakMap,kc=new WeakMap,Ic=new WeakMap;const Dc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vc(t,e)}(f,e);var r,n,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=gc(o);if(s){var r=gc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===dc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _c(t)}(this,t)});function f(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return bc(_c(t=c.call.apply(c,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),bc(_c(t),"_isPlayerAuthorized",!0),Sc(_c(t),Oc,{writable:!0,value:void 0}),Sc(_c(t),Tc,{writable:!0,value:void 0}),Sc(_c(t),kc,{writable:!0,value:{onStart:function(){return t._setRewardedState(a.OPENED)},onSkip:function(){return t._setRewardedState(a.CLOSED)},onReward:function(){return t._setRewardedState(a.REWARDED)},onError:function(){return t._setRewardedState(a.FAILED)}}}),Sc(_c(t),Ic,{writable:!0,value:{onStart:function(){return t._setInterstitialState(i.OPENED)},onSkip:function(){return t._setInterstitialState(i.CLOSED)},onError:function(){return t._setInterstitialState(i.FAILED)}}}),t}return r=f,(n=[{key:"platformId",get:function(){return t.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:mc(gc(f.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!Pc(this,Tc)}},{key:"isRewardedSupported",get:function(){return!!Pc(this,Tc)}},{key:"deviceType",get:function(){switch(Pc(this,Oc)){case"android":case"android_x":case"ios":return l.MOBILE;case"tdesktop":case"unigram":case"macos":return l.DESKTOP;default:return mc(gc(f.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://telegram.org/js/telegram-web-app.js").then((function(){t._platformSdk=window.Telegram.WebApp;var e=t._platformSdk.initDataUnsafe.user;t._playerId=e.id,t._playerName=[e.first_name,e.last_name].filter(Boolean).join(" "),t._playerPhotos=[e.photo_url],wc(t,Oc,t._platformSdk.platform),t._isInitialized=!0,t._options&&t._options.adsgramBlockId?W("https://sad.adsgram.ai/js/sad.min.js").then((function(){wc(t,Tc,window.Adsgram.init({blockId:t._options.adsgramBlockId}))})).finally((function(){t._resolvePromiseDecorator(_.INITIALIZE)})):t._resolvePromiseDecorator(_.INITIALIZE)}))),e.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):mc(gc(f.prototype),"sendMessage",this).call(this,t)}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||mc(gc(f.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||mc(gc(f.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Array.isArray(t)?n._platformSdk.CloudStorage.getItems(t,(function(n,i){if(n)o(n);else{var a=[];t.forEach((function(t){var e=i[t];if(r&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}a.push(e)})),e(a)}})):n._platformSdk.CloudStorage.getItem(t,(function(t,n){t&&o(t);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(t){}e(i)}))})):mc(gc(f.prototype),"getDataFromStorage",this).call(this,t,e)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(t)?t:[t],i=(Array.isArray(e)?e:[e]).map((function(t){return"string"!=typeof t?JSON.stringify(t):t}));o.forEach((function(t,e){return n._platformSdk.CloudStorage.setItem(t,i[e])})),r()})):mc(gc(f.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e){(Array.isArray(t)?t:[t]).forEach((function(t){return r._platformSdk.CloudStorage.removeItem(t)})),e()})):mc(gc(f.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;Pc(this,Tc)?(Pc(this,Tc).addEventListener("onStart",Pc(this,Ic).onStart),Pc(this,Tc).addEventListener("onSkip",Pc(this,Ic).onSkip),Pc(this,Tc).addEventListener("onError",Pc(this,Ic).onError),Pc(this,Tc).addEventListener("onBannerNotFound",Pc(this,Ic).onError),Pc(this,Tc).show().finally((function(){Pc(t,Tc).removeEventListener("onStart",Pc(t,Ic).onStart),Pc(t,Tc).removeEventListener("onSkip",Pc(t,Ic).onSkip),Pc(t,Tc).removeEventListener("onError",Pc(t,Ic).onError),Pc(t,Tc).removeEventListener("onBannerNotFound",Pc(t,Ic).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;Pc(this,Tc)?(Pc(this,Tc).addEventListener("onStart",Pc(this,kc).onStart),Pc(this,Tc).addEventListener("onSkip",Pc(this,kc).onSkip),Pc(this,Tc).addEventListener("onReward",Pc(this,kc).onReward),Pc(this,Tc).addEventListener("onError",Pc(this,kc).onError),Pc(this,Tc).addEventListener("onBannerNotFound",Pc(this,kc).onError),Pc(this,Tc).show().finally((function(){Pc(t,Tc).addEventListener("onStart",Pc(t,kc).onStart),Pc(t,Tc).addEventListener("onSkip",Pc(t,kc).onSkip),Pc(t,Tc).addEventListener("onReward",Pc(t,kc).onReward),Pc(t,Tc).addEventListener("onError",Pc(t,kc).onError),Pc(t,Tc).addEventListener("onBannerNotFound",Pc(t,kc).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var t=this,e=this._getPromiseDecorator(_.CLIPBOARD_READ);return e||(e=this._createPromiseDecorator(_.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(e){e?t._resolvePromiseDecorator(_.CLIPBOARD_READ,e):t._rejectPromiseDecorator(_.CLIPBOARD_READ)}))),e.promise}}])&&yc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(Uo);var Rc=["player"];function Lc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lc(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Gc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nc(t){return Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(t)}function Cc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gc(n.key),n)}}function Gc(t){var e=function(t,e){if("object"!=Nc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nc(e)?e:String(e)}function xc(){return xc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},xc.apply(this,arguments)}function Mc(t,e){return Mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mc(t,e)}function Bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hc(t){return Hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hc(t)}function Fc(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Uc(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Vc="userData",Wc="6129580795478709",zc=new WeakSet,Zc=new WeakSet;function Yc(){var t=this;return new Promise((function(e,r){t._platformStorageCachedData?e(t._platformStorageCachedData):t._platformSdk.api("user_data/retrieve","POST",{key:Vc},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(t){}t._platformStorageCachedData=o,e(o)}))}))}function Jc(t){if("ok"===t.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var e=t.authResponse.details,r=e.pid,n=e.locale,o=e.nickname,i=e.first_name,a=e.last_name,s=e.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(t){return!!t})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const Kc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mc(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Hc(o);if(s){var r=Hc(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bc(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Fc(Bc(t=c.call.apply(c,[this].concat(r))),Zc),Fc(Bc(t),zc),t}return r=l,(n=[{key:"platformId",get:function(){return t.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.gameId?W("https://cdn.y8.com/api/sdk.js").then((function(){Y("ID").then((function(){t._platformSdk=window.ID,t._platformSdk.Event.subscribe("id.init",(function(){z({adSenseId:t._options.channelId?"ca-pub-".concat(Wc):t._options.adsenseId,channelId:t._options.channelId,hostId:"ca-host-pub-".concat(Wc)}).then((function(e){t._showAd=e})),t._platformSdk.getLoginStatus((function(e){Uc(t,Zc,Jc).call(t,e),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))})),t._platformSdk.init({appId:t._options.gameId})}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.login((function(n){Uc(t,Zc,Jc).call(t,n),"ok"===n.status?(t._platformStorageCachedData=null,e()):r()}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||xc(Hc(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:xc(Hc(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){Uc(n,zc,Yc).call(n).then((function(n){var o=(Array.isArray(t)?t:[t]).map((function(t){var e=n[t];return r||"object"!==Nc(e)||null===e?null!=e?e:null:JSON.stringify(e)}));e(o)})).catch(o)})):xc(Hc(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){Uc(n,zc,Yc).call(n).then((function(i){var a=jc({},i);if(Array.isArray(t))for(var s=0;s<t.length;s++)a[t[s]]=e[s];else a[t]=e;n._platformSdk.api("user_data/submit","POST",{key:Vc,value:JSON.stringify(a)},(function(t){"ok"===t.status?(n._platformStorageCachedData=a,r()):o(t)}))})).catch(o)})):xc(Hc(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){Uc(r,zc,Yc).call(r).then((function(o){var i=jc({},o);if(Array.isArray(t))for(var a=0;a<t.length;a++)delete i[t[a]];else delete i[t];r._platformSdk.api("user_data/submit","POST",{key:Vc,value:JSON.stringify(i)},(function(t){"ok"===t.status?(r._platformStorageCachedData=i,e()):n(t)}))})).catch(n)})):xc(Hc(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){t._setInterstitialState(i.OPENED)},afterAd:function(){t.interstitialState!==i.FAILED&&t._setInterstitialState(i.CLOSED)},adBreakDone:function(e){"viewed"!==e.breakStatus&&t._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var t=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){t._setRewardedState(a.OPENED)},afterAd:function(){t.rewardedState!==a.FAILED&&t._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){t._setRewardedState(a.FAILED)},adViewed:function(){t._setRewardedState(a.REWARDED)},adBreakDone:function(e){"frequencyCapped"!==e.breakStatus&&"other"!==e.breakStatus||t._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={table:t,points:e};this._platformSdk.GameAPI.Leaderboards.save(o,(function(t){var e=t.success,n=t.errormessage;e?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);var n={table:t,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(t){var r=t.scores,n=t.success,o=t.errormessage;if(n){var i=r.map((function(t){return{id:t.playerid,name:t.playername,score:t.points,rank:t.rank,photo:null}}));e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,i)}else e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(t){var e=this;return this._isPlayerAuthorized&&t.achievement&&t.achievementkey?new Promise((function(r){e._platformSdk.GameAPI.Achievements.save(t,(function(t){r(t)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.GameAPI.Achievements.listCustom(t,(function(t){t.success?r(t.achievements.map((function(t){var e=t.player;return jc(jc({},function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,Rc)),{},{playerid:e.playerid,playername:e.playername,lastupdated:e.lastupdated,date:e.date,rdate:e.rdate})}))):n(new Error(t.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(t){return this._platformSdk.GameAPI.Achievements.list(t),Promise.resolve()}}])&&Cc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function qc(t){return qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(t)}function Xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qc(n.key),n)}}function Qc(t){var e=function(t,e){if("object"!=qc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qc(e)?e:String(e)}function $c(){return $c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},$c.apply(this,arguments)}function tu(t,e){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tu(t,e)}function eu(t){return eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eu(t)}const ru=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tu(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=eu(o);if(s){var r=eu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===qc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?W("https://lagged.com/api/rev-share/lagged.js").then((function(){Y("LaggedAPI").then((function(){t._platformSdk=window.LaggedAPI,t._platformSdk.init(t._options.devId,t._options.publisherId),t._platformSdk.User.get((function(e){var r,n=null!==(r=null==e?void 0:e.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(t._playerId=o,t._playerName=i,t._playerPhotos.push(a),t._isPlayerAuthorized=!0),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),e.promise}},{key:"isStorageSupported",value:function(t){return t!==u.PLATFORM_INTERNAL&&$c(eu(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t!==u.PLATFORM_INTERNAL&&$c(eu(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){t._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(e,r){e?r():t._setRewardedState(a.FAILED)}),(function(e){e?(t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={score:e,board:t};this._platformSdk.Scores.save(o,(function(t){t.success?r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(t){var e=this;return t.achievement?new Promise((function(r,n){e._platformSdk.Achievements.save(Array.isArray(t.achievement)?t.achievement:[t.achievement],(function(t){t.success?r(t):n(t.errormsg)}))})):Promise.reject()}}])&&Xc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function nu(){nu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==su(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(su(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ou(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function iu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function au(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?iu(Object(r),!0).forEach((function(e){mu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function su(t){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(t)}function cu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vu(n.key),n)}}function lu(){return lu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},lu.apply(this,arguments)}function fu(t,e){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fu(t,e)}function pu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hu(t){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hu(t)}function du(t,e){yu(t,e),e.add(t)}function yu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mu(t,e,r){return(e=vu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vu(t){var e=function(t,e){if("object"!=su(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=su(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==su(e)?e:String(e)}function _u(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,gu(t,e,"set"),r),r}function gu(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function Su(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var bu=new WeakMap,Eu=new WeakSet,wu=new WeakSet,Pu=new WeakSet,Au=new WeakSet;function Ou(){var t=this;t._platformSdk.overlayViews.setCustomEventHandler((function(e){if("leaderboard"===e)_u(t,bu,!0);else if("close"===e){if(function(t,e){return e.get?e.get.call(t):e.value}(r=t,gu(r,bu,"get")))return void _u(t,bu,!1);t._overlay&&(document.body.removeChild(document.getElementById(t._overlay.iframeElement.id)),t._overlay.dismissAsync(),t._overlay=null)}var r}))}function Tu(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[t])return this._preloadedInterstitialPromises[t];var r=null;return this._preloadedInterstitialPromises[t]=this._platformSdk.getInterstitialAdAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedInterstitialPromises[t]=null,Promise.reject()})),this._preloadedInterstitialPromises[t]}function ku(t){var e=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[t])return this._preloadedRewardedPromises[t];var r=null;return this._preloadedRewardedPromises[t]=this._platformSdk.getRewardedVideoAsync(t).then((function(t){return r=t,t.loadAsync()})).then((function(){return r})).catch((function(){return e._preloadedRewardedPromises[t]=null,Promise.reject()})),this._preloadedRewardedPromises[t]}function Iu(){return Du.apply(this,arguments)}function Du(){var t;return t=nu().mark((function t(){return nu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!t.sent){t.next=6;break}return t.abrupt("return",Promise.resolve());case 6:t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(0),"INVALID_OPERATION"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=13;break}t.next=14;break;case 13:throw new Error(t.t0);case 14:return t.prev=15,t.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!t.sent){t.next=21;break}return t.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:t.next=28;break;case 23:if(t.prev=23,t.t1=t.catch(15),"INVALID_OPERATION"!==(null===t.t1||void 0===t.t1?void 0:t.t1.code)){t.next=27;break}return t.abrupt("return",Promise.resolve());case 27:throw new Error(t.t1);case 28:return t.abrupt("return",Promise.resolve());case 29:case"end":return t.stop()}}),t,this,[[0,8],[15,23]])})),Du=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ou(i,n,o,a,s,"next",t)}function s(t){ou(i,n,o,a,s,"throw",t)}a(void 0)}))},Du.apply(this,arguments)}const Ru=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fu(t,e)}(p,e);var r,n,o,c,f=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hu(o);if(c){var r=hu(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===su(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pu(t)}(this,t)});function p(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return du(pu(t=f.call.apply(f,[this].concat(i))),Au),du(pu(t),Pu),du(pu(t),wu),du(pu(t),Eu),mu(pu(t),"_contextId",null),mu(pu(t),"_supportedApis",[]),mu(pu(t),"_preloadedInterstitialPromises",{}),mu(pu(t),"_preloadedRewardedPromises",{}),mu(pu(t),"_defaultStorageType",u.PLATFORM_INTERNAL),mu(pu(t),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},yu(e=pu(t),r=bu),r.set(e,n),t}return r=p,n=[{key:"platformId",get:function(){return t.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||lu(hu(p.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return l.MOBILE;case"WEB":return l.DESKTOP;default:return lu(hu(p.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return v}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return Y("FBInstant")})).then((function(){return t._platformSdk=window.FBInstant,t._platformSdk.initializeAsync()})).then((function(){return t._isPlayerAuthorized=!0,t._playerId=t._platformSdk.player.getID(),t._contextId=t._platformSdk.context.getID(),t._platformLanguage=t._platformSdk.getLocale(),"string"==typeof t._platformLanguage&&(t._platformLanguage=t._platformLanguage.substring(0,2).toLowerCase()),t._supportedApis=t._platformSdk.getSupportedAPIs(),Su(t,Eu,Ou).call(t),Promise.allSettled([t._platformSdk.community.canFollowOfficialPageAsync(),t._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(e){var r,n,o=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return cu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cu(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;t._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){return t._rejectPromiseDecorator(_.INITIALIZE,e)}))),e.promise}},{key:"sendMessage",value:function(t){var e=this;return t===h.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return Su(e,Au,Iu).call(e)}),0),new Promise((function(t){e._platformSdk.startGameAsync().then(t)}))):lu(hu(p.prototype),"sendMessage",this).call(this,t)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):lu(hu(p.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:lu(hu(p.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){var i=Array.isArray(t)?t:[t];n._platformSdk.player.getDataAsync(i).then((function(t){var n=i.map((function(e){var n=t[e];return r||"object"!==su(n)||null===n?null!=n?n:null:JSON.stringify(n)}));e(n)})).catch(o)})):lu(hu(p.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):lu(hu(p.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null;else o[t]=null;r._platformSdk.player.setDataAsync(o).then(e).catch(n)})):lu(hu(p.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showBanner",value:function(t,e){var r=this;this._platformSdk.loadBannerAdAsync(e,t).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideBannerAdAsync().then((function(){t._setBannerState(s.HIDDEN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(t){Su(this,wu,Tu).call(this,t)}},{key:"showInterstitial",value:function(t){var e=this;Su(this,wu,Tu).call(this,t).then((function(t){return e._setInterstitialState(i.OPENED),t.showAsync()})).then((function(){e._setInterstitialState(i.CLOSED),Su(e,wu,Tu).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!1)}))}},{key:"preloadRewarded",value:function(t){Su(this,Pu,ku).call(this,t)}},{key:"showRewarded",value:function(t){var e=this;Su(this,Pu,ku).call(this,t).then((function(t){return e._setRewardedState(a.OPENED),t.showAsync()})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),Su(e,Pu,ku).call(e,t,!0)})).catch((function(){return e._advertisementShowErrorPopup(!0)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.globalLeaderboards.setScoreAsync(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="9999",t.id="loading-overlay";var e=document.createElement("div");return e.style.fontSize="24px",e.style.color="#fff",e.innerText="Loading...",t.appendChild(e),t}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(t,20).then((function(t){var r=t.map((function(t){return{score:t.getScore(),sessionID:t.getPlayer().getSessionID()}})),o=e._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(t){t.showAsync(),e._overlay=t,n.remove(),e._resolvePromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(t,r){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(t){n.remove(),e._rejectPromiseDecorator(_.LEADERBOARDS_SHOW_NATIVE_POPUP,t)}))}return r.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);r||(r={id:t});var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=au({id:t},r);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=e.map((function(t){var e=r.find((function(e){return e.productID===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceAmount}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=au({id:r.find((function(e){return e.id===t.productID})).id},t);return delete e.productID,e})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.image||!e.text)return Promise.reject();if(!J(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.inviteAsync(e).then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),r.promise}},{key:"joinCommunity",value:function(t){var e=this,r=this._getPromiseDecorator(_.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(_.JOIN_COMMUNITY),t&&!0===t.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(t){return e._resolvePromiseDecorator(_.JOIN_COMMUNITY,t)})).catch((function(t){return e._rejectPromiseDecorator(_.JOIN_COMMUNITY,t)}))),r.promise}},{key:"share",value:function(t){var e=this;if(!t.image||!t.text)return Promise.reject();if(!J(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.shareAsync(au({intent:"REQUEST"},t)).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}],n&&uu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Uo);function Lu(t){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(t)}function ju(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nu(n.key),n)}}function Nu(t){var e=function(t,e){if("object"!=Lu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lu(e)?e:String(e)}var Cu,Gu=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,r=[{key:"send",value:function(t){et(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*")}},{key:"addListener",value:function(t){window.addEventListener("message",t)}},{key:"removeListener",value:function(t){window.removeEventListener("message",t)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&ju(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xu(){xu=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Uu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Uu(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Mu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bu(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Hu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hu(Object(r),!0).forEach((function(e){qu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Uu(t){return Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(t)}function Vu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xu(n.key),n)}}function Wu(t,e){return Wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wu(t,e)}function zu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zu(t,e){Ku(t,e),e.add(t)}function Yu(){return Yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ju(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Yu.apply(this,arguments)}function Ju(t){return Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ju(t)}function Ku(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qu(t,e,r){return(e=Xu(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xu(t){var e=function(t,e){if("object"!=Uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uu(e)?e:String(e)}function Qu(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,r)}function $u(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var tl="banner",el="bridge",rl={AUTHORIZED_ONLY:"authorized_only",ALWAYS:"always",NEVER:"never"},nl={IS_STORAGE_AVAILABLE:"is_storage_available",IS_STORAGE_SUPPORTED:"is_storage_supported",GET_DATA_FROM_STORAGE:"get_data_from_storage",SET_DATA_TO_STORAGE:"set_data_to_storage",DELETE_DATA_FROM_STORAGE:"delete_data_from_storage",GET_SERVER_TIME:"get_server_time",CHECK_ADBLOCK:"check_adblock",CLIPBOARD_READ:"clipboard_read",LIVENESS_PING:"ping",UNLOCK_ACHIEVEMENT:"unlock_achievement",GET_ACHIEVEMENTS:"get_achievements",SHOW_ACHIEVEMENTS_NATIVE_POPUP:"show_achievements_native_popup",GET_PERFORMANCE_RESOURCES:"get_performance_resources",GET_LANGUAGE:"get_language",GET_PLAYER:"get_player",AUDIO_STATE:"audio_state",PAUSE_STATE:"pause_state"},ol="isLocalStorageSupported",il="isPlatformInternalStorageSupported",al="isBannerSupported",sl=new WeakMap,cl=new WeakSet,ul=new WeakSet,ll=new WeakSet,fl=new WeakSet,pl=new WeakSet,hl=new WeakSet,dl=new WeakSet,yl=new WeakSet,ml=new WeakSet,vl=new WeakSet,_l=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wu(t,e)}(f,r);var o,i,a,c,l=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ju(a);if(c){var r=Ju(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zu(t)}(this,t)});function f(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Zu(zu(t=l.call.apply(l,[this].concat(i))),vl),Zu(zu(t),ml),Zu(zu(t),yl),Zu(zu(t),dl),Zu(zu(t),hl),Zu(zu(t),pl),Zu(zu(t),fl),Zu(zu(t),ll),Zu(zu(t),ul),Zu(zu(t),cl),qu(zu(t),"_supportedFeatures",[]),qu(zu(t),"_leaderboardsType",null),e=zu(t),r=sl,n={writable:!0,value:new Gu},Ku(e,r),r.set(e,n),t}return o=f,(i=[{key:"platformId",get:function(){return t.QA_TOOL}},{key:"platformLanguage",get:function(){return $u(this,pl,wl).call(this,{type:e.PLATFORM,action:nl.GET_LANGUAGE,options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isBannerSupported",get:function(){return this._supportedFeatures.includes(al)}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this.isAchievementsSupported&&this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"leaderboardsType",get:function(){var t;return null!==(t=this._leaderboardsType)&&void 0!==t?t:d}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),this.on(n.AUDIO_STATE_CHANGED,(function(r){$u(t,pl,wl).call(t,{type:e.PLATFORM,action:nl.AUDIO_STATE,options:{isEnabled:r}})})),this.on(n.PAUSE_STATE_CHANGED,(function(r){$u(t,pl,wl).call(t,{type:e.PLATFORM,action:nl.PAUSE_STATE,options:{isPaused:r}})})),Qu(this,sl).addListener((function(r){var n=r.data;if(null!=n&&n.type&&(null==n?void 0:n.source)!==el)if(n.type===e.PLATFORM){if(n.action===_.INITIALIZE)$u(t,dl,Al).call(t).then((function(){$u(t,cl,gl).call(t,n)}));else if(n.action===nl.AUDIO_STATE)$u(t,ul,Sl).call(t,n);else if(n.action===nl.PAUSE_STATE)$u(t,ll,bl).call(t,n);else if(n.action===nl.GET_PERFORMANCE_RESOURCES){var o,i=Qu(t,sl).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];$u(t,fl,El).call(t,i,a)}}else n.type===e.ADVERTISEMENT&&$u(t,yl,Tl).call(t,n)})),$u(this,pl,wl).call(this,{type:e.PLATFORM,action:_.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(t){var r=this;if(!this.isPlayerAuthorizationSupported)return Promise.reject();var n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),$u(this,hl,Pl).call(this,e.PLAYER,_.AUTHORIZE_PLAYER,{options:t}).then((function(t){var e=t.auth;"success"===e.status?$u(r,dl,Al).call(r).then((function(){r._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})):r._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,e.error)}))),n.promise}},{key:"sendMessage",value:function(t){return[h.GAME_READY,h.IN_GAME_LOADING_STARTED,h.IN_GAME_LOADING_STOPPED,h.GAMEPLAY_STARTED,h.GAMEPLAY_STOPPED,h.PLAYER_GOT_ACHIEVEMENT,h.GAME_OVER].includes(t)?($u(this,pl,wl).call(this,{type:e.PLATFORM,action:t}),Promise.resolve()):Yu(Ju(f.prototype),"sendMessage",this).call(this,t)}},{key:"getServerTime",value:function(){return $u(this,hl,Pl).call(this,e.PLATFORM,nl.GET_SERVER_TIME,{options:{}},{timeout:5e3}).then((function(t){var e=t.time;if(!e)throw new Error("Invalid server time");return e})).catch((function(){throw new Error("Server time request timeout")}))}},{key:"isStorageSupported",value:function(t){return $u(this,pl,wl).call(this,{type:e.STORAGE,action:nl.IS_STORAGE_SUPPORTED,options:{storageType:t}}),!(t!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(il))||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ol))}},{key:"isStorageAvailable",value:function(t){return $u(this,pl,wl).call(this,{type:e.STORAGE,action:nl.IS_STORAGE_AVAILABLE,options:{storageType:t}}),(t===u.PLATFORM_INTERNAL&&this._supportedFeatures.includes(il)&&$u(this,ml,kl).call(this)||!(t!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ol)))&&Yu(Ju(f.prototype),"isStorageAvailable",this).call(this,u.LOCAL_STORAGE)}},{key:"getDataFromStorage",value:function(t,r,n){return this.isStorageSupported(r)?$u(this,hl,Pl).call(this,e.STORAGE,nl.GET_DATA_FROM_STORAGE,{options:{key:t,storageType:r,tryParseJson:n}}).then((function(e){var r=e.storage;return q(t,r,n)})):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"setDataToStorage",value:function(t,r,n){return $u(this,pl,wl).call(this,{type:e.STORAGE,action:nl.SET_DATA_TO_STORAGE,options:{key:t,value:r,storageType:n}}),this.isStorageSupported(n)?n===u.PLATFORM_INTERNAL||n===u.LOCAL_STORAGE?Promise.resolve():Yu(Ju(f.prototype),"setDataToStorage",this).call(this,t,r,n):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"deleteDataFromStorage",value:function(t,r){return $u(this,pl,wl).call(this,{type:e.STORAGE,action:nl.DELETE_DATA_FROM_STORAGE,options:{key:t,storageType:r}}),this.isStorageSupported(r)?r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE?Promise.resolve():Yu(Ju(f.prototype),"deleteDataFromStorage",this).call(this,t,r):Promise.reject(g.STORAGE_NOT_SUPPORTED)}},{key:"showInterstitial",value:function(t){this.isInterstitialSupported&&$u(this,pl,wl).call(this,{type:e.ADVERTISEMENT,action:"interstitial",options:{placement:t}})}},{key:"showRewarded",value:function(t){this.isRewardedSupported&&$u(this,pl,wl).call(this,{type:e.ADVERTISEMENT,action:"reward",options:{placement:t}})}},{key:"showBanner",value:function(t,r){this.isBannerSupported&&(this._setBannerState(s.SHOWN),$u(this,pl,wl).call(this,{type:e.ADVERTISEMENT,action:s.SHOWN,options:{type:tl,position:t,placement:r}}))}},{key:"hideBanner",value:function(){this.isBannerSupported&&(this._setBannerState(s.HIDDEN),$u(this,pl,wl).call(this,{type:e.ADVERTISEMENT,action:s.HIDDEN,options:{type:tl}}))}},{key:"checkAdBlock",value:function(){return $u(this,pl,wl).call(this,{type:nl.CHECK_ADBLOCK,action:_.ADBLOCK_DETECT}),Yu(Ju(f.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){if(!this.isInviteFriendsSupported)return Promise.reject();var t=this._getPromiseDecorator(_.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(_.INVITE_FRIENDS),this._resolvePromiseDecorator(_.INVITE_FRIENDS),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.INVITE_FRIENDS})),t.promise}},{key:"joinCommunity",value:function(){if(!this.isJoinCommunitySupported)return Promise.reject();var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),this._resolvePromiseDecorator(_.JOIN_COMMUNITY),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.JOIN_COMMUNITY})),t.promise}},{key:"share",value:function(){if(!this.isShareSupported)return Promise.reject();var t=this._getPromiseDecorator(_.SHARE);return t||(t=this._createPromiseDecorator(_.SHARE),this._resolvePromiseDecorator(_.SHARE),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.SHARE})),t.promise}},{key:"createPost",value:function(){if(!this.isCreatePostSupported)return Promise.reject();var t=this._getPromiseDecorator(_.CREATE_POST);return t||(t=this._createPromiseDecorator(_.CREATE_POST),this._resolvePromiseDecorator(_.CREATE_POST),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.CREATE_POST})),t.promise}},{key:"addToHomeScreen",value:function(){if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(_.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(_.ADD_TO_HOME_SCREEN),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.ADD_TO_HOME_SCREEN})),t.promise}},{key:"addToFavorites",value:function(){if(!this.isAddToFavoritesSupported)return Promise.reject();var t=this._getPromiseDecorator(_.ADD_TO_FAVORITES);return t||(t=this._createPromiseDecorator(_.ADD_TO_FAVORITES),this._resolvePromiseDecorator(_.ADD_TO_FAVORITES),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.ADD_TO_FAVORITES})),t.promise}},{key:"rate",value:function(){if(!this.isRateSupported)return Promise.reject();var t=this._getPromiseDecorator(_.RATE);return t||(t=this._createPromiseDecorator(_.RATE),this._resolvePromiseDecorator(_.RATE),$u(this,pl,wl).call(this,{type:e.SOCIAL,action:_.RATE})),t.promise}},{key:"paymentsPurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsGetProductPlatformData(t);if(!n)return Promise.reject();var o=this._getPromiseDecorator(_.PURCHASE);return o||(o=this._createPromiseDecorator(_.PURCHASE),$u(this,hl,Pl).call(this,e.PAYMENTS,_.PURCHASE,{options:{product:n}}).then((function(e){var n=e.purchase;if(n&&"object"===Uu(n))if(null!=n&&n.status){var o=Fu({id:t},n.purchaseData);r._paymentsPurchases.push(o),r._resolvePromiseDecorator(_.PURCHASE,o)}else r._rejectPromiseDecorator(_.PURCHASE,(null==n?void 0:n.error)||new Error("Unknown purchase error"));else r._rejectPromiseDecorator(_.PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsConsumePurchase",value:function(t){var r=this;if(!this.isPaymentsSupported)return Promise.reject();var n=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(_.CONSUME_PURCHASE);return o||(o=this._createPromiseDecorator(_.CONSUME_PURCHASE),$u(this,hl,Pl).call(this,e.PAYMENTS,_.CONSUME_PURCHASE,{options:{product:this._paymentsPurchases[n]}}).then((function(e){var o=e.purchase;if(o&&"object"===Uu(o))if(null!=o&&o.status){var i=Fu({id:t},o);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(_.CONSUME_PURCHASE,i)}else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,(null==o?void 0:o.error)||new Error("Unknown consume purchase error"));else r._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error("Invalid purchase"))}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);if(!r){r=this._createPromiseDecorator(_.GET_CATALOG);var n=this._paymentsGetProductsPlatformData();$u(this,hl,Pl).call(this,e.PAYMENTS,_.GET_CATALOG,{options:{products:n}}).then((function(){var e=n.map((function(t){return{id:t.id,price:"".concat(t.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:t.amount}}));t._resolvePromiseDecorator(_.GET_CATALOG,e)}))}return r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this;if(!this.isPaymentsSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_PURCHASES);return r||(r=this._createPromiseDecorator(_.GET_PURCHASES),$u(this,hl,Pl).call(this,e.PAYMENTS,_.GET_PURCHASES,{options:{products:this._paymentsGetProductsPlatformData()}}).then((function(e){var r=e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){return Fu({id:n.find((function(e){return e.id===t.id})).id},t.purchaseData)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)}))),r.promise}},{key:"getRemoteConfig",value:function(){var t=this;if(!this.isRemoteConfigSupported)return Promise.reject();var r=this._getPromiseDecorator(_.GET_REMOTE_CONFIG);return r||(r=this._createPromiseDecorator(_.GET_REMOTE_CONFIG),$u(this,hl,Pl).call(this,e.REMOTE_CONFIG,_.GET_REMOTE_CONFIG).then((function(e){var r=e.result;t._resolvePromiseDecorator(_.GET_REMOTE_CONFIG,r)}))),r.promise}},{key:"clipboardWrite",value:function(t){var r=this;if(!this.isClipboardSupported)return Promise.reject();var n=this._getPromiseDecorator(_.CLIPBOARD_WRITE);return n||(n=this._createPromiseDecorator(_.CLIPBOARD_WRITE),$u(this,hl,Pl).call(this,e.CLIPBOARD,_.CLIPBOARD_WRITE,{options:{text:t}}).then((function(){r._resolvePromiseDecorator(_.CLIPBOARD_WRITE,!0)}))),n.promise}},{key:"clipboardRead",value:function(){var t=this;if(!this.isClipboardSupported)return Promise.reject();var r=this._getPromiseDecorator(nl.CLIPBOARD_READ);return r||(r=this._createPromiseDecorator(nl.CLIPBOARD_READ),$u(this,hl,Pl).call(this,e.CLIPBOARD,nl.CLIPBOARD_READ,{options:{}}).then((function(e){var r=e.text;t._resolvePromiseDecorator(nl.CLIPBOARD_READ,r)}))),r.promise}},{key:"leaderboardsSetScore",value:function(t,r){if(this.leaderboardsType===d)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o={id:t,score:r};$u(this,pl,wl).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var r=this;if(this.leaderboardsType!==y)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return n||(n=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),$u(this,hl,Pl).call(this,e.LEADERBOARDS,_.LEADERBOARDS_GET_ENTRIES,{options:{id:t}},{timeout:5e3}).then((function(t){var e=t.entries;r._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,e)})).catch((function(){r._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES)}))),n.promise}},{key:"leaderboardsShowNativePopup",value:function(t){return this.leaderboardsType!==v?Promise.reject(new Error("Leaderboards are not available")):($u(this,pl,wl).call(this,{type:e.LEADERBOARDS,action:_.LEADERBOARDS_SHOW_NATIVE_POPUP,options:{id:t}}),Promise.resolve(_.LEADERBOARDS_SHOW_NATIVE_POPUP))}},{key:"unlockAchievement",value:function(t){return this.isAchievementsSupported?$u(this,hl,Pl).call(this,e.ACHIEVEMENTS,nl.UNLOCK_ACHIEVEMENT,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"getAchievementsList",value:function(t){return this.isGetAchievementsListSupported?$u(this,hl,Pl).call(this,e.ACHIEVEMENTS,nl.GET_ACHIEVEMENTS,{options:t}).then((function(t){return t.result})):Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return this.isAchievementsNativePopupSupported?($u(this,pl,wl).call(this,{type:e.ACHIEVEMENTS,action:nl.SHOW_ACHIEVEMENTS_NATIVE_POPUP}),Promise.resolve()):Promise.reject()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(t){return Fu({id:t.id},t.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(t){var e=this._options.payments;if(!e)return null;var r=e.find((function(e){return e.id===t}));return r?Fu({id:r.id},r.playgama):null}}])&&Vu(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),f}(Uo);function gl(t){var e,r,n,o,i;this._supportedFeatures=t.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes(al);var a=t.config,s=void 0===a?{}:a;this._deviceType=null!==(e=s.deviceType)&&void 0!==e?e:Yu(Ju(Cu.prototype),"deviceType",this),this._platformLanguage=s.platformLanguage?s.platformLanguage.toLowerCase():Yu(Ju(Cu.prototype),"platformLanguage",this),this._platformTld=null!==(r=s.platformTld)&&void 0!==r?r:Yu(Ju(Cu.prototype),"platformTld",this),this._platformPayload=null!==(n=s.platformPayload)&&void 0!==n?n:Yu(Ju(Cu.prototype),"platformPayload",this),this._leaderboardsType=null!==(o=s.leaderboardsType)&&void 0!==o?o:d,this._internalStoragePolicy=null!==(i=s.internalStoragePolicy)&&void 0!==i?i:rl.AUTHORIZED_ONLY,this._paymentsPurchases=t.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE),$u(this,vl,Il).call(this),$u(this,pl,wl).call(this,{type:"liveness",action:nl.LIVENESS_PING,options:{version:"1.28.0-preview.2"}})}function Sl(t){this._setAudioState(t.options.isEnabled)}function bl(t){this._setPauseState(t.options.isPaused)}function El(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(t){var e={};return i.forEach((function(r){r in t&&(e[r]=t[r])})),e}));return $u(this,pl,wl).call(this,{type:e.PLATFORM,action:nl.GET_PERFORMANCE_RESOURCES,id:t,options:{resources:a}}),Promise.resolve(o)}function wl(t){Qu(this,sl).send(Fu({source:el},t))}function Pl(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Qu(this,sl).generateMessageId(),a=Fu({timeout:0},o);return new Promise((function(s,c){var u=function n(o){var a=o.data;(null==a?void 0:a.type)===t&&(null==a?void 0:a.action)===e&&(null==a?void 0:a.id)===i&&(null==a?void 0:a.source)!==el&&(Qu(r,sl).removeListener(n),s(a))};Qu(r,sl).addListener(u),$u(r,pl,wl).call(r,Fu({type:t,action:e,id:i,options:o},n)),a.timeout>0&&setTimeout((function(){c(new Error("Request timeout")),Qu(r,sl).removeListener(u)}),a.timeout)}))}function Al(){return Ol.apply(this,arguments)}function Ol(){var t;return t=xu().mark((function t(){var r=this;return xu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",$u(this,hl,Pl).call(this,e.PLAYER,nl.GET_PLAYER).then((function(t){var e,n=t.player;null!=n&&n.isAuthorized?(r._playerId=n.userId,r._isPlayerAuthorized=n.isAuthorized,r._playerName=n.name,Array.isArray(n.photos)&&(r._playerPhotos=function(t){if(Array.isArray(t))return Mu(t)}(e=n.photos)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return Mu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mu(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=n,$u(r,vl,Il).call(r)):r._playerApplyGuestData()})).catch((function(){r._playerApplyGuestData()})));case 1:case"end":return t.stop()}}),t,this)})),Ol=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bu(i,n,o,a,s,"next",t)}function s(t){Bu(i,n,o,a,s,"throw",t)}a(void 0)}))},Ol.apply(this,arguments)}function Tl(t){var e=t.action,r=t.payload;if("interstitial"===e){if(!this.isInterstitialSupported)return;switch(r.status){case"start":this._setInterstitialState(i.LOADING);break;case"open":this._setInterstitialState(i.OPENED);break;case"failed":this._setInterstitialState(i.FAILED);break;case"close":this._setInterstitialState(i.CLOSED)}}else if("reward"===e){if(!this.isRewardedSupported)return;switch(r.status){case"start":this._setRewardedState(a.LOADING);break;case"open":this._setRewardedState(a.OPENED);break;case"rewarded":this._setRewardedState(a.REWARDED);break;case"close":this._setRewardedState(a.CLOSED);break;case"failed":this._setRewardedState(a.FAILED)}}}function kl(){return this._internalStoragePolicy===rl.AUTHORIZED_ONLY&&this._isPlayerAuthorized||this._internalStoragePolicy===rl.ALWAYS}function Il(){$u(this,ml,kl).call(this)?this._defaultStorageType=u.PLATFORM_INTERNAL:this._defaultStorageType=u.LOCAL_STORAGE}Cu=_l;const Dl=_l;function Rl(t){return Rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(t)}function Ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jl(n.key),n)}}function jl(t){var e=function(t,e){if("object"!=Rl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Rl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rl(e)?e:String(e)}function Nl(){return Nl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Nl.apply(this,arguments)}function Cl(t,e){return Cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cl(t,e)}function Gl(t){return Gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gl(t)}const xl=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cl(t,e)}(u,e);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gl(o);if(s){var r=Gl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return t.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Y("PokiSDK","init").then((function(){t._platformSdk=window.PokiSDK,t._platformSdk.init().then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))}))),e.promise}},{key:"sendMessage",value:function(t){switch(t){case h.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case h.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case h.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return Nl(Gl(u.prototype),"sendMessage",this).call(this,t)}}},{key:"showInterstitial",value:function(){var t=this,e=!1;this._platformSdk.commercialBreak((function(){e=!0,t._setInterstitialState(i.OPENED)})).then((function(){e?t._setInterstitialState(i.CLOSED):t._setInterstitialState(i.FAILED)})).catch((function(e){t._setInterstitialState(i.FAILED,e)}))}},{key:"showRewarded",value:function(){var t=this,e=!1;this._platformSdk.rewardedBreak((function(){e=!0,t._setRewardedState(a.OPENED)})).then((function(r){e?(r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(e){t._setRewardedState(a.FAILED,e)}))}}])&&Ll(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Uo);function Ml(t){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(t)}function Bl(){Bl=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ml(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ml(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Hl(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Fl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hl(i,n,o,a,s,"next",t)}function s(t){Hl(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ul(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=zl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zl(n.key),n)}}function zl(t){var e=function(t,e){if("object"!=Ml(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ml(e)?e:String(e)}function Zl(){return Zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Zl.apply(this,arguments)}function Yl(t,e){return Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yl(t,e)}function Jl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kl(t){return Kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kl(t)}function ql(t,e){Ql(t,e),e.add(t)}function Xl(t,e,r){Ql(t,e),e.set(t,r)}function Ql(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $l(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,rf(t,e,"set"),r),r}function tf(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ef(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,rf(t,e,"get"))}function rf(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var nf=new WeakMap,of=new WeakMap,af=new WeakSet,sf=new WeakSet,cf=new WeakSet,uf=new WeakSet;function lf(){var t=this;return ef(this,nf)?new Promise((function(e){ef(t,nf).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!1).then((function(){return e()}));case"ready":t._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){t._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!1).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setInterstitialState(i.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!1)}function ff(){var t=this;return ef(this,nf)?new Promise((function(e){ef(t,nf).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!0).then((function(){return e()}));case"ready":t._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){t._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){t._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!0).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setRewardedState(a.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!0)}function pf(t){t?(this._isPlayerAuthorized=!0,this._playerId=t.playerId,this._playerName=t.playerDisplayName,this._playerExtra=t,$l(this,of,"personal"===t.userAccountType.toLowerCase())):this._playerApplyGuestData()}function hf(t){return df.apply(this,arguments)}function df(){return df=Fl(Bl().mark((function t(e){var r,n=arguments;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){t.next=5;break}return t.next=4,this.platformSdk.cloudSave.getDataAsync({gameId:this._options.gameId});case 4:this._platformStorageCachedData=t.sent;case 5:return t.abrupt("return",q(e,this._platformStorageCachedData,r));case 6:case"end":return t.stop()}}),t,this)}))),df.apply(this,arguments)}const yf=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yl(t,e)}(d,e);var r,n,o,c,l,f,p,h=(f=d,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kl(f);if(p){var r=Kl(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ml(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jl(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ql(Jl(t=h.call.apply(h,[this].concat(r))),uf),ql(Jl(t),cf),ql(Jl(t),sf),ql(Jl(t),af),Xl(Jl(t),nf,{writable:!0,value:null}),Xl(Jl(t),of,{writable:!0,value:!1}),t}return r=d,n=[{key:"platformId",get:function(){return t.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return ef(this,of)}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;e=this._createPromiseDecorator(_.INITIALIZE),W("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.21.min.js").then((function(){return Y("$msstart")})).then((function(){t._platformSdk=window.$msstart,t._platformSdk.getSignedInUserAsync().then((function(e){tf(t,cf,pf).call(t,e)})).catch((function(){tf(t,cf,pf).call(t,null)})).finally((function(){t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&W("https://playgama.com/ads/msn.v0.1.js").then((function(){return Y("pgAds")})).then((function(){window.pgAds.init(n).then((function(){$l(t,nf,window.pgAds);var e=t._options.gameId;ef(t,nf).updateTargeting({gameId:e})}))}))}return e.promise}},{key:"authorizePlayer",value:function(){var t=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(e,r){t._platformSdk.signInAsync().then((function(r){tf(t,cf,pf).call(t,r),e()})).catch((function(e){tf(t,cf,pf).call(t,null),r(e)}))}))}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Zl(Kl(d.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Zl(Kl(d.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?tf(this,uf,hf).call(this,t,r):Promise.reject():Zl(Kl(d.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Vl({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n.platformSdk.cloudSave.saveDataAsync({data:i,gameId:n._options.gameId}).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Promise.reject():Zl(Kl(d.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(e,n){var o={};if(Array.isArray(t))for(var i=0;i<t.length;i++)o[t[i]]=null,delete r._platformStorageCachedData[t[i]];else o[t]=null,delete r._platformStorageCachedData[t];r.platformSdk.cloudSave.saveDataAsync({data:o,gameId:r._options.gameId}).then((function(){e()})).catch((function(t){n(t)}))})):Promise.reject():Zl(Kl(d.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"share",value:function(t){var e=this;return new Promise((function(r,n){e._platformSdk.shareAsync(t).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(t,e){var r=this;return new Promise((function(t,n){r._platformSdk.submitGameResultsAsync(e).then(t).catch(n)}))}},{key:"showBanner",value:function(t){var e,r=this;e="top"===t?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([e]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var t=this;this._platformSdk.hideDisplayAdsAsync().then((function(){t._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.loadAdsAsync(!1).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setInterstitialState(i.OPENED),e.showAdsCompletedAsync})).then((function(){return t._setInterstitialState(i.CLOSED)})).catch((function(){return tf(t,af,lf).call(t)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.loadAdsAsync(!0).then((function(e){return t._platformSdk.showAdsAsync(e.instanceId)})).then((function(e){return t._setRewardedState(a.OPENED),e.showAdsCompletedAsync})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return tf(t,sf,ff).call(t)}))}},{key:"paymentsPurchase",value:(l=Fl(Bl().mark((function t(e){var r,n,o,i;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._paymentsGetProductPlatformData(e)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.PURCHASE)){t.next=23;break}if(n=this._createPromiseDecorator(_.PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.purchaseAsync({productId:r.platformProductId});case 12:if("IAP_PURCHASE_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:i=Vl(Vl({id:e},o.receipt),{},{receiptSignature:o.receiptSignature}),this._paymentsPurchases.push(i),this._resolvePromiseDecorator(_.PURCHASE,i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),this._rejectPromiseDecorator(_.PURCHASE,t.t0);case 23:return t.abrupt("return",n.promise);case 24:case"end":return t.stop()}}),t,this,[[6,20]])}))),function(t){return l.apply(this,arguments)})},{key:"paymentsConsumePurchase",value:(c=Fl(Bl().mark((function t(e){var r,n,o,i;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=this._paymentsPurchases.findIndex((function(t){return t.id===e})))<0)){t.next=3;break}return t.abrupt("return",Promise.reject());case 3:if(n=this._getPromiseDecorator(_.CONSUME_PURCHASE)){t.next=24;break}if(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),t.prev=6,this._isPlayerAuthorized){t.next=10;break}return t.next=10,this.authorizePlayer();case 10:return t.next=12,this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].productId});case 12:if("IAP_CONSUME_FAILURE"!==(o=t.sent).code){t.next=15;break}throw new Error(o.description);case 15:this._paymentsPurchases.splice(r,1),delete(i=Vl(Vl({id:e},o.consumptionReceipt),{},{consumptionSignature:o.consumptionSignature})).productId,this._resolvePromiseDecorator(_.CONSUME_PURCHASE,i),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),this._rejectPromiseDecorator(_.CONSUME_PURCHASE,t.t0);case 24:return t.abrupt("return",n.promise);case 25:case"end":return t.stop()}}),t,this,[[6,21]])}))),function(t){return c.apply(this,arguments)})},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=e.map((function(t){var e=r.find((function(e){return e.productId===t.platformProductId}));return{id:t.id,title:e.title,description:e.description,publisherName:e.publisherName,inAppOfferToken:e.inAppOfferToken,isConsumable:e.isConsumable,price:"".concat(e.price.listPrice," ").concat(e.price.currencyCode," "),priceCurrencyCode:e.price.currencyCode,priceValue:e.price.listPrice}}));t._resolvePromiseDecorator(_.GET_CATALOG,n)}else t._rejectPromiseDecorator(_.GET_CATALOG,r.description)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:(o=Fl(Bl().mark((function t(){var e,r,n;return Bl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._getPromiseDecorator(_.GET_PURCHASES)){t.next=20;break}if(e=this._createPromiseDecorator(_.GET_PURCHASES),t.prev=3,this._isPlayerAuthorized){t.next=7;break}return t.next=7,this.authorizePlayer();case 7:return t.next=9,this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId});case 9:if("IAP_GET_ALL_PURCHASES_FAILURE"!==(r=t.sent).code){t.next=12;break}throw new Error(r.description);case 12:n=this._paymentsGetProductsPlatformData(),this._paymentsPurchases=r.receipts.map((function(t){return Vl(Vl({id:n.find((function(e){return e.platformProductId===t.productId})).id},t),{},{receiptSignature:r.receiptSignature})})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),this._rejectPromiseDecorator(_.GET_PURCHASES,t.t0);case 20:return t.abrupt("return",e.promise);case 21:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return o.apply(this,arguments)})}],n&&Wl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(Uo);function mf(t){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(t)}function vf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vf(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Sf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sf(n.key),n)}}function Sf(t){var e=function(t,e){if("object"!=mf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mf(e)?e:String(e)}function bf(t,e){return bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bf(t,e)}function Ef(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wf(t){return wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wf(t)}function Pf(t,e){Af(t,e),e.add(t)}function Af(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Of(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Tf(t,e,"get"))}function Tf(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function kf(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var If=new WeakMap,Df=new WeakSet,Rf=new WeakSet,Lf=new WeakSet,jf=new WeakSet,Nf=new WeakSet,Cf=new WeakSet,Gf=new WeakSet;function xf(t,e){var r;r=JSON.stringify({action:t,data:e}),window.chrome&&window.chrome.webview&&"function"==typeof window.chrome.webview.postMessage&&window.chrome.webview[V](r)}function Mf(){var t=this;window.chrome.webview.addEventListener("message",(function(e){try{var r;"string"==typeof e.data&&(r=JSON.parse(e.data));var n=(r||{}).action;n===_.INITIALIZE?kf(t,Lf,Bf).call(t,r):n===_.GET_CATALOG?kf(t,jf,Hf).call(t,r):n===_.PURCHASE?kf(t,Nf,Ff).call(t,r):n===_.CONSUME_PURCHASE?kf(t,Cf,Uf).call(t,r):n===_.GET_PURCHASES&&kf(t,Gf,Vf).call(t,r)}catch(t){console.error("Error parsing Microsoft Store message:",t)}}))}function Bf(t){t&&!1===t.success?this._rejectPromiseDecorator(_.INITIALIZE,new Error(t)):(this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE,t))}function Hf(t){if(t&&!1!==t.success){var e=this._paymentsGetProductsPlatformData().map((function(e){var r,n=null===(r=t.data)||void 0===r?void 0:r.find((function(t){return t.id===e.platformProductId})),o=Q(null==n?void 0:n.price.formattedPrice),i=(null==n?void 0:n.price.currencyCode)||null,a="".concat(o," ").concat(i);return{id:e.id,title:null==n?void 0:n.title,description:null==n?void 0:n.description,price:a,priceValue:o,priceCurrencyCode:i}}));this._resolvePromiseDecorator(_.GET_CATALOG,e)}else this._rejectPromiseDecorator(_.GET_CATALOG,new Error(t))}function Ff(t){if(t&&!1!==t.success){var e=_f({id:t.id},t.data);this._paymentsPurchases.push(e),this._resolvePromiseDecorator(_.PURCHASE,e)}else this._rejectPromiseDecorator(_.PURCHASE,new Error(t))}function Uf(t){if(t&&!1!==t.success){var e=this._paymentsPurchases.findIndex((function(e){return e.purchaseToken===t.purchaseToken||e.id===t.id}));e>=0&&this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,t)}else this._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error(t))}function Vf(t){t&&!1!==t.success?(this._paymentsPurchases=(t.data||[]).map((function(t){var e=_f({},t);return e.id||(e.id=t.productId||t.platformProductId||t.purchaseToken),e})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases)):this._rejectPromiseDecorator(_.GET_PURCHASES,new Error(t))}const Wf=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bf(t,e)}(u,e);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wf(o);if(s){var r=wf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ef(t)}(this,t)});function u(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Pf(Ef(t=c.call.apply(c,[this].concat(i))),Gf),Pf(Ef(t),Cf),Pf(Ef(t),Nf),Pf(Ef(t),jf),Pf(Ef(t),Lf),Pf(Ef(t),Rf),Pf(Ef(t),Df),n={writable:!0,value:null},Af(e=Ef(t),r=If),r.set(e,n),t}return r=u,(n=[{key:"platformId",get:function(){return t.MICROSOFT_STORE}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){e=this._createPromiseDecorator(_.INITIALIZE);try{kf(this,Rf,Mf).call(this),kf(this,Df,xf).call(this,_.INITIALIZE)}catch(t){this._rejectPromiseDecorator(_.INITIALIZE,t)}W("https://playgama.com/ads/msn.v0.1.js").then((function(){return Y("pgAds")})).then((function(){window.pgAds.init("msn-store").then((function(){var e,r,n;e=t,r=If,n=window.pgAds,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(e,Tf(e,r,"set"),n);var o=t._options.gameId;Of(t,If).updateTargeting({gameId:o})}))}))}return e.promise}},{key:"showInterstitial",value:function(){var t=this;return Of(this,If)?new Promise((function(e){Of(t,If).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!1).then((function(){return e()}));case"ready":t._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){t._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!1).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setInterstitialState(i.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!1)}},{key:"showRewarded",value:function(){var t=this;return Of(this,If)?new Promise((function(e){Of(t,If).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void t._advertisementShowErrorPopup(!0).then((function(){return e()}));case"ready":t._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){t._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){t._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){t._advertisementShowErrorPopup(!0).then((function(){return e()}))})),r.addEventListener("closed",(function(){t._setRewardedState(a.CLOSED),e()}))}))})):this._advertisementShowErrorPopup(!0)}},{key:"paymentsPurchase",value:function(t){var e=this._paymentsGetProductPlatformData(t);if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.PURCHASE);return r||(r=this._createPromiseDecorator(_.PURCHASE),kf(this,Df,xf).call(this,_.PURCHASE,e.platformProductId)),r.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t})),r=this._paymentsGetProductPlatformData(t);if(e<0||!r)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),kf(this,Df,xf).call(this,_.CONSUME_PURCHASE,r.platformProductId)),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=this._getPromiseDecorator(_.GET_CATALOG);return e||(e=this._createPromiseDecorator(_.GET_CATALOG),kf(this,Df,xf).call(this,_.GET_CATALOG,t.map((function(t){return t.platformProductId})))),e.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),kf(this,Df,xf).call(this,_.GET_PURCHASES)),t.promise}}])&&gf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Uo);function zf(t){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(t)}function Zf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zf(Object(r),!0).forEach((function(e){tp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ep(n.key),n)}}function Kf(){return Kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Kf.apply(this,arguments)}function qf(t,e){return qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qf(t,e)}function Xf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qf(t){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qf(t)}function $f(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function tp(t,e,r){return(e=ep(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ep(t){var e=function(t,e){if("object"!=zf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zf(e)?e:String(e)}function rp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var np=new WeakSet,op=new WeakSet,ip=new WeakSet,ap=new WeakSet,sp=new WeakSet,cp=new WeakSet,up=new WeakSet,lp=new WeakSet,fp=new WeakSet,pp=new WeakSet,hp=new WeakSet,dp=new WeakSet,yp=new WeakSet;function mp(t,e){var r;r=JSON.stringify({action:t,data:e}),window.system&&window.system[V](r)}function vp(){if(window.system){var t=this;window.system.onmessage=function(e){try{var r=JSON.parse(e),n=r.action,o=r.data;n===_.INITIALIZE?rp(t,ip,_p).call(t,o):n===_.AUTHORIZE_PLAYER?rp(t,ap,gp).call(t,o):n===_.SET_INTERSTITIAL_STATE?rp(t,sp,Sp).call(t,o):n===_.SET_REWARDED_STATE?rp(t,cp,bp).call(t,o):n===_.GET_CATALOG?rp(t,up,Ep).call(t,o):n===_.PURCHASE?rp(t,lp,wp).call(t,o):n===_.CONSUME_PURCHASE?rp(t,fp,Pp).call(t,o):n===_.GET_PURCHASES?rp(t,pp,Ap).call(t,o):n===_.GET_STORAGE_DATA?rp(t,hp,Op).call(t,o):n===_.SET_STORAGE_DATA?rp(t,dp,Tp).call(t,o):n===_.DELETE_STORAGE_DATA&&rp(t,yp,kp).call(t,o)}catch(t){console.error("Error parsing Huawei message:",t)}}}}function _p(t){t.success?(this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE,t)):this._rejectPromiseDecorator(_.INITIALIZE,new Error(t))}function gp(t){if(!t.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,new Error(t));this._playerId=t.playerId,this._playerName=t.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)}function Sp(t){Object.values(i).includes(t.state)&&this._setInterstitialState(t.state,t.state===i.FAILED?new Error(t):void 0)}function bp(t){Object.values(a).includes(t.state)&&this._setRewardedState(t.state,t.state===a.FAILED?new Error(t):void 0)}function Ep(t){if(t.success){var e=this._paymentsGetProductsPlatformData().map((function(e){var r=t.data.find((function(t){return t.productId===e.id}));return{id:e.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(_.GET_CATALOG,e)}else this._rejectPromiseDecorator(_.GET_CATALOG,new Error(t))}function wp(t){if(t.success){var e=t.data,r=Yf({id:t.id},e);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(_.PURCHASE,r)}else this._rejectPromiseDecorator(_.PURCHASE,new Error(t))}function Pp(t){if(t.success){var e=this._paymentsPurchases.findIndex((function(e){return e.purchaseToken===t.purchaseToken}));e>=0&&this._paymentsPurchases.splice(e,1),this._resolvePromiseDecorator(_.CONSUME_PURCHASE,t)}else this._rejectPromiseDecorator(_.CONSUME_PURCHASE,new Error(t))}function Ap(t){if(t.success){var e=this._paymentsGetProductsPlatformData();this._paymentsPurchases=t.data.map((function(t){var r=JSON.parse(t),n=Yf({id:e.find((function(t){return t.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(_.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(_.GET_PURCHASES,new Error(t))}function Op(t){t.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.GET_STORAGE_DATA,new Error(t))}function Tp(t){t.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.SET_STORAGE_DATA,new Error(t))}function kp(t){t.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA,t.data):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA,new Error(t))}const Ip=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qf(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qf(o);if(i){var r=Qf(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xf(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return $f(Xf(t=a.call.apply(a,[this].concat(r))),yp),$f(Xf(t),dp),$f(Xf(t),hp),$f(Xf(t),pp),$f(Xf(t),fp),$f(Xf(t),lp),$f(Xf(t),up),$f(Xf(t),cp),$f(Xf(t),sp),$f(Xf(t),ap),$f(Xf(t),ip),$f(Xf(t),op),$f(Xf(t),np),tp(Xf(t),"_defaultStorageType",u.PLATFORM_INTERNAL),t}return r=s,(n=[{key:"platformId",get:function(){return t.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(_.INITIALIZE);return t||(t=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,rp(this,op,vp).call(this),rp(this,np,mp).call(this,_.INITIALIZE,this._appId)):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),t.promise}},{key:"authorizePlayer",value:function(){var t=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),rp(this,np,mp).call(this,_.AUTHORIZE_PLAYER)),t.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Kf(Qf(s.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Kf(Qf(s.prototype),"isStorageAvailable",this).call(this,t)}},{key:"setDataToStorage",value:function(t,e,r){if(r!==u.PLATFORM_INTERNAL)return Kf(Qf(s.prototype),"setDataToStorage",this).call(this,t,e,r);var n=this._getPromiseDecorator(_.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.SET_STORAGE_DATA),rp(this,np,mp).call(this,_.SET_STORAGE_DATA,{key:t,value:e})),n.promise}},{key:"getDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return Kf(Qf(s.prototype),"getDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.GET_STORAGE_DATA),rp(this,np,mp).call(this,_.GET_STORAGE_DATA,t)),r.promise}},{key:"deleteDataFromStorage",value:function(t,e){if(e!==u.PLATFORM_INTERNAL)return Kf(Qf(s.prototype),"deleteDataFromStorage",this).call(this,t,e);var r=this._getPromiseDecorator(_.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),rp(this,np,mp).call(this,_.DELETE_STORAGE_DATA,t)),r.promise}},{key:"showInterstitial",value:function(t){rp(this,np,mp).call(this,_.SHOW_INTERSTITIAL,t)}},{key:"showRewarded",value:function(t){rp(this,np,mp).call(this,_.SHOW_REWARDED,t)}},{key:"paymentsPurchase",value:function(t){if(!this._paymentsGetProductPlatformData(t))return Promise.reject();var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),rp(this,np,mp).call(this,_.PURCHASE,t)),e.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(e<0)return Promise.reject();var r=this._getPromiseDecorator(_.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(_.CONSUME_PURCHASE),rp(this,np,mp).call(this,_.CONSUME_PURCHASE,this._paymentsPurchases[e].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var e=this._getPromiseDecorator(_.GET_CATALOG);return e||(e=this._createPromiseDecorator(_.GET_CATALOG),rp(this,np,mp).call(this,_.GET_CATALOG,t.map((function(t){return t.id})))),e.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),rp(this,np,mp).call(this,_.GET_PURCHASES)),t.promise}}])&&Jf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Uo);function Dp(t){return Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(t)}function Rp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rp(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=xp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jp(){jp=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Dp(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dp(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Np(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Cp(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Np(i,n,o,a,s,"next",t)}function s(t){Np(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Gp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xp(n.key),n)}}function xp(t){var e=function(t,e){if("object"!=Dp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dp(e)?e:String(e)}function Mp(){return Mp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Mp.apply(this,arguments)}function Bp(t,e){return Bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bp(t,e)}function Hp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fp(t){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fp(t)}var Up=new WeakSet;function Vp(){var t=this,e={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=e[r];n&&(t._setRewardedState(n),n===a.REWARDED&&t._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(e){var n=r[e];n&&t._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(e){var r=n[e];r&&t._setBannerState(r)}))}const Wp=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bp(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fp(a);if(s){var r=Fp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hp(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Hp(t=c.call.apply(c,[this].concat(o))),r=Up),r.add(e),t}return r=l,n=[{key:"platformId",get:function(){return t.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e){var r;switch(e=this._createPromiseDecorator(_.INITIALIZE),new URLSearchParams(window.location.search).get("target")){case"prod":default:r="https://app.bitquest.games/bqsdk.min.js";break;case"stage":r="https://app-stage.bitquest.games/bqsdk.min.js";break;case"bank":r="https://app-global.memebeat.io/bqsdk.min.js"}W(r).then((function(){Y("bq").then((function(){t._platformSdk=window.bq,t._platformSdk.initialize().then((function(){t._platformSdk.platform.sendMessage("game_ready");var e=t._platformSdk.player,r=e.id,n=void 0===r?null:r,o=e.name,i=void 0===o?"":o;t._playerId=n,t._playerName=i,t._isPlayerAuthorized=!0,t._defaultStorageType=u.PLATFORM_INTERNAL,t._playerExtra=e,function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(t,Up,Vp).call(t),t.showPreRoll(),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))}return e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Mp(Fp(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Mp(Fp(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return n._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return this._platformSdk.storage.get(t,"platform_internal").then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return Mp(Fp(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=Cp(jp().mark((function t(e,r,n){return jp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return t.next=3,this._platformSdk.storage.set(e,r,"platform_internal");case 3:return t.abrupt("return");case 4:return t.next=6,Mp(Fp(l.prototype),"setDataToStorage",this).call(this,e,r,n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Cp(jp().mark((function t(e,r){var n;return jp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=13;break}if(!Array.isArray(e)){t.next=10;break}n=0;case 3:if(!(n<e.length)){t.next=9;break}return t.next=6,this._platformSdk.storage.delete(e[n],"platform_internal");case 6:n++,t.next=3;break;case 9:return t.abrupt("return");case 10:return t.next=12,this._platformSdk.storage.delete(e,"platform_internal");case 12:return t.abrupt("return");case 13:return t.next=15,Mp(Fp(l.prototype),"deleteDataFromStorage",this).call(this,e,r);case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._getPromiseDecorator(_.PURCHASE);return r||(r=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.payment.purchase(t).then((function(r){var n=Lp({id:t},r.purchaseData);delete n.productID,e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var t,e=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(t=this._platformSdk)||void 0===t||!t.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(_.GET_CATALOG);return n||(n=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(t){if(!Array.isArray(t))throw new Error("Catalog response is not an array");var n=r.map((function(e){var r=t.find((function(t){return t.purchaseId===e.id}));return r?{id:e.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);e._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(_.GET_CATALOG,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(t).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(e){var r=null==e?void 0:e.purchases,n=t._paymentsGetProductsPlatformData();t._paymentsPurchases=r.map((function(t){var e=n.find((function(e){return e.id===t.purchaseId}));if(!e)return null;var r=Lp({id:e.id},t);return delete r.purchaseId,r})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"leaderboardsSetScore",value:function(t,e){var r=this,n=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var o="number"==typeof e?e:parseInt(e,10);this._platformSdk.leaderboard.setScore(t,o).then((function(){r._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){r._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(t){var e=this,r=this._getPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(t).then((function(t){var r=Array.isArray(t)?t:t.entries||t.data||[];e._resolvePromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(t){e._rejectPromiseDecorator(_.LEADERBOARDS_GET_ENTRIES,t)}))),r.promise}},{key:"getServerTime",value:function(){var t=this;return new Promise((function(e){e(t._platformSdk.platform.getServerTime())}))}}],n&&Gp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function zp(t){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(t)}function Zp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xp(n.key),n)}}function Yp(t,e){return Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yp(t,e)}function Jp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kp(t){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kp(t)}function qp(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Xp(t){var e=function(t,e){if("object"!=zp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zp(e)?e:String(e)}function Qp(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var $p=new WeakSet,th=new WeakSet,eh=new WeakSet;function rh(){var t=this;this._platformSdk.ads.on("rewarded:start",(function(){t._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(e){e||t._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)}))}function nh(){var t=this;this._platformSdk.ads.on("fullscreen:start",(function(){t._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){t._setInterstitialState(i.CLOSED)}))}function oh(){var t=this;this._platformSdk.ads.on("sticky:render",(function(){t._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){t._setBannerState(s.HIDDEN)}))}const ih=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yp(t,e)}(c,e);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kp(o);if(i){var r=Kp(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jp(t)}(this,t)});function c(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return qp(Jp(t=s.call.apply(s,[this].concat(o))),eh),qp(Jp(t),th),qp(Jp(t),$p),e=Jp(t),!0,(r=Xp(r="_isBannerSupported"))in e?Object.defineProperty(e,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[r]=true,t}return r=c,(n=[{key:"platformId",get:function(){return t.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(_.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);W(r).then((function(){Y("GamePush").then((function(){var e;t._platformSdk=window.GamePush;var r=null===(e=t._platformSdk)||void 0===e?void 0:e.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;t._isPlayerAuthorized=!0,t._playerId=o,t._playerName=a,c&&t._playerPhotos.push(c)}else t._playerApplyGuestData();t._isInitialized=!0,Qp(t,th,nh).call(t),Qp(t,$p,rh).call(t),Qp(t,eh,oh).call(t),t._resolvePromiseDecorator(_.INITIALIZE)}))}))}else this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND);return e.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.ads.showRewardedVideo().catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var t=this;return new Promise((function(e){t._platformSdk.ads.isAdblockEnabled().then((function(t){e(t)}))}))}}])&&Zp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Uo);function ah(t){return ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(t)}function sh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ch(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sh(Object(r),!0).forEach((function(e){hh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dh(n.key),n)}}function lh(t,e){return lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lh(t,e)}function fh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ph(t){return ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ph(t)}function hh(t,e,r){return(e=dh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dh(t){var e=function(t,e){if("object"!=ah(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ah(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ah(e)?e:String(e)}var yh="https://discord.com/api/v10";const mh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e)}(s,e);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ph(o);if(i){var r=ph(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ah(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fh(t)}(this,t)});function s(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return hh(fh(t=a.call.apply(a,[this].concat(r))),"_appId",null),hh(fh(t),"_accessToken",null),t}return r=s,(n=[{key:"platformId",get:function(){return t.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.appId?(this._appId=this._options.appId,W("/cdn/discord/discord-v2.0.0.min.js").then((function(){Y("discord","DiscordSDK").then((function(){return t._platformSdk=new window.discord.DiscordSDK(t._appId),t._platformSdk.ready()})).then((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)}))}))):this._rejectPromiseDecorator(_.INITIALIZE,g.DISCORD_GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"authorizePlayer",value:function(t){var e=this,r=(null==t?void 0:t.scope)||["identify"],n=this._getPromiseDecorator(_.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(_.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(t){var r=t.code;return fetch("".concat("/api","/discord/auth-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r,appId:e._appId})})})).then((function(t){return t.json()})).then((function(t){return e._accessToken=t.accessToken,e._playerExtra={token:t.token,accessToken:e._accessToken,channelId:e._platformSdk.channelId},e._platformSdk.commands.authenticate({access_token:e._accessToken})})).then((function(t){if(null===t)throw e._playerApplyGuestData(),new Error("Authorization failed");return fetch("".concat(yh,"/users/@me"),{method:"GET",headers:{Authorization:"Bearer ".concat(e._accessToken),"Content-Type":"application/json"}})})).then((function(t){return t.json()})).then((function(t){e._playerId=t.id,e._playerName=t.username,t.avatar&&e._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png")),e._playerExtra=ch(ch({},e._playerExtra),t),e._isPlayerAuthorized=!0,e._resolvePromiseDecorator(_.AUTHORIZE_PLAYER)})).catch((function(t){e._playerApplyGuestData(),e._accessToken=null,e._rejectPromiseDecorator(_.AUTHORIZE_PLAYER,t)}))),n.promise}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t);if(!r)return Promise.reject();var n=this._getPromiseDecorator(_.PURCHASE);return n||(n=this._createPromiseDecorator(_.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=ch({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(t){var e=this,r=this._paymentsPurchases.findIndex((function(e){return e.id===t}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(_.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(_.CONSUME_PURCHASE),fetch("".concat(yh,"/applications/").concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){e._paymentsPurchases.splice(r,1),e._resolvePromiseDecorator(_.CONSUME_PURCHASE,{id:t})})).catch((function(t){e._rejectPromiseDecorator(_.CONSUME_PURCHASE,t)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=e.map((function(t){var e,r=n.find((function(e){return e.id===t.platformProductId})),o=Q(window.discord.PriceUtils.formatPrice(r.price)),i=null===(e=r.price)||void 0===e||null===(e=e.currency)||void 0===e?void 0:e.toUpperCase(),a="".concat(o," ").concat(i);return{id:t.id,title:r.name,price:a,priceValue:o,priceCurrencyCode:i}}));t._resolvePromiseDecorator(_.GET_CATALOG,o)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.entitlements.map((function(t){return ch({id:r.find((function(e){return e.id===t.id})).id},t)})),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}},{key:"inviteFriends",value:function(){var t=this,e=this._getPromiseDecorator(_.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(_.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){t._resolvePromiseDecorator(_.INVITE_FRIENDS)})).catch((function(e){t._rejectPromiseDecorator(_.INVITE_FRIENDS,e)}))),e.promise}},{key:"share",value:function(t){var e=this;if(!t.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(_.SHARE);return r||(r=this._createPromiseDecorator(_.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:t.mediaUrl}).then((function(){e._resolvePromiseDecorator(_.SHARE)})).catch((function(t){e._rejectPromiseDecorator(_.SHARE,t)}))),r.promise}}])&&uh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Uo);function vh(t){return vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(t)}function _h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_h(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=bh(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bh(n.key),n)}}function bh(t){var e=function(t,e){if("object"!=vh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vh(e)?e:String(e)}function Eh(){return Eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ah(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Eh.apply(this,arguments)}function wh(t,e){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wh(t,e)}function Ph(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ah(t){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ah(t)}function Oh(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Th(t,e,"get"))}function Th(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var kh=new WeakMap;const Ih=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wh(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ah(o);if(s){var r=Ah(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===vh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ph(t)}(this,t)});function l(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=Ph(t=c.call.apply(c,[this].concat(i))),n={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,r=kh),r.set(e,n),t}return r=l,(n=[{key:"platformId",get:function(){return t.YOUTUBE}},{key:"platformLanguage",get:function(){return Oh(this,kh)?Oh(this,kh):Eh(Ah(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),Y("ytgame").then((function(){t._platformSdk=window.ytgame,t._defaultStorageType=u.PLATFORM_INTERNAL;var e=t._platformSdk.system.getLanguage().then((function(e){var r,n,o;r=t,n=kh,o=e.length>2?e.slice(0,2):e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r,Th(r,n,"set"),o)}));t._platformStorageCachedData={};var r=t._platformSdk.game.loadData().then((function(e){"string"==typeof e&&""!==e&&(t._platformStorageCachedData=JSON.parse(e))}));t._platformSdk.system.onAudioEnabledChange((function(e){t._setAudioState(e)})),t._platformSdk.system.onPause((function(){t._setPauseState(!0)})),t._platformSdk.system.onResume((function(){t._setPauseState(!1)})),Promise.all([e,r]).finally((function(){t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE),t._platformSdk.game.firstFrameReady()}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||Eh(Ah(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||Eh(Ah(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(t)){for(var i=[],a=0;a<t.length;a++){var s=void 0===n._platformStorageCachedData[t[a]]?null:n._platformStorageCachedData[t[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(t){}i.push(s)}e(i)}else{var c=void 0===n._platformStorageCachedData[t]?null:n._platformStorageCachedData[t];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(t){}e(c)}})).catch((function(){o()}))})):Eh(Ah(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?gh({},n._platformStorageCachedData):{};if(Array.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=e[a];else i[t]=e;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(t){o(t)}))})):Eh(Ah(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;return e===u.PLATFORM_INTERNAL?new Promise((function(e,n){var o=null!==r._platformStorageCachedData?gh({},r._platformStorageCachedData):{};if(Array.isArray(t))for(var i=0;i<t.length;i++)delete o[t[i]];else delete o[t];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,e()})).catch((function(t){n(t)}))})):Eh(Ah(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Eh(Ah(l.prototype),"sendMessage",this).call(this,t)}},{key:"showInterstitial",value:function(){var t=this;this._setInterstitialState(i.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._setRewardedState(a.OPENED),this._platformSdk.ads.requestInterstitialAd().then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(t,e,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(_.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(_.LEADERBOARDS_SET_SCORE);var i="string"==typeof e?parseInt(e,10):e;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(_.LEADERBOARDS_SET_SCORE)})).catch((function(t){n._rejectPromiseDecorator(_.LEADERBOARDS_SET_SCORE,t)}))}return o.promise}}])&&Sh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function Dh(t){return Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(t)}var Rh=["gamer_id","gamer_name","gamer_avatar_url"];function Lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mh(n.key),n)}}function jh(t,e){return jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jh(t,e)}function Nh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ch(t){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ch(t)}function Gh(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function xh(t,e,r){return(e=Mh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mh(t){var e=function(t,e){if("object"!=Dh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dh(e)?e:String(e)}function Bh(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var Hh=new WeakSet,Fh=new WeakSet;function Uh(){var t=this,e=this;return this._preloadInterstitialPromise||(this._preloadInterstitialPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Interstitial)||"Interstitial",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadInterstitialPromise=null,n(new Error(t))}})}))),this._preloadInterstitialPromise}function Vh(){var t=this,e=this;return this._preloadRewardedPromise||(this._preloadRewardedPromise=new Promise((function(r,n){var o;t._platformSdk.cacheAd((null===(o=window)||void 0===o?void 0:o.AdType.Rewarded)||"Rewarded",{onAdPrepared:r,onAdFailedToLoad:function(t){e._preloadRewardedPromise=null,n(new Error(t))}})}))),this._preloadRewardedPromise}const Wh=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jh(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ch(o);if(c){var r=Ch(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nh(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Gh(Nh(t=u.call.apply(u,[this].concat(r))),Fh),Gh(Nh(t),Hh),xh(Nh(t),"_preloadInterstitialPromise",null),xh(Nh(t),"_preloadRewardedPromise",null),xh(Nh(t),"_isBannerAvailable",!1),t}return r=l,(n=[{key:"platformId",get:function(){return t.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),window.onSdkReady=function(){if(t._platformSdk=window.JioGames,t._platformSdk.playerInfo){var e=t._platformSdk.playerInfo,r=e.gamer_id,n=e.gamer_name,o=e.gamer_avatar_url,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(e,Rh);t.playerId=r||null,t.playerName=n||null,o&&t.playerPhotos.push(o),t.playerExtra=i,t._isPlayerAuthorized=!0}t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)},window.onBannerReady=function(){t._isBannerAvailable=!0},W("https://jiogames.akamaized.net/gameSDK/jiogames/stable/v2.0/jiogames_sdk.js",this._options.adTestMode?{"data-jg-test-environment":"on"}:{}).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,JSON.stringify(e))}))),e.promise}},{key:"preloadInterstitial",value:function(){Bh(this,Hh,Uh).call(this)}},{key:"showInterstitial",value:function(){var t=this;Bh(this,Hh,Uh).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Interstitial,{onAdClosed:function(){t._setInterstitialState(i.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setInterstitialState(i.FAILED)}}),t._setInterstitialState(i.OPENED),t._preloadInterstitialPromise=null}))}},{key:"preloadRewarded",value:function(){Bh(this,Fh,Vh).call(this)}},{key:"showRewarded",value:function(){var t=this;Bh(this,Fh,Vh).call(this).then((function(){var e;t._platformSdk.showAd(null===(e=window.AdType)||void 0===e?void 0:e.Rewarded,{onAdClosed:function(e){e&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)},onAdFailedToLoad:function(e){console.error(e),t._setRewardedState(a.FAILED)}}),t._setRewardedState(a.OPENED),t._preloadRewardedPromise=null}))}},{key:"showBanner",value:function(t){var e,r=this;this._isBannerAvailable?null===(e=window.JGBanner)||void 0===e||e.loadBanner().then((function(){var e,n;r._setBannerState(s.SHOWN),null===(e=window.JGBanner)||void 0===e||e.showBanner(t||(null===(n=window.BannerPosition)||void 0===n?void 0:n.TOP))})).catch((function(t){console.error(t),r._setBannerState(s.FAILED)})):this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){var t;null===(t=window.JGBanner)||void 0===t||t.hideBanner(),this._setBannerState(s.HIDDEN)}},{key:"leaderboardsSetScore",value:function(t,e,r){if(!r)return Promise.reject();var n="string"==typeof e?parseInt(e,10):e;return this._platformSdk.postScore(n),Promise.resolve()}}])&&Lh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function zh(t){return zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(t)}function Zh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zh(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Kh(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kh(n.key),n)}}function Kh(t){var e=function(t,e){if("object"!=zh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zh(e)?e:String(e)}function qh(){return qh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qh.apply(this,arguments)}function Xh(t,e){return Xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xh(t,e)}function Qh(t){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qh(t)}const $h=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xh(t,e)}(l,e);var r,n,o,s,c=(o=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qh(o);if(s){var r=Qh(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(n=[{key:"platformId",get:function(){return t.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||qh(Qh(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(e=this._createPromiseDecorator(_.INITIALIZE),W("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){Y("PortalSDK").then((function(){t._platformSdk=window.PortalSDK,t._platformSdk.initialize().then((function(){t._platformSdk.initializeOverlay(),t._defaultStorageType=u.PLATFORM_INTERNAL,t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)}))}))}))),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||qh(Qh(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL||qh(Qh(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){var n=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t){return Promise.resolve(n._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(t)).then((function(t){var e=t;if(r&&"string"==typeof t)try{e=JSON.parse(t)}catch(t){}return e}))}return qh(Qh(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:function(t,e,r){var n=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var o=t.map((function(t,r){return Promise.resolve(n._platformSdk.setValue(t,e[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(t,e))}return qh(Qh(l.prototype),"setDataToStorage",this).call(this,t,e,r)}},{key:"deleteDataFromStorage",value:function(t,e){var r=this;if(e===u.PLATFORM_INTERNAL){if(Array.isArray(t)){var n=t.map((function(t){return Promise.resolve(r._platformSdk.removeValue(t))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(t))}return qh(Qh(l.prototype),"deleteDataFromStorage",this).call(this,t,e)}},{key:"showInterstitial",value:function(){var t=this;this._platformSdk.requestAd().then((function(){t._setInterstitialState(i.OPENED),t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var t=this;this._platformSdk.requestRewardAd().then((function(e){e?(t._setRewardedState(a.OPENED),t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)):t._setRewardedState(a.FAILED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):qh(Qh(l.prototype),"sendMessage",this).call(this,t)}},{key:"paymentsPurchase",value:function(t){var e=this,r=this._paymentsGetProductPlatformData(t),n=this._getPromiseDecorator(_.PURCHASE);if(!n){n=this._createPromiseDecorator(_.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(t){var r=t.find((function(t){return t&&t.id===o}));if(!r)throw new Error("Shop item not found in catalog");return e._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=Yh({id:t},r);e._paymentsPurchases.push(n),e._resolvePromiseDecorator(_.PURCHASE,n)})).catch((function(t){e._rejectPromiseDecorator(_.PURCHASE,t)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var t=this,e=this._paymentsGetProductsPlatformData();if(!e||!Array.isArray(e)||0===e.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(_.GET_CATALOG);return r||(r=this._createPromiseDecorator(_.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=e.map((function(t){var e=t.id,n=r.find((function(t){return t&&t.id===e}));return n?{id:t.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);t._resolvePromiseDecorator(_.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(_.GET_CATALOG,e)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var t=this,e=this._getPromiseDecorator(_.GET_PURCHASES);return e||(e=this._createPromiseDecorator(_.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(e){var r=t._paymentsGetProductsPlatformData();t._paymentsPurchases=e.map((function(t){var e=t.id,n=r.find((function(t){return t.id===e}));return n?Yh({id:n.id},t):null})).filter(Boolean),t._resolvePromiseDecorator(_.GET_PURCHASES,t._paymentsPurchases)})).catch((function(e){t._rejectPromiseDecorator(_.GET_PURCHASES,e)}))),e.promise}}])&&Jh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function td(t){return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(t)}function ed(){ed=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var w=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==td(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var u=f(e,r,n);if("normal"===u.type){if(o=n.done?y:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(td(e)+" is not iterable")}return _.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},P(A.prototype),u(A.prototype,s,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(w),u(w,c,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function rd(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function nd(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rd(i,n,o,a,s,"next",t)}function s(t){rd(i,n,o,a,s,"throw",t)}a(void 0)}))}}function od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,id(n.key),n)}}function id(t){var e=function(t,e){if("object"!=td(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=td(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==td(e)?e:String(e)}function ad(){return ad="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ud(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ad.apply(this,arguments)}function sd(t,e){return sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sd(t,e)}function cd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ud(t)}function ld(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function fd(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}var pd=new WeakSet,hd=new WeakSet,dd=new WeakSet,yd=new WeakSet,md=new WeakSet,vd=new WeakSet,_d=new WeakSet,gd=new WeakSet,Sd=new WeakSet,bd=new WeakSet;function Ed(t){et({type:t,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}},"*")}function wd(t){this._isPlayerAuthorized=t.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=t.playerId,this._playerName=t.playerName,t.playerPhoto&&this._playerPhotos.push(t.playerPhoto),this._defaultStorageType=u.PLATFORM_INTERNAL),this._isInitialized=!0,this._resolvePromiseDecorator(_.INITIALIZE)}function Pd(t){var e,r;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_STORAGE_DATA,null!==(r=t.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(_.GET_STORAGE_DATA)}function Ad(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.SET_STORAGE_DATA):this._rejectPromiseDecorator(_.SET_STORAGE_DATA)}function Od(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(_.DELETE_STORAGE_DATA)}function Td(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.PURCHASE,t.data):this._rejectPromiseDecorator(_.PURCHASE,t.data)}function kd(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_CATALOG,t.data):this._rejectPromiseDecorator(_.GET_CATALOG,t.data)}function Id(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.GET_PURCHASES,t.data):this._rejectPromiseDecorator(_.GET_PURCHASES,t.data)}function Dd(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.CREATE_POST):this._rejectPromiseDecorator(_.CREATE_POST)}function Rd(t){var e;null!==(e=t.data)&&void 0!==e&&e.success?this._resolvePromiseDecorator(_.JOIN_COMMUNITY):this._rejectPromiseDecorator(_.JOIN_COMMUNITY)}const Ld=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sd(t,e)}(l,e);var r,n,o,i,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ud(a);if(s){var r=ud(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===td(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cd(t)}(this,t)});function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return ld(cd(t=c.call.apply(c,[this].concat(r))),bd),ld(cd(t),Sd),ld(cd(t),gd),ld(cd(t),_d),ld(cd(t),vd),ld(cd(t),md),ld(cd(t),yd),ld(cd(t),dd),ld(cd(t),hd),ld(cd(t),pd),t}return r=l,n=[{key:"platformId",get:function(){return t.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(_.INITIALIZE);return e||(window.addEventListener("message",(function(e){if("devvit-message"===e.data.type){var r=e.data.data.message;r.type===_.INITIALIZE?fd(t,hd,wd).call(t,r):r.type===_.GET_STORAGE_DATA?fd(t,dd,Pd).call(t,r):r.type===_.SET_STORAGE_DATA?fd(t,yd,Ad).call(t,r):r.type===_.DELETE_STORAGE_DATA?fd(t,md,Od).call(t,r):r.type===_.GET_CATALOG?fd(t,_d,kd).call(t,r):r.type===_.PURCHASE?fd(t,vd,Td).call(t,r):r.type===_.GET_PURCHASES?fd(t,gd,Id).call(t,r):r.type===_.CREATE_POST?fd(t,Sd,Dd).call(t,r):r.type===_.JOIN_COMMUNITY&&fd(t,bd,Rd).call(t)}})),e=this._createPromiseDecorator(_.INITIALIZE),fd(this,pd,Ed).call(this,_.INITIALIZE)),e.promise}},{key:"isStorageSupported",value:function(t){return t===u.PLATFORM_INTERNAL||ad(ud(l.prototype),"isStorageSupported",this).call(this,t)}},{key:"isStorageAvailable",value:function(t){return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:ad(ud(l.prototype),"isStorageAvailable",this).call(this,t)}},{key:"getDataFromStorage",value:function(t,e,r){if(e===u.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(_.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(_.GET_STORAGE_DATA),fd(this,pd,Ed).call(this,_.GET_STORAGE_DATA,{key:t})),n.promise}return ad(ud(l.prototype),"getDataFromStorage",this).call(this,t,e,r)}},{key:"setDataToStorage",value:(i=nd(ed().mark((function t(e,r,n){var o;return ed().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==u.PLATFORM_INTERNAL){t.next=4;break}return(o=this._getPromiseDecorator(_.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(_.SET_STORAGE_DATA),fd(this,pd,Ed).call(this,_.SET_STORAGE_DATA,{key:e,value:r})),t.abrupt("return",o.promise);case 4:return t.abrupt("return",ad(ud(l.prototype),"setDataToStorage",this).call(this,e,r,n));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=nd(ed().mark((function t(e,r){var n;return ed().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==u.PLATFORM_INTERNAL){t.next=4;break}return(n=this._getPromiseDecorator(_.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(_.DELETE_STORAGE_DATA),fd(this,pd,Ed).call(this,_.DELETE_STORAGE_DATA,{key:e})),t.abrupt("return",n.promise);case 4:return t.abrupt("return",ad(ud(l.prototype),"deleteDataFromStorage",this).call(this,e,r));case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(t){var e=this._getPromiseDecorator(_.PURCHASE);return e||(e=this._createPromiseDecorator(_.PURCHASE),fd(this,pd,Ed).call(this,_.PURCHASE,{id:t})),e.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var t=this._getPromiseDecorator(_.GET_CATALOG);return t||(t=this._createPromiseDecorator(_.GET_CATALOG),fd(this,pd,Ed).call(this,_.GET_CATALOG)),t.promise}},{key:"paymentsGetPurchases",value:function(){var t=this._getPromiseDecorator(_.GET_PURCHASES);return t||(t=this._createPromiseDecorator(_.GET_PURCHASES),fd(this,pd,Ed).call(this,_.GET_PURCHASES)),t.promise}},{key:"createPost",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._getPromiseDecorator(_.CREATE_POST);return e||(e=this._createPromiseDecorator(_.CREATE_POST),fd(this,pd,Ed).call(this,_.CREATE_POST,{options:t})),e.promise}},{key:"joinCommunity",value:function(){var t=this._getPromiseDecorator(_.JOIN_COMMUNITY);return t||(t=this._createPromiseDecorator(_.JOIN_COMMUNITY),fd(this,pd,Ed).call(this,_.JOIN_COMMUNITY)),t.promise}}],n&&od(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function jd(t){return jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jd(t)}function Nd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cd(n.key),n)}}function Cd(t){var e=function(t,e){if("object"!=jd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jd(e)?e:String(e)}function Gd(){return Gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Gd.apply(this,arguments)}function xd(t,e){return xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xd(t,e)}function Md(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bd(t){return Bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bd(t)}function Hd(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fd(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ud(t,e,"get"))}function Ud(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Vd=new WeakSet,Wd=new WeakMap;function zd(t){var e=document.createElement("ins");return e.style.display="block",e.classList.add("adsbygoogle"),e.setAttribute("data-ad-client",this._options.adSenseId),e.setAttribute("data-ad-slot",t),e.setAttribute("data-ad-format","auto"),e.setAttribute("data-container-id",c),e.setAttribute("data-full-width-responsive","true"),this._options.testMode&&e.setAttribute("data-adtest","on"),e}const Zd=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xd(t,e)}(l,e);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bd(o);if(c){var r=Bd(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Md(t)}(this,t)});function l(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Hd(e=Md(t=u.call.apply(u,[this].concat(o))),r=Vd),r.add(e),function(t,e,r){Hd(t,e),e.set(t,{writable:!0,value:function(){}})}(Md(t),Wd),t}return r=l,(n=[{key:"platformId",get:function(){return t.XIAOMI}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var t=this;if(this._isInitialized)return Promise.resolve();try{window.funmax&&window.funmax.loadStart&&window.funmax.loadStart()}catch(t){console.error(t)}var e,r=this._getPromiseDecorator(_.INITIALIZE);return r||(r=this._createPromiseDecorator(_.INITIALIZE),null!==(e=this._options)&&void 0!==e&&e.adSenseId?z({adSenseId:this._options.adSenseId,testMode:!!this._options.testMode}).then((function(e){var r,n;n=e,function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(r=t,Ud(r,Wd,"set"),n),t._isInitialized=!0,t._resolvePromiseDecorator(_.INITIALIZE)})).catch((function(e){t._rejectPromiseDecorator(_.INITIALIZE,e)})):this._rejectPromiseDecorator(_.INITIALIZE,g.GAME_PARAMS_NOT_FOUND)),r.promise}},{key:"sendMessage",value:function(t){return t===h.GAME_READY?new Promise((function(t){try{window.funmax&&window.funmax.loadReady&&window.funmax.loadReady()}catch(t){console.error(t)}t()})):Gd(Bd(l.prototype),"sendMessage",this).call(this,t)}},{key:"showBanner",value:function(t,e){if(!this._bannerContainer){this._bannerPlacement=e,this._bannerContainer=Z(t);var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}(this,Vd,zd).call(this,e);this._bannerContainer.appendChild(r),this._setBannerState(s.SHOWN)}}},{key:"hideBanner",value:function(){var t;null===(t=this._bannerContainer)||void 0===t||t.remove(),this._bannerContainer=null,this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(t){var e=this;Fd(this,Wd)?Fd(this,Wd).call(this,{type:"start",name:t,beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(t){var e=this;Fd(this,Wd)?Fd(this,Wd).call(this,{type:"reward",name:t,beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(t){t(0)},adDismissed:function(){},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}}])&&Nd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Uo);function Yd(t){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(t)}function Jd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jd(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Xd(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xd(n.key),n)}}function Xd(t){var e=function(t,e){if("object"!=Yd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yd(e)?e:String(e)}function Qd(t,e){ty(t,e),e.add(t)}function $d(t,e,r){ty(t,e),e.set(t,r)}function ty(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ey(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,oy(t,e,"set"),r),r}function ry(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function ny(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,oy(t,e,"get"))}function oy(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var iy=new WeakMap,ay=new WeakMap,sy=new WeakMap,cy=new WeakMap,uy=new WeakMap,ly=new WeakSet,fy=new WeakSet,py=new WeakSet,hy=new WeakSet;function dy(e){var r,n=t.MOCK,o=new URL(window.location.href);if(e.forciblySetPlatformId)n=ry(this,fy,yy).call(this,e.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=ry(this,fy,yy).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=t.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=t.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=t.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=t.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=t.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=t.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=t.PLAYDECK:o.hash.includes("tgWebAppData")?n=t.TELEGRAM:o.hostname.includes("y8")?n=t.Y8:o.hostname.includes("fbsbx")?n=t.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=t.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=t.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=t.BITQUEST:o.hostname.includes("eponesh.")?n=t.GAMEPUSH:o.hostname.includes("discordsays.com")?n=t.DISCORD:o.hostname.includes("usercontent.goog")?n=t.YOUTUBE:o.hostname.includes("portalapp.")?n=t.PORTAL:o.hostname.includes("devvit.")&&(n=t.REDDIT)}var a=e;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=X(a,a.platforms[n])),delete a.platforms,n){case t.VK:ey(this,sy,new ni(a));break;case t.YANDEX:ey(this,sy,new Ai(a));break;case t.CRAZY_GAMES:ey(this,sy,new sa(a));break;case t.ABSOLUTE_GAMES:ey(this,sy,new ga(a));break;case t.GAME_DISTRIBUTION:ey(this,sy,new Da(a));break;case t.OK:ey(this,sy,new Ls(a));break;case t.PLAYGAMA:ey(this,sy,new Xs(a));break;case t.PLAYDECK:ey(this,sy,new hc(a));break;case t.TELEGRAM:ey(this,sy,new Dc(a));break;case t.Y8:ey(this,sy,new Kc(a));break;case t.LAGGED:ey(this,sy,new ru(a));break;case t.FACEBOOK:ey(this,sy,new Ru(a));break;case t.POKI:ey(this,sy,new xl(a));break;case t.QA_TOOL:ey(this,sy,new Dl(a));break;case t.MSN:ey(this,sy,new yf(a));break;case t.MICROSOFT_STORE:ey(this,sy,new Wf(a));break;case t.HUAWEI:ey(this,sy,new Ip(a));break;case t.BITQUEST:ey(this,sy,new Wp(a));break;case t.GAMEPUSH:ey(this,sy,new ih(a));break;case t.DISCORD:ey(this,sy,new mh(a));break;case t.YOUTUBE:ey(this,sy,new Ih(a));break;case t.JIO_GAMES:ey(this,sy,new Wh(a));break;case t.PORTAL:ey(this,sy,new $h(a));break;case t.REDDIT:ey(this,sy,new Ld(a));break;case t.XIAOMI:ey(this,sy,new Zd(a));break;default:ey(this,sy,new Uo(a))}}function yy(e){for(var r=Object.values(t),n=0;n<r.length;n++)if(e===r[n])return e;return t.MOCK}function my(t){return ny(this,iy)||console.error(g.SDK_NOT_INITIALIZED),ny(this,cy)[t]}function vy(t){var e,r=ny(this,sy),n=r.options,o=r.platformId;return(null===(e=n.saas)||void 0===e?void 0:e[t])&&Array.isArray(n.saas[t].platforms)&&n.saas[t].platforms.includes(o)}const _y=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),Qd(this,hy),Qd(this,py),Qd(this,fy),Qd(this,ly),$d(this,iy,{writable:!0,value:!1}),$d(this,ay,{writable:!0,value:null}),$d(this,sy,{writable:!0,value:null}),$d(this,cy,{writable:!0,value:{}}),$d(this,uy,{writable:!0,value:"javascript"})}var c,p;return c=r,(p=[{key:"version",get:function(){return"1.28.0-preview.2"}},{key:"isInitialized",get:function(){return ny(this,iy)}},{key:"options",get:function(){return ny(this,sy).options}},{key:"platform",get:function(){return ry(this,py,my).call(this,e.PLATFORM)}},{key:"player",get:function(){return ry(this,py,my).call(this,e.PLAYER)}},{key:"game",get:function(){return ry(this,py,my).call(this,e.GAME)}},{key:"storage",get:function(){return ry(this,py,my).call(this,e.STORAGE)}},{key:"advertisement",get:function(){return ry(this,py,my).call(this,e.ADVERTISEMENT)}},{key:"social",get:function(){return ry(this,py,my).call(this,e.SOCIAL)}},{key:"device",get:function(){return ry(this,py,my).call(this,e.DEVICE)}},{key:"leaderboard",get:function(){return ry(this,py,my).call(this,e.LEADERBOARDS)}},{key:"leaderboards",get:function(){return ry(this,py,my).call(this,e.LEADERBOARDS)}},{key:"payments",get:function(){return ry(this,py,my).call(this,e.PAYMENTS)}},{key:"achievements",get:function(){return ry(this,py,my).call(this,e.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return ry(this,py,my).call(this,e.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return ry(this,py,my).call(this,e.CLIPBOARD)}},{key:"analytics",get:function(){return ry(this,py,my).call(this,e.ANALYTICS)}},{key:"engine",get:function(){return ny(this,uy)},set:function(t){ey(this,uy,t)}},{key:"PLATFORM_ID",get:function(){return t}},{key:"PLATFORM_MESSAGE",get:function(){return h}},{key:"MODULE_NAME",get:function(){return e}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return l}},{key:"DEVICE_ORIENTATION",get:function(){return f}},{key:"initialize",value:function(t){var r=this;if(ny(this,iy))return Promise.resolve();if(!ny(this,ay)){ey(this,ay,new D);var n,o=performance.now(),i="./playgama-bridge-config.json";t&&t.configFilePath&&(i=t.configFilePath),fetch(i).then((function(t){return t.json()})).then((function(t){n=Kd({},t)})).catch((function(e){console.error("Config parsing error.",e),n=Kd({},t)})).finally((function(){ry(r,ly,dy).call(r,n),ny(r,sy).engine=r.engine,ny(r,cy)[e.PLATFORM]=new $t(ny(r,sy)),ny(r,cy)[e.PLAYER]=new ie(ny(r,sy)),ny(r,cy)[e.GAME]=new de(ny(r,sy)),ny(r,cy)[e.STORAGE]=new Se(ny(r,sy)),ny(r,cy)[e.ADVERTISEMENT]=new Rr(ny(r,sy)),ny(r,cy)[e.SOCIAL]=new xr(ny(r,sy)),ny(r,cy)[e.DEVICE]=new yn(ny(r,sy)),ny(r,cy)[e.LEADERBOARDS]=ry(r,hy,vy).call(r,e.LEADERBOARDS)?new Zn(ny(r,sy)):new Pn(ny(r,sy)),ny(r,cy)[e.PAYMENTS]=new Qn(ny(r,sy)),ny(r,cy)[e.REMOTE_CONFIG]=new oo(ny(r,sy)),ny(r,cy)[e.CLIPBOARD]=new lo(ny(r,sy)),ny(r,cy)[e.ACHIEVEMENTS]=new vo(ny(r,sy)),ny(r,cy)[e.ANALYTICS]=Ht.initialize(ny(r,sy)),ny(r,sy).initialize().then((function(){var t,n;ey(r,iy,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white");var i=((performance.now()-o)/1e3).toFixed(2);if(Ht.send("".concat(e.CORE,"_initialization_completed"),e.CORE,{time_s:i}),ny(r,ay)&&(ny(r,ay).resolve(),ey(r,ay,null)),null!==(t=ny(r,sy).options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.preloadOnStart){var a=ny(r,sy).options.advertisement.interstitial.preloadOnStart;ny(r,cy)[e.ADVERTISEMENT].preloadInterstitial(a)}if(null!==(n=ny(r,sy).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var s=ny(r,sy).options.advertisement.rewarded.preloadOnStart;ny(r,cy)[e.ADVERTISEMENT].preloadRewarded(s)}})).catch((function(t){var r=((performance.now()-o)/1e3).toFixed(2),n=(null==t?void 0:t.message)||String(t);Ht.send("".concat(e.CORE,"_initialization_failed"),e.CORE,{error:n,time_s:r}),console.error("PlaygamaBridge initialization failed:",t)})).finally((function(){setTimeout((function(){return ny(r,cy)[e.GAME].setLoadingProgress(100,!0)}),700)}))}))}return ny(this,ay).promise}}])&&qd(c.prototype,p),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge||window.playgamaBridge||(window.bridge=new _y,window.playgamaBridge=window.bridge)})()})();